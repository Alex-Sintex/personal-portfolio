!function(){"use strict";var t,r,n,o,a,l,i,s,d,u,c,m,f,g=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var r=typeof t;return"object"===r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r},p=function(t){return{eq:t}},h=p(function(t,r){return t===r}),v=function(t){return p(function(r,n){if(r.length!==n.length)return!1;for(var o=r.length,a=0;a<o;a++)if(!t.eq(r[a],n[a]))return!1;return!0})},b=function(t){return p(function(r,n){var o,a,l,i=Object.keys(r),s=Object.keys(n);if(!(o=h,a=v(o),l=function(t){var r,n;return r=t,n=void 0,Array.prototype.slice.call(r).sort(n)},p(function(t,r){return a.eq(l(t),l(r))})).eq(i,s))return!1;for(var d=i.length,u=0;u<d;u++){var c=i[u];if(!t.eq(r[c],n[c]))return!1}return!0})},$=p(function(t,r){if(t===r)return!0;var n,o=g(t);return o===g(r)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n=o)?t===r:"array"===o?v($).eq(t,r):"object"===o&&b($).eq(t,r))});let y=Object.getPrototypeOf,C=(t,r,n)=>{var o;return!!n(t,r.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===r.name},_=t=>r=>(t=>{let r=typeof t;return null===t?"null":"object"===r&&Array.isArray(t)?"array":"object"===r&&C(t,String,(t,r)=>r.isPrototypeOf(t))?"string":r})(r)===t,x=t=>r=>typeof r===t,k=t=>r=>t===r,w=(t,r)=>S(t)&&C(t,r,(t,r)=>y(t)===r),E=_("string"),S=_("object"),N=t=>w(t,Object),R=_("array"),A=k(null),O=x("boolean"),T=k(void 0),B=t=>null==t,D=t=>!B(t),L=x("function"),P=x("number"),M=(t,r)=>{if(R(t)){for(let n=0,o=t.length;n<o;++n)if(!r(t[n]))return!1;return!0}return!1},I=()=>{},F=(t,r)=>(...n)=>t(r.apply(null,n)),U=(t,r)=>n=>t(r(n)),z=t=>()=>t,j=t=>t,H=(t,r)=>t===r;function V(t,...r){return(...n)=>{let o=r.concat(n);return t.apply(null,o)}}let q=t=>r=>!t(r),W=t=>()=>{throw Error(t)},K=t=>t(),G=t=>{t()},Y=z(!1),X=z(!0);class Q{constructor(t,r){this.tag=t,this.value=r}static some(t){return new Q(!0,t)}static none(){return Q.singletonNone}fold(t,r){return this.tag?r(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?Q.some(t(this.value)):Q.none()}bind(t){return this.tag?t(this.value):Q.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:Q.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw Error(null!=t?t:"Called getOrDie on None")}static from(t){return D(t)?Q.some(t):Q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Q.singletonNone=new Q(!1);let J=Array.prototype.slice,Z=Array.prototype.indexOf,ee=Array.prototype.push,et=(t,r)=>Z.call(t,r),er=(t,r)=>et(t,r)>-1,en=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return!0;return!1},eo=(t,r)=>{let n=t.length,o=Array(n);for(let a=0;a<n;a++){let l=t[a];o[a]=r(l,a)}return o},ea=(t,r)=>{for(let n=0,o=t.length;n<o;n++)r(t[n],n)},el=(t,r)=>{for(let n=t.length-1;n>=0;n--)r(t[n],n)},ei=(t,r)=>{let n=[],o=[];for(let a=0,l=t.length;a<l;a++){let i=t[a];(r(i,a)?n:o).push(i)}return{pass:n,fail:o}},es=(t,r)=>{let n=[];for(let o=0,a=t.length;o<a;o++){let l=t[o];r(l,o)&&n.push(l)}return n},ed=(t,r,n)=>(el(t,(t,o)=>{n=r(n,t,o)}),n),eu=(t,r,n)=>(ea(t,(t,o)=>{n=r(n,t,o)}),n),ec=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++){let l=t[o];if(r(l,o))return Q.some(l);if(n(l,o))break}return Q.none()},em=(t,r)=>ec(t,r,Y),ef=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return Q.some(n);return Q.none()},eg=t=>{let r=[];for(let n=0,o=t.length;n<o;++n){if(!R(t[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+t);ee.apply(r,t[n])}return r},ep=(t,r)=>eg(eo(t,r)),eh=(t,r)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==r(t[n],n))return!1;return!0},ev=t=>{let r=J.call(t,0);return r.reverse(),r},eb=(t,r)=>es(t,t=>!er(r,t)),e$=(t,r)=>{let n={};for(let o=0,a=t.length;o<a;o++){let l=t[o];n[String(l)]=r(l,o)}return n},ey=(t,r)=>{let n=J.call(t,0);return n.sort(r),n},eC=(t,r)=>r>=0&&r<t.length?Q.some(t[r]):Q.none(),e_=t=>eC(t,0),ex=t=>eC(t,t.length-1),ek=L(Array.from)?Array.from:t=>J.call(t),ew=(t,r)=>{for(let n=0;n<t.length;n++){let o=r(t[n],n);if(o.isSome())return o}return Q.none()},e8=Object.keys,eE=Object.hasOwnProperty,eS=(t,r)=>{let n=e8(t);for(let o=0,a=n.length;o<a;o++){let l=n[o];r(t[l],l)}},eN=(t,r)=>eR(t,(t,n)=>({k:n,v:r(t,n)})),eR=(t,r)=>{let n={};return eS(t,(t,o)=>{let a=r(t,o);n[a.k]=a.v}),n},eA=t=>(r,n)=>{t[n]=r},eO=(t,r,n,o)=>{eS(t,(t,a)=>{(r(t,a)?n:o)(t,a)})},eT=(t,r)=>{let n={};return eO(t,r,eA(n),I),n},eB=(t,r)=>{let n=[];return eS(t,(t,o)=>{n.push(r(t,o))}),n},eD=t=>eB(t,j),eL=(t,r)=>eP(t,r)?Q.from(t[r]):Q.none(),eP=(t,r)=>eE.call(t,r),eM=(t,r)=>eP(t,r)&&void 0!==t[r]&&null!==t[r],eI=t=>{let r={};return ea(t,t=>{r[t]={}}),e8(r)},eF=t=>void 0!==t.length,e0=Array.isArray,eU=(t,r,n)=>{if(!t)return!1;if(n=n||t,eF(t)){for(let o=0,a=t.length;o<a;o++)if(!1===r.call(n,t[o],o,t))return!1}else for(let l in t)if(eP(t,l)&&!1===r.call(n,t[l],l,t))return!1;return!0},e1=(t,r)=>{let n=[];return eU(t,(o,a)=>{n.push(r(o,a,t))}),n},ez=(t,r)=>{let n=[];return eU(t,(o,a)=>{r&&!r(o,a,t)||n.push(o)}),n},e6=(t,r,n,o)=>{let a=T(n)?t[0]:n;for(let l=0;l<t.length;l++)a=r.call(o,a,t[l],l);return a},ej=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++)if(r.call(n,t[o],o,t))return o;return -1},e4=t=>t[t.length-1],eH=t=>{let r,n=!1;return(...o)=>(n||(n=!0,r=t.apply(null,o)),r)},e7=()=>e3(0,0),e3=(t,r)=>({major:t,minor:r}),e9={nu:e3,detect(t,r){let n=String(r).toLowerCase();return 0===t.length?e7():((t,r)=>{let n=((t,r)=>{for(let n=0;n<t.length;n++){let o=t[n];if(o.test(r))return o}})(t,r);if(!n)return{major:0,minor:0};let o=t=>Number(r.replace(n,"$"+t));return e3(o(1),o(2))})(t,n)},unknown:e7},e2=(t,r)=>{let n=String(r).toLowerCase();return em(t,t=>t.search(n))},e5=(t,r,n)=>""===r||t.length>=r.length&&t.substr(n,n+r.length)===r,eV=(t,r)=>{var n,o;return eW(t,r)?(n=t,o=r.length,n.substring(o)):t},eq=(t,r,n=0,o)=>{let a=t.indexOf(r,n);return -1!==a&&(!!T(o)||a+r.length<=o)},eW=(t,r)=>e5(t,r,0),eK=(t,r)=>e5(t,r,t.length-r.length),eG=t=>r=>r.replace(t,""),eY=eG(/^\s+|\s+$/g),eX=eG(/^\s+/g),eQ=eG(/\s+$/g),eJ=t=>t.length>0,eZ=t=>!eJ(t),te=(t,r=10)=>{let n=parseInt(t,r);return isNaN(n)?Q.none():Q.some(n)},tt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tr=t=>r=>eq(r,t),tn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>eq(t,"edge/")&&eq(t,"chrome")&&eq(t,"safari")&&eq(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tt],search:t=>eq(t,"chrome")&&!eq(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>eq(t,"msie")||eq(t,"trident")},{name:"Opera",versionRegexes:[tt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tr("firefox")},{name:"Safari",versionRegexes:[tt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(eq(t,"safari")||eq(t,"mobile/"))&&eq(t,"applewebkit")}],to=[{name:"Windows",search:tr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>eq(t,"iphone")||eq(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tr("linux"),versionRegexes:[]},{name:"Solaris",search:tr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ta={browsers:z(tn),oses:z(to)},tl="Edge",ti="Chromium",ts="Opera",td="Firefox",tu="Safari",tc=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isEdge:o(tl),isChromium:o(ti),isIE:o("IE"),isOpera:o(ts),isFirefox:o(td),isSafari:o(tu)}},tm=()=>tc({current:void 0,version:e9.unknown()}),tf=tc,tg=(z(tl),z(ti),z("IE"),z(ts),z(td),z(tu),"Windows"),tp="Android",th="Linux",tv="macOS",tb="Solaris",t$="FreeBSD",ty="ChromeOS",tC=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isWindows:o(tg),isiOS:o("iOS"),isAndroid:o(tp),isMacOS:o(tv),isLinux:o(th),isSolaris:o(tb),isFreeBSD:o(t$),isChromeOS:o(ty)}},t_=()=>tC({current:void 0,version:e9.unknown()}),tx=tC,tk=(z(tg),z("iOS"),z(tp),z(th),z(tv),z(tb),z(t$),z(ty),t=>window.matchMedia(t).matches),tw=eH(()=>((t,r,n)=>{var o,a;let l=ta.browsers(),i=ta.oses(),s=r.bind(t=>{var r,n;return r=l,ew(t.brands,t=>{let n=t.brand.toLowerCase();return em(r,t=>{var r;return n===(null===(r=t.brand)||void 0===r?void 0:r.toLowerCase())}).map(r=>({current:r.name,version:e9.nu(parseInt(t.version,10),0)}))})}).orThunk(()=>{var r,n;return r=l,n=t,e2(r,n).map(t=>{let r=e9.detect(t.versionRegexes,n);return{current:t.name,version:r}})}).fold(tm,tf),d=(o=i,a=t,e2(o,a).map(t=>{let r=e9.detect(t.versionRegexes,a);return{current:t.name,version:r}})).fold(t_,tx),u=((t,r,n,o)=>{let a=t.isiOS()&&!0===/ipad/i.test(n),l=t.isiOS()&&!a,i=t.isiOS()||t.isAndroid(),s=i||o("(pointer:coarse)"),d=a||!l&&i&&o("(min-device-width:768px)"),u=l||i&&!d,c=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:z(a),isiPhone:z(l),isTablet:z(d),isPhone:z(u),isTouch:z(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:z(c),isDesktop:z(!u&&!d&&!c)}})(d,s,t,n);return{browser:s,os:d,deviceType:u}})(navigator.userAgent,Q.from(navigator.userAgentData),tk)),t8=()=>tw(),tE=navigator.userAgent,tS=t8(),tN=tS.browser,tR=tS.os,tA=tS.deviceType,tO=-1!==tE.indexOf("Windows Phone"),tT={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tN.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tN.isIE(),windowsPhone:tO,browser:{current:tN.current,version:tN.version,isChromium:tN.isChromium,isEdge:tN.isEdge,isFirefox:tN.isFirefox,isIE:tN.isIE,isOpera:tN.isOpera,isSafari:tN.isSafari},os:{current:tR.current,version:tR.version,isAndroid:tR.isAndroid,isChromeOS:tR.isChromeOS,isFreeBSD:tR.isFreeBSD,isiOS:tR.isiOS,isLinux:tR.isLinux,isMacOS:tR.isMacOS,isSolaris:tR.isSolaris,isWindows:tR.isWindows},deviceType:{isDesktop:tA.isDesktop,isiPad:tA.isiPad,isiPhone:tA.isiPhone,isPhone:tA.isPhone,isTablet:tA.isTablet,isTouch:tA.isTouch,isWebView:tA.isWebView}},tB=/^\s*|\s*$/g,tD=t=>B(t)?"":(""+t).replace(tB,""),tL=function(t,r,n,o){o=o||this,t&&(n&&(t=t[n]),eU(t,(t,a)=>!1!==r.call(o,t,a,n)&&(tL(t,r,n,o),!0)))},tP={trim:tD,isArray:e0,is:(t,r)=>r?!("array"!==r||!e0(t))||typeof t===r:void 0!==t,toArray(t){if(e0(t))return t;{let r=[];for(let n=0,o=t.length;n<o;n++)r[n]=t[n];return r}},makeMap(t,r,n={}){let o=E(t)?t.split(r||","):t||[],a=o.length;for(;a--;)n[o[a]]={};return n},each:eU,map:e1,grep:ez,inArray(t,r){if(t){for(let n=0,o=t.length;n<o;n++)if(t[n]===r)return n}return -1},hasOwn:eP,extend(t,...r){for(let n=0;n<r.length;n++){let o=r[n];for(let a in o)if(eP(o,a)){let l=o[a];void 0!==l&&(t[a]=l)}}return t},walk:tL,resolve(t,r=window){let n=t.split(".");for(let o=0,a=n.length;o<a&&(r=r[n[o]]);o++);return r},explode:(t,r)=>R(t)?t:""===t?[]:e1(t.split(r||","),tD),_addCacheSuffix(t){let r=tT.cacheSuffix;return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},tM=(t,r,n=H)=>t.exists(t=>n(t,r)),tI=(t,r,n)=>t.isSome()&&r.isSome()?Q.some(n(t.getOrDie(),r.getOrDie())):Q.none(),tF=(t,r)=>t?Q.some(r):Q.none(),t0="undefined"!=typeof window?window:Function("return this;")(),tU=(t,r)=>((t,r)=>{let n=null!=r?r:t0;for(let o=0;o<t.length&&null!=n;++o)n=n[t[o]];return n})(t.split("."),r),t1=Object.getPrototypeOf,tz=t=>{var r;let n=tU("ownerDocument.defaultView",t);return S(t)&&(((t,r)=>{var n,o;let a=(n=t,o=r,tU(n,o));if(null==a)throw Error(t+" not available on this browser");return a})("HTMLElement",n).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(t1(t).constructor.name))},t6=t=>t.dom.nodeName.toLowerCase(),tj=t=>t.dom.nodeType,t4=t=>r=>tj(r)===t,tH=t=>t7(t)&&tz(t.dom),t7=t4(1),t3=t4(3),t9=t4(9),t2=t4(11),t5=t=>r=>t7(r)&&t6(r)===t,tV=(t,r,n)=>{if(!(E(n)||O(n)||P(n)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",n,":: Element ",t),Error("Attribute value was not simple");t.setAttribute(r,n+"")},tq=(t,r,n)=>{tV(t.dom,r,n)},tW=(t,r)=>{let n=t.dom;eS(r,(t,r)=>{tV(n,r,t)})},tK=(t,r)=>{let n=t.dom.getAttribute(r);return null===n?void 0:n},tG=(t,r)=>Q.from(tK(t,r)),tY=(t,r)=>{let n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(r)},tX=(t,r)=>{t.dom.removeAttribute(r)},tQ=t=>eu(t.dom.attributes,(t,r)=>(t[r.name]=r.value,t),{}),tJ=(t,r)=>{let n=tK(t,r);return void 0===n||""===n?[]:n.split(" ")},tZ=t=>void 0!==t.dom.classList,re=t=>tJ(t,"class"),rt=(t,r)=>((t,r,n)=>{let o=tJ(t,r).concat([n]);return tq(t,r,o.join(" ")),!0})(t,"class",r),rr=(t,r)=>((t,r,n)=>{let o=es(tJ(t,r),t=>t!==n);return o.length>0?tq(t,r,o.join(" ")):tX(t,r),!1})(t,"class",r),rn=(t,r)=>{tZ(t)?t.dom.classList.add(r):rt(t,r)},ro=t=>{0===(tZ(t)?t.dom.classList:re(t)).length&&tX(t,"class")},ra=(t,r)=>{tZ(t)?t.dom.classList.remove(r):rr(t,r),ro(t)},rl=(t,r)=>tZ(t)&&t.dom.classList.contains(r),ri=t=>{if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}},rs=(t,r)=>{let n=(r||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){let o="HTML does not have a single root node";throw console.error(o,t),Error(o)}return ri(n.childNodes[0])},rd=(t,r)=>{let n=(r||document).createElement(t);return ri(n)},ru=(t,r)=>{let n=(r||document).createTextNode(t);return ri(n)},rc=ri,rm=(t,r,n)=>Q.from(t.dom.elementFromPoint(r,n)).map(ri),rf=(t,r)=>{let n=[],o=t=>(n.push(t),r(t)),a=r(t);do a=a.bind(o);while(a.isSome());return n},rg=(t,r)=>{let n=t.dom;if(1!==n.nodeType)return!1;{let o=n;if(void 0!==o.matches)return o.matches(r);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(r);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(r);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(r);throw Error("Browser lacks native selectors")}},rp=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,rh=(t,r)=>t.dom===r.dom,rv=(t,r)=>{let n=t.dom,o=r.dom;return n!==o&&n.contains(o)},rb=t=>rc(t.dom.ownerDocument),r$=t=>t9(t)?t:rb(t),ry=t=>rc(r$(t).dom.defaultView),rC=t=>Q.from(t.dom.parentNode).map(rc),r_=t=>Q.from(t.dom.parentElement).map(rc),rx=(t,r)=>{let n=L(r)?r:Y,o=t.dom,a=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let l=o.parentNode,i=rc(l);if(a.push(i),!0===n(i))break;o=l}return a},rk=t=>Q.from(t.dom.previousSibling).map(rc),rw=t=>Q.from(t.dom.nextSibling).map(rc),r8=t=>ev(rf(t,rk)),rE=t=>rf(t,rw),rS=t=>eo(t.dom.childNodes,rc),rN=(t,r)=>{let n=t.dom.childNodes;return Q.from(n[r]).map(rc)},rR=t=>rN(t,0),rA=t=>rN(t,t.dom.childNodes.length-1),rO=t=>t.dom.childNodes.length,rT=t=>t2(t)&&D(t.dom.host),rB=L(Element.prototype.attachShadow)&&L(Node.prototype.getRootNode),rD=z(rB),rL=rB?t=>rc(t.dom.getRootNode()):r$,rP=t=>rT(t)?t:(t=>{let r=t.dom.head;if(null==r)throw Error("Head is not available yet");return rc(r)})(r$(t)),rM=t=>rc(t.dom.host),rI=t=>{if(rD()&&D(t.target)){let r=rc(t.target);if(t7(r)&&rF(r)&&t.composed&&t.composedPath){let n=t.composedPath();if(n)return e_(n)}}return Q.from(t.target)},rF=t=>D(t.dom.shadowRoot),r0=t=>{let r=t3(t)?t.dom.parentNode:t.dom;if(null==r||null===r.ownerDocument)return!1;let n=r.ownerDocument;return(t=>{let r=rL(t);return rT(r)?Q.some(r):Q.none()})(rc(r)).fold(()=>n.body.contains(r),U(r0,rM))};var rU=(t,r,n,o,a)=>t(n,o)?Q.some(n):L(a)&&a(n)?Q.none():r(n,o,a);let r1=(t,r,n)=>{let o=t.dom,a=L(n)?n:Y;for(;o.parentNode;){o=o.parentNode;let l=rc(o);if(r(l))return Q.some(l);if(a(l))break}return Q.none()},rz=(t,r,n)=>rU((t,r)=>r(t),r1,t,r,n),r6=(t,r,n)=>r1(t,t=>rg(t,r),n),rj=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rp(n)?Q.none():Q.from(n.querySelector(t)).map(rc)})(r,t),r4=(t,r,n)=>rU((t,r)=>rg(t,r),r6,t,r,n),rH=(t,r=!1)=>{var n;return r0(t)?t.dom.isContentEditable:r4(n=t,"[contenteditable]").fold(z(r),t=>"true"===r7(t))},r7=t=>t.dom.contentEditable,r3=t=>void 0!==t.style&&L(t.style.getPropertyValue),r9=(t,r,n)=>{if(!E(n))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",n,":: Element ",t),Error("CSS value must be a string: "+n);r3(t)&&t.style.setProperty(r,n)},r2=(t,r,n)=>{let o=t.dom;r9(o,r,n)},r5=(t,r)=>{let n=t.dom;eS(r,(t,r)=>{r9(n,r,t)})},rV=(t,r)=>{let n=t.dom,o=window.getComputedStyle(n).getPropertyValue(r);return""!==o||r0(t)?o:rq(n,r)},rq=(t,r)=>r3(t)?t.style.getPropertyValue(r):"",rW=(t,r)=>{let n=t.dom,o=rq(n,r);return Q.from(o).filter(t=>t.length>0)},rK=t=>{let r={},n=t.dom;if(r3(n))for(let o=0;o<n.style.length;o++){let a=n.style.item(o);r[a]=n.style[a]}return r},rG=(t,r)=>{var n,o;n=t.dom,o=r,r3(n)&&n.style.removeProperty(o),tM(tG(t,"style").map(eY),"")&&tX(t,"style")},rY=(t,r)=>{rC(t).each(n=>{n.dom.insertBefore(r.dom,t.dom)})},rX=(t,r)=>{rw(t).fold(()=>{rC(t).each(t=>{rJ(t,r)})},t=>{rY(t,r)})},rQ=(t,r)=>{rR(t).fold(()=>{rJ(t,r)},n=>{t.dom.insertBefore(r.dom,n.dom)})},rJ=(t,r)=>{t.dom.appendChild(r.dom)},rZ=(t,r)=>{rY(t,r),rJ(r,t)},ne=(t,r)=>{ea(r,r=>{rJ(t,r)})},nt=t=>{t.dom.textContent="",ea(rS(t),t=>{nr(t)})},nr=t=>{let r=t.dom;null!==r.parentNode&&r.parentNode.removeChild(r)},nn=t=>{var r,n;let o=rS(t);o.length>0&&(r=t,ea(n=o,(t,o)=>{let a=0===o?r:n[o-1];rX(a,t)})),nr(t)},no=t=>eo(t,rc),na=t=>t.dom.innerHTML,nl=(t,r)=>{let n=rb(t).dom,o=rc(n.createDocumentFragment()),a=((t,r)=>{let n=(r||document).createElement("div");return n.innerHTML=t,rS(rc(n))})(r,n);ne(o,a),nt(t),rJ(t,o)},ni=(t,r,n,o)=>((t,r,n,o,a)=>{var l,i;let s=(l=n,i=o,t=>{l(t)&&i((t=>{var r,n,o,a,l,i,s;let d=rc(rI(t).getOr(t.target)),u=()=>t.stopPropagation(),c=()=>t.preventDefault(),m=F(c,u);return r=d,n=t.clientX,o=t.clientY,a=u,l=c,i=m,s=t,{target:r,x:n,y:o,stop:a,prevent:l,kill:i,raw:s}})(t))});return t.dom.addEventListener(r,s,!1),{unbind:V(ns,t,r,s,!1)}})(t,r,n,o),ns=(t,r,n,o)=>{t.dom.removeEventListener(r,n,o)},nd=(t,r)=>({left:t,top:r,translate:(n,o)=>nd(t+n,r+o)}),nu=nd,nc=(t,r)=>void 0!==t?t:void 0!==r?r:0,nm=t=>{let r=t.dom,n=r.ownerDocument.body;return n===r?nu(n.offsetLeft,n.offsetTop):r0(t)?(t=>{let r=t.getBoundingClientRect();return nu(r.left,r.top)})(r):nu(0,0)},nf=t=>{let r=void 0!==t?t.dom:document,n=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop;return nu(n,o)},ng=(t,r)=>{t8().browser.isSafari()&&L(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(r)},np=(t,r,n,o)=>({x:t,y:r,width:n,height:o,right:t+n,bottom:r+o}),nh=t=>{let r=void 0===t?window:t,n=r.document,o=nf(rc(n));return(t=>{let r=void 0===t?window:t;return t8().browser.isFirefox()?Q.none():Q.from(r.visualViewport)})(r).fold(()=>{let t=r.document.documentElement,n=t.clientWidth,a=t.clientHeight;return np(o.left,o.top,n,a)},t=>np(Math.max(t.pageLeft,o.left),Math.max(t.pageTop,o.top),t.width,t.height))},nv=(t,r)=>{let n=[];return ea(rS(t),t=>{r(t)&&(n=n.concat([t])),n=n.concat(nv(t,r))}),n},nb=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rp(n)?[]:eo(n.querySelectorAll(t),rc)})(r,t),n$=(t,r,n)=>r6(t,r,n).isSome();class ny{constructor(t,r){this.node=t,this.rootNode=r,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,r,n,o){if(t){if(!o&&t[r])return t[r];if(t!==this.rootNode){let a=t[n];if(a)return a;for(let l=t.parentNode;l&&l!==this.rootNode;l=l.parentNode)if(a=l[n])return a}}}findPreviousNode(t,r){if(t){let n=t.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!r){for(let o=n.lastChild;o;o=o.lastChild)if(!o.lastChild)return o}return n}let a=t.parentNode;if(a&&a!==this.rootNode)return a}}}let nC=t=>r=>!!r&&r.nodeType===t,n_=t=>!!t&&!Object.getPrototypeOf(t),nx=nC(1),nk=t=>{let r=t.toLowerCase();return t=>D(t)&&t.nodeName.toLowerCase()===r},nw=t=>{let r=t.map(t=>t.toLowerCase());return t=>{if(t&&t.nodeName){let n=t.nodeName.toLowerCase();return er(r,n)}return!1}},n8=(t,r)=>{let n=r.toLowerCase().split(" ");return r=>{if(nx(r)){let o=r.ownerDocument.defaultView;if(o)for(let a=0;a<n.length;a++){let l=o.getComputedStyle(r,null);if((l?l.getPropertyValue(t):null)===n[a])return!0}}return!1}},nE=t=>r=>nx(r)&&r.hasAttribute(t),nS=t=>nx(t)&&t.hasAttribute("data-mce-bogus"),nN=t=>nx(t)&&"TABLE"===t.tagName,nR=t=>r=>!!nx(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t),nA=nw(["textarea","input"]),nO=nC(3),nT=nC(4),nB=nC(7),nD=nC(8),nL=nC(9),nP=nC(11),nM=nk("br"),nI=nk("img"),nF=nR("true"),n0=nR("false"),nU=nw(["td","th"]),n1=nw(["td","th","caption"]),nz=nw(["video","audio","object","embed"]),n6=nk("li"),nj=nk("details"),n4=nk("summary"),nH=t=>"\uFEFF"===t,n7=((t,r)=>{let n=r=>t(r)?Q.from(r.dom.nodeValue):Q.none();return{get(r){if(!t(r))throw Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set(r,n){if(!t(r))throw Error("Can only set raw text value of a text node");r.dom.nodeValue=n}}})(t3),n3=t=>n7.get(t),n9=t=>n7.getOption(t),n2=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),n5=t=>{let r;return n=>(r=r||e$(t,X),eP(r,t6(n)))},nV=n5(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),nq=t=>t7(t)&&!nV(t),nW=t=>t7(t)&&"br"===t6(t),nK=n5(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),nG=n5(["ul","ol","dl"]),nY=n5(["li","dd","dt"]),nX=n5(["thead","tbody","tfoot"]),nQ=n5(["td","th"]),nJ=n5(["pre","script","textarea","style"]),nZ=n5(n2),oe=t=>nZ(t)||nq(t),ot=()=>{let t=rd("br");return tq(t,"data-mce-bogus","1"),t},or=t=>{nt(t),rJ(t,ot())},on=t=>{rA(t).each(r=>{rk(r).each(n=>{nV(t)&&nW(r)&&nV(n)&&nr(r)})})},oo=nH,oa=t=>t.replace(/\uFEFF/g,""),ol=nx,oi=nO,os=t=>(oi(t)&&(t=t.parentNode),ol(t)&&t.hasAttribute("data-mce-caret")),od=t=>oi(t)&&oo(t.data),ou=t=>os(t)||od(t),oc=t=>t.firstChild!==t.lastChild||!nM(t.firstChild),om=t=>{let r=t.container();return!!nO(r)&&("\uFEFF"===r.data.charAt(t.offset())||t.isAtStart()&&od(r.previousSibling))},of=t=>{let r=t.container();return!!nO(r)&&("\uFEFF"===r.data.charAt(t.offset()-1)||t.isAtEnd()&&od(r.nextSibling))},og=t=>oi(t)&&"\uFEFF"===t.data[0],op=t=>oi(t)&&"\uFEFF"===t.data[t.data.length-1],oh=t=>t&&t.hasAttribute("data-mce-caret")?((t=>{var r;let n=t.getElementsByTagName("br"),o=n[n.length-1];nS(o)&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,ov=t=>os(t.startContainer),ob=nF,o$=n0,oy=nM,oC=nO,o_=nw(["script","style","textarea"]),ox=nw(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ok=nw(["table"]),ow=ou,o8=t=>!ow(t)&&(oC(t)?!o_(t.parentNode):ox(t)||oy(t)||ok(t)||oE(t)),oE=t=>{var r;return!(nx(r=t)&&"true"===r.getAttribute("unselectable"))&&o$(t)},oS=(t,r)=>o8(t)&&((t,r)=>{for(let n=t.parentNode;n&&n!==r;n=n.parentNode){if(oE(n))return!1;if(ob(n))break}return!0})(t,r),oN=/^[ \t\r\n]*$/,oR=t=>oN.test(t),oA=t=>{for(let r of t)if(!nH(r))return!1;return!0},oO=t=>"\n"===t||"\r"===t,oT=(t,r=4,n=!0,o=!0)=>{var a,l;let i=(l=r)<=0?"":Array(l+1).join(" "),s=t.replace(/\t/g,i),d=eu(s,(t,r)=>{var a,l,i;return(a=r,-1!==" \f	\v".indexOf(a)||"\xa0"===r)?t.pcIsSpace||""===t.str&&n||t.str.length===s.length-1&&o||(l=s,(i=t.str.length+1)<l.length&&i>=0&&oO(l[i]))?{pcIsSpace:!1,str:t.str+"\xa0"}:{pcIsSpace:!0,str:t.str+" "}:{pcIsSpace:oO(r),str:t.str+r}},{pcIsSpace:!1,str:""});return d.str},oB=(t,r)=>{var n,o,a;return o8(t)&&(n=t,o=r,!(nO(n)&&oR(n.data))||!!((t,r)=>{let n=rc(r),o=rc(t);return n$(o,"pre,code",V(rh,n))})(n,o))||nx(a=t)&&"A"===a.nodeName&&!a.hasAttribute("href")&&(a.hasAttribute("name")||a.hasAttribute("id"))||oD(t)},oD=nE("data-mce-bookmark"),oL=nE("data-mce-bogus"),oP=t=>nx(t)&&"all"===t.getAttribute("data-mce-bogus"),oM=(t,r=!0)=>((t,r)=>{let n=0;if(oB(t,t))return!1;{let o=t.firstChild;if(!o)return!0;let a=new ny(o,t);do{if(r){if(oP(o)){o=a.next(!0);continue}if(oL(o)){o=a.next();continue}}if(nM(o))n++,o=a.next();else{if(oB(o,t))return!1;o=a.next()}}while(o);return n<=1}})(t.dom,r),oI="data-mce-block",oF=t=>{var r;return es(e8(t),t=>!/[A-Z]/.test(t)).join(",")},o0=(t,r)=>D(r.querySelector(t))?(r.setAttribute(oI,"true"),"inline-boundary"===r.getAttribute("data-mce-selected")&&r.removeAttribute("data-mce-selected"),!0):(r.removeAttribute(oI),!1),oU=(t,r)=>{let n=oF(t.getTransparentElements()),o=oF(t.getBlockElements());return es(r.querySelectorAll(n),t=>o0(o,t))},o1=(t,r)=>{var n;let o=r?"lastChild":"firstChild";for(let a=t[o];a;a=a[o])if(oM(rc(a)))return void(null===(n=a.parentNode)||void 0===n||n.removeChild(a))},oz=(t,r,n)=>{let o=t.getBlockElements(),a=rc(r),l=t=>t6(t) in o,i=t=>rh(t,a);ea(no(n),r=>{r1(r,l,i).each(n=>{var o;let a=(o=r,es(rS(o),r=>l(r)&&!t.isValidChild(t6(n),t6(r))));if(a.length>0){let s=r_(n);ea(a,t=>{r1(t,l,i).each(r=>{((t,r)=>{let n=document.createRange(),o=t.parentNode;if(o){n.setStartBefore(t),n.setEndBefore(r);let a=n.extractContents();o1(a,!0),n.setStartAfter(r),n.setEndAfter(t);let l=n.extractContents();o1(l,!1),oM(rc(a))||o.insertBefore(a,t),oM(rc(r))||o.insertBefore(r,t),oM(rc(l))||o.insertBefore(l,t),o.removeChild(t)}})(r.dom,t.dom)})}),s.each(r=>oU(t,r.dom))}})})},o6=(t,r)=>{var n,o,a;let l=oU(t,r);oz(t,r,l),n=t,o=r,a=l,ea([...a,...o3(n,o)?[o]:[]],t=>ea(nb(rc(t),t.nodeName.toLowerCase()),t=>{o9(n,t.dom)&&nn(t)}))},oj=(t,r)=>{if(o7(t,r)){let n=oF(t.getBlockElements());o0(n,r)}},o4=t=>t.hasAttribute(oI),oH=(t,r)=>eP(t.getTransparentElements(),r),o7=(t,r)=>nx(r)&&oH(t,r.nodeName),o3=(t,r)=>o7(t,r)&&o4(r),o9=(t,r)=>o7(t,r)&&!o4(r),o2=(t,r)=>1===r.type&&oH(t,r.name)&&E(r.attr(oI)),o5=t8().browser,oV=t=>em(t,t7),oq=(t,r)=>t.children&&er(t.children,r),oW=(t,r={})=>{let n=0,o={},a=rc(t),l=r$(a),i=t=>new Promise((i,s)=>{var d,u;let c,m=tP._addCacheSuffix(t),f=(u=m,eL(o,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})));o[m]=f,f.count++;let g=(t,r)=>{ea(t,G),f.status=r,f.passed=[],f.failed=[],c&&(c.onload=null,c.onerror=null,c=null)},p=()=>g(f.passed,2),h=()=>g(f.failed,3);if(i&&f.passed.push(i),s&&f.failed.push(s),1===f.status)return;if(2===f.status)return void p();if(3===f.status)return void h();f.status=1;let v=rd("link",l.dom);tW(v,{rel:"stylesheet",type:"text/css",id:f.id}),r.contentCssCors&&tq(v,"crossOrigin","anonymous"),r.referrerPolicy&&tq(v,"referrerpolicy",r.referrerPolicy),(c=v.dom).onload=p,c.onerror=h,d=v,rJ(rP(a),d),tq(v,"href",m)}),s=t=>{let r=tP._addCacheSuffix(t);eL(o,r).each(t=>{0==--t.count&&(delete o[r],(t=>{let r=rP(a);rj(r,"#"+t).each(nr)})(t.id))})};return{load:i,loadAll:t=>Promise.allSettled(eo(t,t=>i(t).then(z(t)))).then(t=>{let r=ei(t,t=>"fulfilled"===t.status);return r.fail.length>0?Promise.reject(eo(r.fail,t=>t.reason)):eo(r.pass,t=>t.value)}),unload:s,unloadAll(t){ea(t,t=>{s(t)})},_setReferrerPolicy(t){r.referrerPolicy=t},_setContentCssCors(t){r.contentCssCors=t}}},oK=(()=>{let t=new WeakMap;return{forElement(r,n){let o=rL(r).dom;return Q.from(t.get(o)).getOrThunk(()=>{let r=oW(o,n);return t.set(o,r),r})}}})(),oG=(t,r)=>D(t)&&(oB(t,r)||nq(rc(t))),oY=t=>{var r;return"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type")},oX=(t,r,n)=>{var o,a,l,i,s;let d=n||r;if(nx(r)&&oY(r))return r;let u=r.childNodes;for(let c=u.length-1;c>=0;c--)oX(t,u[c],d);if(nx(r)){let m=r.childNodes;1===m.length&&oY(m[0])&&(null===(o=r.parentNode)||void 0===o||o.insertBefore(m[0],r))}return nP(a=r)||nL(a)||oB(r,d)||nx(l=r)&&l.childNodes.length>0||(i=r,s=d,nO(i)&&i.data.length>0&&((t,r)=>{let n=new ny(t,r).prev(!1),o=new ny(t,r).next(!1),a=T(n)||oG(n,r),l=T(o)||oG(o,r);return a&&l})(i,s))||t.remove(r),r},oQ=tP.makeMap,oJ=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oZ=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ae=/[<>&\"\']/g,at=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ar={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},an={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ao={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},aa=(t,r)=>{let n={};if(t){let o=t.split(",");r=r||10;for(let a=0;a<o.length;a+=2){let l=String.fromCharCode(parseInt(o[a],r));if(!an[l]){let i="&"+o[a+1]+";";n[l]=i,n[i]=l}}return n}},al=aa("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ai=(t,r)=>t.replace(r?oJ:oZ,t=>an[t]||t),as=(t,r)=>t.replace(r?oJ:oZ,t=>t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":an[t]||"&#"+t.charCodeAt(0)+";"),ad=(t,r,n)=>{let o=n||al;return t.replace(r?oJ:oZ,t=>an[t]||o[t]||t)},au={encodeRaw:ai,encodeAllRaw:t=>(""+t).replace(ae,t=>an[t]||t),encodeNumeric:as,encodeNamed:ad,getEncodeFunc(t,r){let n=aa(r)||al,o=oQ(t.replace(/\+/g,","));return o.named&&o.numeric?(t,r)=>t.replace(r?oJ:oZ,t=>void 0!==an[t]?an[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"):o.named?r?(t,r)=>ad(t,r,n):ad:o.numeric?as:ai},decode:t=>t.replace(at,(t,r)=>r?(r="x"===r.charAt(0).toLowerCase()?parseInt(r.substr(1),16):parseInt(r,10))>65535?String.fromCharCode(55296+((r-=65536)>>10),56320+(1023&r)):ar[r]||String.fromCharCode(r):ao[t]||al[t]||(t=>{let r=rd("div").dom;return r.innerHTML=t,r.textContent||r.innerText||t})(t))},ac={},am={},af={},ag=tP.makeMap,ap=tP.each,ah=tP.extend,av=tP.explode,ab=tP.inArray,a$=(t,r)=>(t=tP.trim(t))?t.split(r||" "):[],ay=(t,r={})=>{let n=ag(t," ",ag(t.toUpperCase()," "));return ah(n,r)},aC=t=>ay("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),a_=(t,r)=>{if(t){let n={};return E(t)&&(t={"*":t}),ap(t,(t,o)=>{n[o]=n[o.toUpperCase()]="map"===r?ag(t,/[, ]/):av(t,/[, ]/)}),n}},ax=(t={})=>{var r;let n={},o={},a=[],l={},i={},s=(r,n,o)=>{let a=t[r];if(a)return ag(a,/[, ]/,ag(a.toUpperCase(),/[, ]/));{let l=am[r];return l||(l=ay(n,o),am[r]=l),l}},d=null!==(r=t.schema)&&void 0!==r?r:"html5",u=(t=>{let r={},n,o,a,l,i=(t,o="",a="")=>{let l=a$(a),i=a$(t),s=i.length;for(;s--;){let d=a$([n,o].join(" "));r[i[s]]={attributes:e$(d,()=>({})),attributesOrder:d,children:e$(l,z(af))}}},s=(t,n)=>{let o=a$(t),a=a$(n),l=o.length;for(;l--;){let i=r[o[l]];for(let s=0,d=a.length;s<d;s++)i.attributes[a[s]]={},i.attributesOrder.push(a[s])}};if(ac[t])return ac[t];if(n="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",a="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",a+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t){n+=" xml:lang";let d="acronym applet basefont big font strike tt";a=[a,d].join(" "),ap(a$(d),t=>{i(t,"",a)});let u="center dir isindex noframes";l=[o=[o,u].join(" "),a].join(" "),ap(a$(u),t=>{i(t,"",l)})}return l=l||[o,a].join(" "),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",l),i("dd div","",l),i("address dt caption","","html4"===t?a:l),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",a),i("blockquote","cite",l),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",l),i("dl","","dt dd"),i("a","href target rel media hreflang type","html4"===t?a:l),i("q","cite",a),i("ins del","cite datetime",l),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",l),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[l,"param"].join(" ")),i("param","name value"),i("map","name",[l,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",l),i("th","colspan rowspan headers scope abbr",l),i("form","accept-charset action autocomplete enctype method name novalidate target",l),i("fieldset","disabled form name",[l,"legend"].join(" ")),i("label","form for",a),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?l:a),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[l,"li"].join(" ")),i("noscript","",l),"html4"!==t&&(i("wbr"),i("ruby","",[a,"rt rp"].join(" ")),i("figcaption","",l),i("mark rt rp summary bdi","",a),i("canvas","width height",l),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[l,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[l,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[a,"option"].join(" ")),i("article section nav aside main header footer","",l),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[l,"figcaption"].join(" ")),i("time","datetime",a),i("dialog","open",l),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",a),i("progress","value max",a),i("meter","value min max low high optimum",a),i("details","open",[l,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==t&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==t&&ea([r.video,r.audio],t=>{delete t.children.audio,delete t.children.video}),ap(a$("a form meter progress dfn"),t=>{r[t]&&delete r[t].children[t]}),delete r.caption.children.table,delete r.script,ac[t]=r,r})(d);!1===t.verify_html&&(t.valid_elements="*[*]");let c=a_(t.valid_styles),m=a_(t.invalid_styles,"map"),f=a_(t.valid_classes,"map"),g=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),v=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",$=s("non_empty_elements",b+" pre",h),y=s("move_caret_before_on_enter_elements",b+" table",h),C=s("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),_=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",C),x=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),k=s("transparent_elements","a ins del canvas map");ap("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),t=>{i[t]=RegExp("</"+t+"[^>]*>","gi")});let w=t=>RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),E=t=>{let r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,l=/[*?+]/;if(t){let i=a$(t,","),s,d;n["@"]&&(s=n["@"].attributes,d=n["@"].attributesOrder);for(let u=0,c=i.length;u<c;u++){let m=r.exec(i[u]);if(m){let f=m[1],g=m[2],p=m[3],h=m[5],v={},b=[],$={attributes:v,attributesOrder:b};if("#"===f&&($.paddEmpty=!0),"-"===f&&($.removeEmpty=!0),"!"===m[4]&&($.removeEmptyAttrs=!0),s&&(eS(s,(t,r)=>{v[r]=t}),d&&b.push(...d)),h){let y=a$(h,"|");for(let C=0,_=y.length;C<_;C++)if(m=o.exec(y[C])){let x={},k=m[1],E=m[2].replace(/[\\:]:/g,":"),S=m[3],N=m[4];if("!"===k&&($.attributesRequired=$.attributesRequired||[],$.attributesRequired.push(E),x.required=!0),"-"===k){delete v[E],b.splice(ab(b,E),1);continue}if(S&&("="===S&&($.attributesDefault=$.attributesDefault||[],$.attributesDefault.push({name:E,value:N}),x.defaultValue=N),"~"===S&&($.attributesForced=$.attributesForced||[],$.attributesForced.push({name:E,value:N}),x.forcedValue=N),"<"===S&&(x.validValues=ag(N,"?"))),l.test(E)){let R=x;$.attributePatterns=$.attributePatterns||[],R.pattern=w(E),$.attributePatterns.push(R)}else v[E]||b.push(E),v[E]=x}}if(s||"@"!==g||(s=v,d=b),p&&($.outputName=g,n[p]=$),l.test(g)){let A=$;A.pattern=w(g),a.push(A)}else n[g]=$}}}},S=t=>{a=[],ea(e8(n),t=>{delete n[t]}),E(t),ap(u,(t,r)=>{o[r]=t.children})},N=t=>{let r=/^(~)?(.+)$/;t&&(delete am.text_block_elements,delete am.block_elements,ap(a$(t,","),t=>{let a=r.exec(t);if(a){let i="~"===a[1],s=i?"span":"div",d=a[2];if(o[d]=o[s],l[d]=s,$[d.toUpperCase()]={},$[d]={},i||(_[d.toUpperCase()]={},_[d]={}),!n[d]){let u=n[s];delete(u=ah({},u)).removeEmptyAttrs,delete u.removeEmpty,n[d]=u}ap(o,(t,r)=>{t[s]&&(o[r]=t=ah({},o[r]),t[d]=t[s])})}}))},R=t=>{let r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete ac[d],t&&ap(a$(t,","),t=>{let n=r.exec(t);if(n){let a=n[1],l;l=a?o[n[2]]:o[n[2]]={"#comment":{}},l=o[n[2]],ap(a$(n[3],"|"),t=>{"-"===a?delete l[t]:l[t]={}})}})},A=t=>{let r=n[t];if(r)return r;let o=a.length;for(;o--;){let l=a[o];if(l.pattern.test(t))return l}};t.valid_elements?S(t.valid_elements):(ap(u,(t,r)=>{n[r]={attributes:t.attributes,attributesOrder:t.attributesOrder},o[r]=t.children}),ap(a$("strong/b em/i"),t=>{let r=a$(t,"/");n[r[1]].outputName=r[0]}),ap(x,(r,o)=>{n[o]&&(t.padd_empty_block_inline_children&&(n[o].paddInEmptyBlock=!0),n[o].removeEmpty=!0)}),ap(a$("ol ul blockquote a table tbody"),t=>{n[t]&&(n[t].removeEmpty=!0)}),ap(a$("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),t=>{n[t]&&(n[t].paddEmpty=!0)}),ap(a$("span"),t=>{n[t].removeEmptyAttrs=!0})),N(t.custom_elements),R(t.valid_children),E(t.extended_valid_elements),R("+ol[ul|ol],+ul[ul|ol]"),ap({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(t,r)=>{n[r]&&(n[r].parentsRequired=a$(t))}),t.invalid_elements&&ap(av(t.invalid_elements),t=>{n[t]&&delete n[t]}),A("span")||E("span[!data-mce-type|*]");let O=z(c),T=z(m),B=z(f),D=z(v),L=z(_),P=z(C),M=z(x),I=z(Object.seal(h)),F=z(p),U=z($),j=z(y),H=z(g),V=z(k),q=z(Object.seal(i)),W=z(l);return{type:d,children:o,elements:n,getValidStyles:O,getValidClasses:B,getBlockElements:L,getInvalidStyles:T,getVoidElements:I,getTextBlockElements:P,getTextInlineElements:M,getBoolAttrs:D,getElementRule:A,getSelfClosingElements:F,getNonEmptyElements:U,getMoveCaretBeforeOnEnterElements:j,getWhitespaceElements:H,getTransparentElements:V,getSpecialElements:q,isValidChild(t,r){let n=o[t.toLowerCase()];return!(!n||!n[r.toLowerCase()])},isValid(t,r){let n=A(t);if(n){if(!r)return!0;{if(n.attributes[r])return!0;let o=n.attributePatterns;if(o){let a=o.length;for(;a--;)if(o[a].pattern.test(r))return!0}}}return!1},getCustomElements:W,addValidElements:E,setValidElements:S,addCustomElements:N,addValidChildren:R}},ak=(t={},r)=>{let n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,l={},i,s;r&&(i=r.getValidStyles(),s=r.getInvalidStyles());let d="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let u=0;u<d.length;u++)l[d[u]]="\uFEFF"+u,l["\uFEFF"+u]=d[u];let c={parse(r){var i,s,d;let u={},m=!1,f=t.url_converter,g=t.url_converter_scope||c,p=(t,r,n)=>{let o=u[t+"-top"+r];if(!o)return;let a=u[t+"-right"+r];if(!a)return;let l=u[t+"-bottom"+r];if(!l)return;let i=u[t+"-left"+r];if(!i)return;let s=[o,a,l,i],d=s.length-1;for(;d--&&s[d]===s[d+1];);d>-1&&n||(u[t+r]=-1===d?s[0]:s.join(" "),delete u[t+"-top"+r],delete u[t+"-right"+r],delete u[t+"-bottom"+r],delete u[t+"-left"+r])},h=t=>{let r=u[t];if(!r)return;let n=r.split(" "),o=n.length;for(;o--;)if(n[o]!==n[0])return!1;return u[t]=n[0],!0},v=t=>(m=!0,l[t]),b=(t,r)=>(m&&(t=t.replace(/\uFEFF[0-9]/g,t=>l[t])),r||(t=t.replace(/\\([\'\";:])/g,"$1")),t),$=t=>String.fromCharCode(parseInt(t.slice(1),16)),y=t=>t.replace(/\\[0-9a-f]+/gi,$),C=(r,n,o,a,l,i)=>{if(l=l||i)return"'"+(l=b(l)).replace(/\'/g,"\\'")+"'";if(n=b(n||o||a||""),!t.allow_script_urls){let s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return f&&(n=f.call(g,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(r){let _;for(r=(r=r.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,t=>t.replace(/[;:]/g,v));_=o.exec(r);){o.lastIndex=_.index+_[0].length;let x=_[1].replace(a,"").toLowerCase(),k=_[2].replace(a,"");if(x&&k){if(x=y(x),k=y(k),-1!==x.indexOf("\uFEFF")||-1!==x.indexOf('"')||!t.allow_script_urls&&("behavior"===x||/expression\s*\(|\/\*|\*\//.test(k)))continue;"font-weight"===x&&"700"===k?k="bold":"color"!==x&&"background-color"!==x||(k=k.toLowerCase()),k=k.replace(n,C),u[x]=m?b(k,!0):k}}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),s="border-style",d="border-color",h(i="border-width")&&h(s)&&h(d)&&(u.border=u[i]+" "+u[s]+" "+u[d],delete u[i],delete u[s],delete u[d]),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}return u},serialize(t,r){let n="",o=(r,o)=>{let a=o[r];if(a)for(let l=0,i=a.length;l<i;l++){let s=a[l],d=t[s];d&&(n+=(n.length>0?" ":"")+s+": "+d+";")}};return r&&i?(o("*",i),o(r,i)):eS(t,(t,o)=>{t&&((t,r)=>{if(!s||!r)return!0;let n=s["*"];return!(n&&n[t]||(n=s[r])&&n[t])})(o,r)&&(n+=(n.length>0?" ":"")+o+": "+t+";")}),n}};return c},aw={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},a8=(t,r)=>{let n=null!=r?r:{};for(let o in t)eP(aw,o)||(n[o]=t[o]);return D(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},aE=(t,r,n,o)=>{var a,l,i,s;let d=a8(r,o);return d.type=t,B(d.target)&&(d.target=null!==(a=d.srcElement)&&void 0!==a?a:n),l=r,(B(l.preventDefault)||(i=l)instanceof Event||L(i.initEvent))&&(d.preventDefault=()=>{d.defaultPrevented=!0,d.isDefaultPrevented=X,L(r.preventDefault)&&r.preventDefault()},d.stopPropagation=()=>{d.cancelBubble=!0,d.isPropagationStopped=X,L(r.stopPropagation)&&r.stopPropagation()},d.stopImmediatePropagation=()=>{d.isImmediatePropagationStopped=X,d.stopPropagation()},(s=d).isDefaultPrevented===X||s.isDefaultPrevented===Y||(d.isDefaultPrevented=!0===d.defaultPrevented?X:Y,d.isPropagationStopped=!0===d.cancelBubble?X:Y,d.isImmediatePropagationStopped=Y)),d},aS=/^(?:mouse|contextmenu)|click/,aN=(t,r,n,o)=>{t.addEventListener(r,n,o||!1)},aR=(t,r,n,o)=>{t.removeEventListener(r,n,o||!1)},aA=(t,r)=>{var n;let o=aE(t.type,t,document,r);if(n=t,D(n)&&aS.test(n.type)&&T(t.pageX)&&!T(t.clientX)){let a=o.target.ownerDocument||document,l=a.documentElement,i=a.body,s=o;s.pageX=t.clientX+(l&&l.scrollLeft||i&&i.scrollLeft||0)-(l&&l.clientLeft||i&&i.clientLeft||0),s.pageY=t.clientY+(l&&l.scrollTop||i&&i.scrollTop||0)-(l&&l.clientTop||i&&i.clientTop||0)}return o},aO=(t,r,n)=>{let o=t.document,a={type:"ready"};if(n.domLoaded)return void r(a);let l=()=>{aR(t,"DOMContentLoaded",l),aR(t,"load",l),n.domLoaded||(n.domLoaded=!0,r(a)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?l():aN(t,"DOMContentLoaded",l),n.domLoaded||aN(t,"load",l)};class aT{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,r,n,o){let a=this,l,i=window,s=t=>{a.executeHandlers(aA(t||i.event),d)};if(!t||nO(t)||nD(t))return n;let d;t[a.expando]?d=t[a.expando]:(d=a.count++,t[a.expando]=d,a.events[d]={}),o=o||t;let u=r.split(" "),c=u.length;for(;c--;){let m=u[c],f=s,g=!1,p=!1;"DOMContentLoaded"===m&&(m="ready"),a.domLoaded&&"ready"===m&&"complete"===t.readyState?n.call(o,aA({type:m})):(a.hasFocusIn||"focusin"!==m&&"focusout"!==m||(g=!0,p="focusin"===m?"focus":"blur",f=t=>{let r=aA(t||i.event);r.type="focus"===r.type?"focusin":"focusout",a.executeHandlers(r,d)}),(l=a.events[d][m])?"ready"===m&&a.domLoaded?n(aA({type:m})):l.push({func:n,scope:o}):(a.events[d][m]=l=[{func:n,scope:o}],l.fakeName=p,l.capture=g,l.nativeHandler=f,"ready"===m?aO(t,f,a):aN(t,p||m,f,g)))}return t=l=null,n}unbind(t,r,n){if(!t||nO(t)||nD(t))return this;let o=t[this.expando];if(o){let a=this.events[o];if(r){let l=r.split(" "),i=l.length;for(;i--;){let s=l[i],d=a[s];if(d){if(n){let u=d.length;for(;u--;)if(d[u].func===n){let c=d.nativeHandler,m=d.fakeName,f=d.capture,g=d.slice(0,u).concat(d.slice(u+1));g.nativeHandler=c,g.fakeName=m,g.capture=f,a[s]=g}}n&&0!==d.length||(delete a[s],aR(t,d.fakeName||s,d.nativeHandler,d.capture))}}}else eS(a,(r,n)=>{aR(t,r.fakeName||n,r.nativeHandler,r.capture)}),a={};for(let p in a)if(eP(a,p))return this;delete this.events[o];try{delete t[this.expando]}catch(h){t[this.expando]=null}}return this}fire(t,r,n){return this.dispatch(t,r,n)}dispatch(t,r,n){if(!t||nO(t)||nD(t))return this;let o=aA({type:r,target:t},n);do{let a=t[this.expando];a&&this.executeHandlers(o,a),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||nO(t)||nD(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);let r=t.getElementsByTagName("*"),n=r.length;for(;n--;)(t=r[n])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,r){let n=this.events[r],o=n&&n[t.type];if(o)for(let a=0,l=o.length;a<l;a++){let i=o[a];if(i&&!1===i.func.call(i.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}aT.Event=new aT;let aB=tP.each,aD=tP.grep,aL="data-mce-style",aP=tP.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),aM=(t,r,n)=>{B(n)||""===n?tX(t,r):tq(t,r,n)},aI=t=>t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),aF=(t,r)=>{let n=0;if(t)for(let o=t.nodeType,a=t.previousSibling;a;a=a.previousSibling){let l=a.nodeType;r&&nO(a)&&(l===o||!a.data.length)||(n++,o=l)}return n},a0=(t,r)=>{let n=tK(r,"style"),o=t.serialize(t.parse(n),t6(r));aM(r,aL,o)},aU=(t,r,n)=>{var o,a;let l=aI(r);B(n)||""===n?rG(t,l):r2(t,l,(o=n,a=l,P(o)?eP(aP,a)?o+"":o+"px":o))},a1=(t,r={})=>{let n={},o=window,a={},l=0,i=oK.forElement(rc(t),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),s=[],d=r.schema?r.schema:ax({}),u=ak({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),c=r.ownEvents?new aT:aT.Event,m=d.getBlockElements(),f=r=>r&&t&&E(r)?t.getElementById(r):r,g=t=>{let r=f(t);return D(r)?rc(r):null},p=(t,r,n="")=>{let o,a=g(t);if(D(a)&&t7(a)){let l=K[r];o=l&&l.get?l.get(a.dom,r):tK(a,r)}return D(o)?o:n},h=t=>{let r=f(t);return B(r)?[]:r.attributes},v=(t,n,o)=>{w(t,t=>{if(nx(t)){let a=rc(t),l=""===o?null:o,i=tK(a,n),s=K[n];s&&s.set?s.set(a.dom,l,n):aM(a,n,l),i!==l&&r.onSetAttrib&&r.onSetAttrib({attrElm:a.dom,attrName:n,attrValue:l})}})},b=()=>r.root_element||t.body,$=(r,n)=>((t,r,n)=>{let o=0,a=0,l=t.ownerDocument;if(n=n||t,r){var i;if(n===t&&r.getBoundingClientRect&&"static"===rV(rc(t),"position")){let s=r.getBoundingClientRect();return{x:o=s.left+(l.documentElement.scrollLeft||t.scrollLeft)-l.documentElement.clientLeft,y:a=s.top+(l.documentElement.scrollTop||t.scrollTop)-l.documentElement.clientTop}}let d=r;for(;d&&d!==n&&d.nodeType&&!oq(d,n);){let u=d;o+=u.offsetLeft||0,a+=u.offsetTop||0,d=u.offsetParent}for(d=r.parentNode;d&&d!==n&&d.nodeType&&!oq(d,n);)o-=d.scrollLeft||0,a-=d.scrollTop||0,d=d.parentNode;a+=(i=rc(r),o5.isFirefox()&&"table"===t6(i)?oV(rS(i)).filter(t=>"caption"===t6(t)).bind(t=>oV(rE(t)).map(r=>{let n=r.dom.offsetTop,o=t.dom.offsetTop,a=t.dom.offsetHeight;return n<=o?-a:0})).getOr(0):0)}return{x:o,y:a}})(t.body,f(r),n),y=(t,r,n)=>{let o=f(t);if(!B(o)&&nx(o))return n?rV(rc(o),aI(r)):("float"===(r=r.replace(/-(\D)/g,(t,r)=>r.toUpperCase()))&&(r="cssFloat"),o.style?o.style[r]:void 0)},C=t=>{let r=f(t);if(!r)return{w:0,h:0};let n=y(r,"width"),o=y(r,"height");return n&&-1!==n.indexOf("px")||(n="0"),o&&-1!==o.indexOf("px")||(o="0"),{w:parseInt(n,10)||r.offsetWidth||r.clientWidth,h:parseInt(o,10)||r.offsetHeight||r.clientHeight}},_=(t,r)=>{if(!t)return!1;let n=R(t)?t:[t];return en(n,t=>rg(rc(t),r))},x=(t,r,n,o)=>{let a=[],l=f(t);o=void 0===o;let i=n||("BODY"!==b().nodeName?b().parentNode:null);if(E(r)){if("*"===r)r=nx;else{let s=r;r=t=>_(t,s)}}for(;l&&!(l===i||B(l.nodeType)||nL(l)||nP(l));){if(!r||r(l)){if(!o)return[l];a.push(l)}l=l.parentNode}return o?a:null},k=(t,r,n)=>{let o=r;if(t){E(r)&&(o=t=>_(t,r));for(let a=t[n];a;a=a[n])if(L(o)&&o(a))return a}return null},w=function(t,r,n){let o=null!=n?n:this;if(R(t)){let a=[];return aB(t,(t,n)=>{let l=f(t);l&&a.push(r.call(o,l,n))}),a}{let l=f(t);return!!l&&r.call(o,l)}},S=(t,r)=>{w(t,t=>{eS(r,(r,n)=>{v(t,n,r)})})},N=(t,r)=>{w(t,t=>{let n=rc(t);nl(n,r)})},A=(r,n,o,a,l)=>w(r,r=>{let i=E(n)?t.createElement(n):n;return D(o)&&S(i,o),a&&(!E(a)&&a.nodeType?i.appendChild(a):E(a)&&N(i,a)),l?i:r.appendChild(i)}),O=(r,n,o)=>A(t.createElement(r),r,n,o,!0),T=au.encodeAllRaw,P=(t,r)=>w(t,t=>{let n=rc(t);return r&&ea(rS(n),t=>{t3(t)&&0===t.dom.length?nr(t):rY(n,t)}),nr(n),n.dom}),M=(t,r,n)=>{w(t,t=>{if(nx(t)){let o=rc(t),a=r.split(" ");ea(a,t=>{var r,a,l,i;D(n)?(n?rn:ra)(o,t):(r=o,a=t,tZ(r)?r.dom.classList.toggle(a):(l=r,i=a,er(re(l),i)?rr(l,i):rt(l,i)),ro(r))})}})},F=(t,r,n)=>w(r,o=>{var a;let l=R(r)?t.cloneNode(!0):t;return n&&aB(aD(o.childNodes),t=>{l.appendChild(t)}),null===(a=o.parentNode)||void 0===a||a.replaceChild(l,o),o}),U=t=>{if(nx(t)){let r="a"===t.nodeName.toLowerCase()&&!p(t,"href")&&p(t,"id");if(p(t,"name")||p(t,"data-mce-bookmark")||r)return!0}return!1},j=()=>t.createRange(),H=(n,a,l,i)=>{if(R(n)){let d=n.length,u=[];for(;d--;)u[d]=H(n[d],a,l,i);return u}return r.collect&&(n===t||n===o)&&s.push([n,a,l,i]),c.bind(n,a,l,i||W)},V=(r,n,a)=>{if(R(r)){let l=r.length,i=[];for(;l--;)i[l]=V(r[l],n,a);return i}if(s.length>0&&(r===t||r===o)){let d=s.length;for(;d--;){let[u,m,f]=s[d];r!==u||n&&n!==m||a&&a!==f||c.unbind(u,m,f)}}return c.unbind(r,n,a)},q=t=>{if(t&&nx(t)){let r=t.getAttribute("data-mce-contenteditable");return r&&"inherit"!==r?r:"inherit"!==t.contentEditable?t.contentEditable:null}return null},W={doc:t,settings:r,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:s,styles:u,schema:d,events:c,isBlock:t=>E(t)?eP(m,t):nx(t)&&(eP(m,t.nodeName)||o3(d,t)),root:null,clone:(t,r)=>t.cloneNode(r),getRoot:b,getViewPort(t){let r=nh(t);return{x:r.x,y:r.y,w:r.width,h:r.height}},getRect(t){let r=f(t),n=$(r),o=C(r);return{x:n.x,y:n.y,w:o.w,h:o.h}},getSize:C,getParent(t,r,n){let o=x(t,r,n,!1);return o&&o.length>0?o[0]:null},getParents:x,get:f,getNext:(t,r)=>k(t,r,"nextSibling"),getPrev:(t,r)=>k(t,r,"previousSibling"),select(n,o){var a,l;let i=null!==(l=null!==(a=f(o))&&void 0!==a?a:r.root_element)&&void 0!==l?l:t;return L(i.querySelectorAll)?ek(i.querySelectorAll(n)):[]},is:_,add:A,create:O,createHTML(t,r,n=""){let o="<"+t;for(let a in r)eM(r,a)&&(o+=" "+a+'="'+T(r[a])+'"');return eZ(n)&&eP(d.getVoidElements(),t)?o+" />":o+">"+n+"</"+t+">"},createFragment(r){let n=t.createElement("div"),o=t.createDocumentFragment(),a;for(o.appendChild(n),r&&(n.innerHTML=r);a=n.firstChild;)o.appendChild(a);return o.removeChild(n),o},remove:P,setStyle(t,n,o){w(t,t=>{let a=rc(t);aU(a,n,o),r.update_styles&&a0(u,a)})},getStyle:y,setStyles(t,n){w(t,t=>{let o=rc(t);eS(n,(t,r)=>{aU(o,r,t)}),r.update_styles&&a0(u,o)})},removeAllAttribs:t=>w(t,t=>{let r=t.attributes;for(let n=r.length-1;n>=0;n--)t.removeAttributeNode(r.item(n))}),setAttrib:v,setAttribs:S,getAttrib:p,getPos:$,parseStyle:t=>u.parse(t),serializeStyle:(t,r)=>u.serialize(t,r),addStyle(r){if(W!==a1.DOM&&t===document){if(n[r])return;n[r]=!0}let o=t.getElementById("mceDefaultStyles");if(!o){(o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css";let a=t.head;a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=r:o.appendChild(t.createTextNode(r))},loadCSS(t){t||(t=""),ea(t.split(","),t=>{a[t]=!0,i.load(t).catch(I)})},addClass(t,r){M(t,r,!0)},removeClass(t,r){M(t,r,!1)},hasClass(t,r){let n=g(t),o=r.split(" ");return D(n)&&eh(o,t=>rl(n,t))},toggleClass:M,show(t){w(t,t=>rG(rc(t),"display"))},hide(t){w(t,t=>r2(rc(t),"display","none"))},isHidden(t){let r=g(t);return D(r)&&tM(rW(r,"display"),"none")},uniqueId:t=>(t||"mce_")+l++,setHTML:N,getOuterHTML(t){let r=g(t);return D(r)?nx(r.dom)?r.dom.outerHTML:(t=>{let r=rd("div"),n=rc(t.dom.cloneNode(!0));return rJ(r,n),na(r)})(r):""},setOuterHTML(t,r){w(t,t=>{nx(t)&&(t.outerHTML=r)})},decode:au.decode,encode:T,insertAfter(t,r){let n=f(r);return w(t,t=>{let r=null==n?void 0:n.parentNode,o=null==n?void 0:n.nextSibling;return r&&(o?r.insertBefore(t,o):r.appendChild(t)),t})},replace:F,rename(t,r){if(t.nodeName!==r.toUpperCase()){let n=O(r);return aB(h(t),r=>{v(n,r.nodeName,p(t,r.nodeName))}),F(n,t,!0),n}return t},findCommonAncestor(t,r){let n=t;for(;n;){let o=r;for(;o&&n!==o;)o=o.parentNode;if(n===o)break;n=n.parentNode}return!n&&t.ownerDocument?t.ownerDocument.documentElement:n},run:w,getAttribs:h,isEmpty(t,r,n){let o=0;if(U(t))return!1;let a=t.firstChild;if(a){let l=new ny(a,t),i=d?d.getWhitespaceElements():{},s=r||(d?d.getNonEmptyElements():null),u=a;do{if(nx(u)){let c=u.getAttribute("data-mce-bogus");if(c){u=l.next("all"===c);continue}let m=u.nodeName.toLowerCase();if(s&&s[m]){if("br"===m){o++,u=l.next();continue}return!1}if(U(u))return!1}if(nD(u)||nO(u)&&!oR(u.data)&&(!(null==n?void 0:n.includeZwsp)||!oA(u.data))||nO(u)&&u.parentNode&&i[u.parentNode.nodeName]&&oR(u.data))return!1;u=l.next()}while(u)}return o<=1},createRng:j,nodeIndex:aF,split(t,r,n){let o,a,l=j();if(t&&r&&t.parentNode&&r.parentNode){let i=t.parentNode;return l.setStart(i,aF(t)),l.setEnd(r.parentNode,aF(r)),o=l.extractContents(),(l=j()).setStart(r.parentNode,aF(r)+1),l.setEnd(i,aF(t)+1),a=l.extractContents(),i.insertBefore(oX(W,o),t),n?i.insertBefore(n,t):i.insertBefore(r,t),i.insertBefore(oX(W,a),t),P(t),n||r}},bind:H,unbind:V,fire:(t,r,n)=>c.dispatch(t,r,n),dispatch:(t,r,n)=>c.dispatch(t,r,n),getContentEditable:q,getContentEditableParent(t){let r=b(),n=null;for(let o=t;o&&o!==r&&null===(n=q(o));o=o.parentNode);return n},isEditable(t){if(D(t)){let r=nx(t)?t:t.parentElement;return D(r)&&rH(rc(r))}return!1},destroy(){if(s.length>0){let t=s.length;for(;t--;){let[r,n,o]=s[t];c.unbind(r,n,o)}}eS(a,(t,r)=>{i.unload(r),delete a[r]})},isChildOf:(t,r)=>t===r||r.contains(t),dumpRng:t=>"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},K=((t,r,n)=>{let o=r.keep_values,a={style:{set(r,n){let a=rc(r);o&&aM(a,aL,n),tX(a,"style"),E(n)&&r5(a,t.parse(n))},get(r){let n=rc(r),o=tK(n,aL)||tK(n,"style");return t.serialize(t.parse(o),t6(n))}}};return o&&(a.href=a.src={set(t,o,a){let l=rc(t);L(r.url_converter)&&D(o)&&(o=r.url_converter.call(r.url_converter_scope||n(),String(o),a,t)),aM(l,"data-mce-"+a,o),aM(l,a,o)},get(t,r){let n=rc(t);return tK(n,"data-mce-"+r)||tK(n,r)}}),a})(u,r,z(W));return W};a1.DOM=a1(document),a1.nodeIndex=aF;let az=a1.DOM;class a6{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((r,n)=>{let o=az,a,l=()=>{o.remove(i),a&&(a.onerror=a.onload=a=null)},i=o.uniqueId();(a=document.createElement("script")).id=i,a.type="text/javascript",a.src=tP._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=()=>{l(),r()},a.onerror=()=>{l(),n("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){let r=this;return r.queue.push(t),void 0===r.states[t]&&(r.states[t]=0),new Promise((n,o)=>{r.scriptLoadedCallbacks[t]||(r.scriptLoadedCallbacks[t]=[]),r.scriptLoadedCallbacks[t].push({resolve:n,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){let t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){let r=this,n=(t,n)=>{eL(r.scriptLoadedCallbacks,n).each(r=>{ea(r,r=>r[t](n))}),delete r.scriptLoadedCallbacks[n]},o=t=>{let r=es(t,t=>"rejected"===t.status);return r.length>0?Promise.reject(ep(r,({reason:t})=>R(t)?t:[t])):Promise.resolve()},a=t=>Promise.allSettled(eo(t,t=>2===r.states[t]?(n("resolve",t),Promise.resolve()):3===r.states[t]?(n("reject",t),Promise.reject(t)):(r.states[t]=1,r.loadScript(t).then(()=>{r.states[t]=2,n("resolve",t);let l=r.queue;return l.length>0?(r.queue=[],a(l).then(o)):Promise.resolve()},()=>(r.states[t]=3,n("reject",t),Promise.reject(t)))))),l=t=>(r.loading=!0,a(t).then(t=>{r.loading=!1;let n=r.queueLoadedCallbacks.shift();return Q.from(n).each(G),o(t)})),i=eI(t);return r.loading?new Promise((t,n)=>{r.queueLoadedCallbacks.push(()=>{l(i).then(t,n)})}):l(i)}}a6.ScriptLoader=new a6;let aj=t=>{let r=t;return{get:()=>r,set(t){r=t}}},a4={},aH=aj("en"),a7=()=>eL(a4,aH.get()),a3={getData:()=>eN(a4,t=>({...t})),setCode(t){t&&aH.set(t)},getCode:()=>aH.get(),add(t,r){let n=a4[t];n||(a4[t]=n={}),eS(r,(t,r)=>{n[r.toLowerCase()]=t})},translate(t){var r,n;let o=a7().getOr({}),a=t=>L(t)?Object.prototype.toString.call(t):l(t)?"":""+t,l=t=>""===t||null==t,i=t=>{let r=a(t);return eL(o,r.toLowerCase()).map(a).getOr(r)},s=t=>t.replace(/{context:\w+}$/,"");if(l(t))return"";if(S(r=t)&&eP(r,"raw"))return a(t.raw);if(R(n=t)&&n.length>1){let d=t.slice(1);return s(i(t[0]).replace(/\{([0-9]+)\}/g,(t,r)=>eP(d,r)?a(d[r]):t))}return s(i(t))},isRtl:()=>a7().bind(t=>eL(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>eP(a4,t)},a9=()=>{let t=[],r={},n={},o=[],a=(t,r)=>{let n=es(o,n=>n.name===t&&n.state===r);ea(n,t=>t.resolve())},l=t=>eP(r,t),i=(t,n)=>{let o=a3.getCode();!o||n&&-1===(","+(n||"")+",").indexOf(","+o+",")||a6.ScriptLoader.add(r[t]+"/langs/"+o+".js")},s=(t,r="added")=>{var a;return"added"===r&&eP(n,t)||"loaded"===r&&l(t)?Promise.resolve():new Promise(n=>{o.push({name:t,state:r,resolve:n})})};return{items:t,urls:r,lookup:n,get(t){if(n[t])return n[t].instance},requireLangPack(t,r){!1!==a9.languageLoad&&(l(t)?i(t,r):s(t,"loaded").then(()=>i(t,r)))},add:(r,o)=>(t.push(o),n[r]={instance:o},a(r,"added"),o),remove(t){delete r[t],delete n[t]},createUrl:(t,r)=>E(r)?E(t)?{prefix:"",resource:r,suffix:""}:{prefix:t.prefix,resource:r,suffix:t.suffix}:r,load(t,o){if(r[t])return Promise.resolve();let l=E(o)?o:o.prefix+o.resource+o.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=a9.baseURL+"/"+l),r[t]=l.substring(0,l.lastIndexOf("/"));let i=()=>(a(t,"loaded"),Promise.resolve());return n[t]?i():a6.ScriptLoader.add(l).then(i)},waitFor:s}};a9.languageLoad=!0,a9.baseURL="",a9.PluginManager=a9(),a9.ThemeManager=a9(),a9.ModelManager=a9();let a2=t=>{let r=aj(Q.none()),n=()=>r.get().each(t=>clearInterval(t));return{clear(){n(),r.set(Q.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set(o){n(),r.set(Q.some(setInterval(o,t)))}}},a5=()=>{let t=(t=>{let r=aj(Q.none()),n=()=>r.get().each(t);return{clear(){n(),r.set(Q.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set(t){n(),r.set(Q.some(t))}}})(I);return{...t,on:r=>t.get().each(r)}},aV=(t,r)=>{let n=null;return{cancel(){A(n)||(clearTimeout(n),n=null)},throttle(...o){A(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},r))}}},aq=(t,r)=>{let n=null,o=()=>{A(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle(...a){o(),n=setTimeout(()=>{n=null,t.apply(null,a)},r)}}},aW=z("mce-annotation"),aK=z("data-mce-annotation"),aG=z("data-mce-annotation-uid"),aY=z("data-mce-annotation-active"),aX=z("data-mce-annotation-classes"),aQ=z("data-mce-annotation-attrs"),aJ=t=>r=>rh(r,t),aZ=(t,r)=>{let n=t.selection.getRng(),o=rc(n.startContainer),a=rc(t.getBody()),l=r.fold(()=>"."+aW(),t=>`[${aK()}="${t}"]`),i=rN(o,n.startOffset).getOr(o);return r4(i,l,aJ(a)).bind(r=>tG(r,`${aG()}`).bind(n=>tG(r,`${aK()}`).map(r=>{let o=lt(t,n);return{uid:n,name:r,elements:o}})))},le=(t,r)=>tY(t,"data-mce-bogus")||n$(t,'[data-mce-bogus="all"]',aJ(r)),lt=(t,r)=>{let n=rc(t.getBody()),o=nb(n,`[${aG()}="${r}"]`);return es(o,t=>!le(t,n))},lr=(t,r)=>{let n=rc(t.getBody()),o=nb(n,`[${aK()}="${r}"]`),a={};return ea(o,t=>{if(!le(t,n)){let r=tK(t,aG()),o=eL(a,r).getOr([]);a[r]=o.concat([t])}}),a},ln=0,lo=t=>{let r=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ln+String(r)},la=(t,r)=>rc(t.dom.cloneNode(r)),ll=t=>la(t,!1),li=t=>la(t,!0),ls=(t,r)=>{let n=((t,r)=>{let n=rd(r),o=tQ(t);return tW(n,o),n})(t,r);rX(t,n);let o=rS(t);return ne(n,o),nr(t),n},ld=(t,r,n=Y)=>{let o=new ny(t,r),a=t=>{let r;do r=o[t]();while(r&&!nO(r)&&!n(r));return Q.from(r).filter(nO)};return{current:()=>Q.from(o.current()).filter(nO),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},lu=(t,r)=>{let n=r||(r=>t.isBlock(r)||nM(r)||n0(r)),o=(t,r,n,a)=>{if(nO(t)){let l=a(t,r,t.data);if(-1!==l)return Q.some({container:t,offset:l})}return n().bind(t=>o(t.container,t.offset,n,a))};return{backwards(r,a,l,i){let s=ld(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.prev().map(t=>({container:t,offset:t.length})),l).getOrNull()},forwards(r,a,l,i){let s=ld(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.next().map(t=>({container:t,offset:0})),l).getOrNull()}}},lc=Math.round,lm=t=>t?{left:lc(t.left),top:lc(t.top),bottom:lc(t.bottom),right:lc(t.right),width:lc(t.width),height:lc(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},lf=(t,r)=>(t=lm(t),r||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),lg=(t,r,n)=>t>=0&&t<=Math.min(r.height,n.height)/2,lp=(t,r)=>{let n=Math.min(r.height/2,t.height/2);return t.bottom-n<r.top||!(t.top>r.bottom)&&lg(r.top-t.bottom,t,r)},lh=(t,r)=>t.top>r.bottom||!(t.bottom<r.top)&&lg(r.bottom-t.top,t,r),lv=(t,r,n)=>{let o=Math.max(Math.min(r,t.left+t.width),t.left),a=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((r-o)*(r-o)+(n-a)*(n-a))},lb=t=>{let r=t.startContainer,n=t.startOffset;return r===t.endContainer&&r.hasChildNodes()&&t.endOffset===n+1?r.childNodes[n]:null},l$=(t,r)=>{if(nx(t)&&t.hasChildNodes()){var n,o,a;let l=t.childNodes,i=Math.min(Math.max(n=r,0),l.length-1);return l[i]}return t},ly=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),lC=t=>E(t)&&t.charCodeAt(0)>=768&&ly.test(t),l_=nx,lx=n8("display","block table"),lk=n8("float","left right"),lw=((...t)=>r=>{for(let n=0;n<t.length;n++)if(!t[n](r))return!1;return!0})(l_,o8,q(lk)),l8=q(n8("white-space","pre pre-line pre-wrap")),lE=nO,lS=nM,lN=a1.nodeIndex,lR=(t,r)=>r<0&&nx(t)&&t.hasChildNodes()?void 0:l$(t,r),lA=t=>t?t.createRange():a1.DOM.createRng(),lO=t=>E(t)&&/[\r\n\t ]/.test(t),lT=t=>!!t.setStart&&!!t.setEnd,lB=t=>{let r=t.startContainer,n=t.startOffset;if(lO(t.toString())&&l8(r.parentNode)&&nO(r)){let o=r.data;if(lO(o[n-1])||lO(o[n+1]))return!0}return!1},lD=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,lL=t=>{var r;let n,o=t.getClientRects();return n=o.length>0?lm(o[0]):lm(t.getBoundingClientRect()),!lT(t)&&lS(t)&&lD(n)?(t=>{let r=t.ownerDocument,n=lA(r),o=r.createTextNode("\xa0"),a=t.parentNode;a.insertBefore(o,t),n.setStart(o,0),n.setEnd(o,1);let l=lm(n.getBoundingClientRect());return a.removeChild(o),l})(t):lD(n)&&lT(t)&&null!==(r=(t=>{let r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset;if(r===n&&nO(n)&&0===o&&1===a){let l=t.cloneRange();return l.setEndAfter(n),lL(l)}return null})(t))&&void 0!==r?r:n},lP=(t,r)=>{let n=lf(t,r);return n.width=1,n.right=n.left+1,n},lM=(t,r,n)=>{let o=()=>(n||(n=(t=>{let r=[],n=t=>{var n,o;0!==t.height&&(r.length>0&&(n=t,o=r[r.length-1],n.left===o.left&&n.top===o.top&&n.bottom===o.bottom&&n.right===o.right)||r.push(t))},o=(t,r)=>{let o=lA(t.ownerDocument);if(r<t.data.length){if(lC(t.data[r]))return;if(lC(t.data[r-1])&&(o.setStart(t,r),o.setEnd(t,r+1),!lB(o)))return void n(lP(lL(o),!1))}r>0&&(o.setStart(t,r-1),o.setEnd(t,r),lB(o)||n(lP(lL(o),!1))),r<t.data.length&&(o.setStart(t,r),o.setEnd(t,r+1),lB(o)||n(lP(lL(o),!0)))},a=t.container(),l=t.offset();if(lE(a))return o(a,l),r;if(l_(a)){if(t.isAtEnd()){let i=lR(a,l);lE(i)&&o(i,i.data.length),lw(i)&&!lS(i)&&n(lP(lL(i),!1))}else{let s=lR(a,l);if(lE(s)&&o(s,0),lw(s)&&t.isAtEnd())return n(lP(lL(s),!1)),r;let d=lR(t.container(),t.offset()-1);lw(d)&&!lS(d)&&(lx(d)||lx(s)||!lw(s))&&n(lP(lL(d),!1)),lw(s)&&n(lP(lL(s),!0))}}return r})(lM(t,r))),n);return{container:z(t),offset:z(r),toRange(){let n=lA(t.ownerDocument);return n.setStart(t,r),n.setEnd(t,r),n},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(lE(t),0===r),isAtEnd:()=>lE(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:n=>n&&t===n.container()&&r===n.offset(),getNode:n=>lR(t,n?r-1:r)}};lM.fromRangeStart=t=>lM(t.startContainer,t.startOffset),lM.fromRangeEnd=t=>lM(t.endContainer,t.endOffset),lM.after=t=>lM(t.parentNode,lN(t)+1),lM.before=t=>lM(t.parentNode,lN(t)),lM.isAbove=(t,r)=>tI(e_(r.getClientRects()),ex(t.getClientRects()),lp).getOr(!1),lM.isBelow=(t,r)=>tI(ex(r.getClientRects()),e_(t.getClientRects()),lh).getOr(!1),lM.isAtStart=t=>!!t&&t.isAtStart(),lM.isAtEnd=t=>!!t&&t.isAtEnd(),lM.isTextPosition=t=>!!t&&nO(t.container()),lM.isElementPosition=t=>!lM.isTextPosition(t);let lI=(t,r)=>{nO(r)&&0===r.data.length&&t.remove(r)},lF=(t,r,n)=>{var o,a,l;nP(n)?((t,r,n)=>{let o=Q.from(n.firstChild),a=Q.from(n.lastChild);r.insertNode(n),o.each(r=>lI(t,r.previousSibling)),a.each(r=>lI(t,r.nextSibling))})(t,r,n):(o=t,a=r,l=n,a.insertNode(l),lI(o,l.previousSibling),lI(o,l.nextSibling))},l0=nO,lU=nS,l1=a1.nodeIndex,lz=t=>{let r=t.parentNode;return lU(r)?lz(r):r},l6=t=>t?e6(t.childNodes,(t,r)=>(lU(r)&&"BR"!==r.nodeName?t=t.concat(l6(r)):t.push(r),t),[]):[],lj=t=>r=>t===r,l4=t=>(l0(t)?"text()":t.nodeName.toLowerCase())+"["+(t=>{let r,n;r=l6(lz(t)),n=ej(r,lj(t),t),r=r.slice(0,n+1);let o=e6(r,(t,n,o)=>(l0(n)&&l0(r[o-1])&&t++,t),0);return r=ez(r,nw([t.nodeName])),(n=ej(r,lj(t),t))-o})(t)+"]",lH=(t,r)=>{let n,o=[],a=r.container(),l=r.offset();if(l0(a))n=((t,r)=>{let n=t;for(;(n=n.previousSibling)&&l0(n);)r+=n.data.length;return r})(a,l);else{let i=a.childNodes;l>=i.length?(n="after",l=i.length-1):n="before",a=i[l]}o.push(l4(a));let s=((t,r,n)=>{let o=[];for(let a=r.parentNode;a&&a!==t;a=a.parentNode)o.push(a);return o})(t,a);return s=ez(s,q(nS)),(o=o.concat(e1(s,t=>l4(t)))).reverse().join("/")+","+n},l7=(t,r)=>{if(!r)return null;let n=r.split(","),o=n[0].split("/"),a=n.length>1?n[1]:"before",l=e6(o,(t,r)=>{var n,o,a;let l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(r),i;return l?("text()"===l[1]&&(l[1]="#text"),n=t,o=l[1],a=parseInt(l[2],10),i=l6(n),i=ez(i,(t,r)=>!l0(t)||!l0(i[r-1])),(i=ez(i,nw([o])))[a]):null},t);if(!l)return null;if(!l0(l)&&l.parentNode){let i;return i="after"===a?l1(l)+1:l1(l),lM(l.parentNode,i)}return((t,r)=>{let n=t,o=0;for(;l0(n);){let a=n.data.length;if(r>=o&&r<=o+a){t=n,r-=o;break}if(!l0(n.nextSibling)){t=n,r=a;break}o+=a,n=n.nextSibling}return l0(t)&&r>t.data.length&&(r=t.data.length),lM(t,r)})(l,parseInt(a,10))},l3=n0,l9=(t,r,n,o,a)=>{let l=a?o.startContainer:o.endContainer,i=a?o.startOffset:o.endOffset,s=[],d=t.getRoot();if(nO(l))s.push(n?((t,r,n)=>{let o=t(r.data.slice(0,n)).length;for(let a=r.previousSibling;a&&nO(a);a=a.previousSibling)o+=t(a.data).length;return o})(r,l,i):i);else{let u=0,c=l.childNodes;i>=c.length&&c.length&&(u=1,i=Math.max(0,c.length-1)),s.push(t.nodeIndex(c[i],n)+u)}for(let m=l;m&&m!==d;m=m.parentNode)s.push(t.nodeIndex(m,n));return s},l2=(t,r,n)=>{let o=0;return tP.each(t.select(r),t=>"all"===t.getAttribute("data-mce-bogus")?void 0:t!==n&&void o++),o},l5=(t,r)=>{let n=r?t.startContainer:t.endContainer,o=r?t.startOffset:t.endOffset;if(nx(n)&&"TR"===n.nodeName){let a=n.childNodes;(n=a[Math.min(r?o:o-1,a.length-1)])&&(o=r?0:n.childNodes.length,r?t.setStart(n,o):t.setEnd(n,o))}},lV=t=>(l5(t,!0),l5(t,!1),t),lq=(t,r)=>{if(nx(t)&&(t=l$(t,r),l3(t)))return t;if(ou(t)){nO(t)&&os(t)&&(t=t.parentNode);let n=t.previousSibling;if(l3(n)||l3(n=t.nextSibling))return n}},lW=(t,r,n)=>{var o;let a=n.getNode(),l=n.getRng();if("IMG"===a.nodeName||l3(a)){let i=a.nodeName;return{name:i,index:l2(n.dom,i,a)}}let s=(o=l,lq(o.startContainer,o.startOffset)||lq(o.endContainer,o.endOffset));if(s){let d=s.tagName;return{name:d,index:l2(n.dom,d,s)}}return((t,r,n,o)=>{let a=r.dom,l=l9(a,t,n,o,!0),i=r.isForward(),s=ov(o)?{isFakeCaret:!0}:{};return r.isCollapsed()?{start:l,forward:i,...s}:{start:l,end:l9(a,t,n,o,!1),forward:i,...s}})(t,n,r,l)},lK=(t,r,n)=>{let o={"data-mce-type":"bookmark",id:r,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},lG=(t,r)=>{let n=t.dom,o=t.getRng(),a=n.uniqueId(),l=t.isCollapsed(),i=t.getNode(),s=i.nodeName,d=t.isForward();if("IMG"===s)return{name:s,index:l2(n,s,i)};let u=lV(o.cloneRange());if(!l){u.collapse(!1);let c=lK(n,a+"_end",r);lF(n,u,c)}(o=lV(o)).collapse(!0);let m=lK(n,a+"_start",r);return lF(n,o,m),t.moveToBookmark({id:a,keep:!0,forward:d}),{id:a,forward:d}},lY=V(lW,j,!0),lX=t=>{let r=r=>r(t),n=z(t),o={tag:!0,inner:t,fold:(r,n)=>n(t),isValue:X,isError:Y,map:r=>lJ.value(r(t)),mapError:()=>o,bind:r,exists:r,forall:r,getOr:n,or:()=>o,getOrThunk:n,orThunk:()=>o,getOrDie:n,each(r){r(t)},toOptional:()=>Q.some(t)};return o},lQ=t=>{let r={tag:!1,inner:t,fold:(r,n)=>r(t),isValue:Y,isError:X,map:()=>r,mapError:r=>lJ.error(r(t)),bind:()=>r,exists:Y,forall:X,getOr:j,or:j,getOrThunk:K,orThunk:K,getOrDie:W(String(t)),each:I,toOptional:Q.none};return r},lJ={value:lX,error:lQ,fromOption:(t,r)=>t.fold(()=>lQ(r),lX)},lZ=t=>{if(!R(t))throw Error("cases must be an array");if(0===t.length)throw Error("there must be at least one case");let r=[],n={};return ea(t,(o,a)=>{let l=e8(o);if(1!==l.length)throw Error("one and only one name per case");let i=l[0],s=o[i];if(void 0!==n[i])throw Error("duplicate key detected:"+i);if("cata"===i)throw Error("cannot have a case named cata (sorry)");if(!R(s))throw Error("case arguments must be an array");r.push(i),n[i]=(...n)=>{let o=n.length;if(o!==s.length)throw Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+o);return{fold(...r){if(r.length!==t.length)throw Error("Wrong number of arguments to fold. Expected "+t.length+", got "+r.length);return r[a].apply(null,n)},match(t){let o=e8(t);if(r.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+r.join(",")+"\nActual: "+o.join(","));if(!eh(r,t=>er(o,t)))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+r.join(", "));return t[i].apply(null,n)},log(t){console.log(t,{constructors:r,constructor:i,params:n})}}}}),n};lZ([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let ie=t=>"inline-command"===t.type||"inline-format"===t.type,it=t=>"block-command"===t.type||"block-format"===t.type,ir=t=>{let r=r=>lJ.error({message:r,pattern:t}),n=(n,o,a)=>{if(void 0!==t.format){let l;if(R(t.format)){if(!eh(t.format,E))return r(n+" pattern has non-string items in the `format` array");l=t.format}else{if(!E(t.format))return r(n+" pattern has non-string `format` parameter");l=[t.format]}return lJ.value(o(l))}return void 0!==t.cmd?E(t.cmd)?lJ.value(a(t.cmd,t.value)):r(n+" pattern has non-string `cmd` parameter"):r(n+" pattern is missing both `format` and `cmd` parameters")};if(!S(t))return r("Raw pattern is not an object");if(!E(t.start))return r("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!E(t.end))return r("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return r("Inline pattern has empty `start` and `end` parameters");let o=t.start,a=t.end;return 0===a.length&&(a=o,o=""),n("Inline",t=>({type:"inline-format",start:o,end:a,format:t}),(t,r)=>({type:"inline-command",start:o,end:a,cmd:t,value:r}))}return void 0!==t.replacement?E(t.replacement)?0===t.start.length?r("Replacement pattern has empty `start` parameter"):lJ.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):r("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?r("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,n)=>({type:"block-command",start:t.start,cmd:r,value:n}))},io=t=>es(t,it),ia=t=>es(t,ie),il=t=>{let r=(t=>{let r=[],n=[];return ea(t,t=>{t.fold(t=>{r.push(t)},t=>{n.push(t)})}),{errors:r,values:n}})(eo(t,ir));return ea(r.errors,t=>console.error(t.message,t.pattern)),r.values},ii=t8().deviceType,is=ii.isTouch(),id=a1.DOM,iu=t=>w(t,RegExp),ic=t=>r=>r.options.get(t),im=t=>E(t)||S(t),ig=(t,r="")=>n=>{let o=E(n);if(o){if(-1!==n.indexOf("=")){let a=(t=>{let r=t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(",");return eu(r,(t,r)=>{let n=r.split("="),o=n[0],a=n.length>1?n[1]:o;return t[eY(o)]=eY(a),t},{})})(n);return{value:eL(a,t.id).getOr(r),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},ip=ic("iframe_attrs"),ih=ic("doctype"),iv=ic("document_base_url"),ib=ic("body_id"),i$=ic("body_class"),iy=ic("content_security_policy"),iC=ic("br_in_pre"),i_=ic("forced_root_block"),ix=ic("forced_root_block_attrs"),ik=ic("newline_behavior"),iw=ic("br_newline_selector"),i8=ic("no_newline_selector"),iE=ic("keep_styles"),iS=ic("end_container_on_empty_block"),iN=ic("automatic_uploads"),iR=ic("images_reuse_filename"),iA=ic("images_replace_blob_uris"),iO=ic("icons"),iT=ic("icons_url"),iB=ic("images_upload_url"),iD=ic("images_upload_base_path"),iL=ic("images_upload_credentials"),iP=ic("images_upload_handler"),iM=ic("content_css_cors"),iI=ic("referrer_policy"),iF=ic("language"),i0=ic("language_url"),iU=ic("indent_use_margin"),i1=ic("indentation"),iz=ic("content_css"),i6=ic("content_style"),ij=ic("font_css"),i4=ic("directionality"),iH=ic("inline_boundaries_selector"),i7=ic("object_resizing"),i3=ic("resize_img_proportional"),i9=ic("placeholder"),i2=ic("event_root"),i5=ic("service_message"),iV=ic("theme"),iq=ic("theme_url"),iW=ic("model"),iK=ic("model_url"),iG=ic("inline_boundaries"),iY=ic("formats"),iX=ic("preview_styles"),iQ=ic("format_empty_lines"),iJ=ic("format_noneditable_selector"),iZ=ic("custom_ui_selector"),se=ic("inline"),st=ic("hidden_input"),sr=ic("submit_patch"),sn=ic("add_form_submit_trigger"),so=ic("add_unload_trigger"),sa=ic("custom_undo_redo_levels"),sl=ic("disable_nodechange"),si=ic("readonly"),ss=ic("editable_root"),sd=ic("content_css_cors"),su=ic("plugins"),sc=ic("external_plugins"),sm=ic("block_unsupported_drop"),sf=ic("visual"),sg=ic("visual_table_class"),sp=ic("visual_anchor_class"),sh=ic("iframe_aria_text"),sv=ic("setup"),sb=ic("init_instance_callback"),s$=ic("urlconverter_callback"),sy=ic("auto_focus"),sC=ic("browser_spellcheck"),s_=ic("protect"),sx=ic("paste_block_drop"),sk=ic("paste_data_images"),sw=ic("paste_preprocess"),s8=ic("paste_postprocess"),sE=ic("newdocument_content"),sS=ic("paste_webkit_styles"),sN=ic("paste_remove_styles_if_webkit"),sR=ic("paste_merge_formats"),sA=ic("smart_paste"),sO=ic("paste_as_text"),sT=ic("paste_tab_spaces"),sB=ic("allow_html_data_urls"),sD=ic("text_patterns"),sL=ic("text_patterns_lookup"),sP=ic("noneditable_class"),sM=ic("editable_class"),sI=ic("noneditable_regexp"),sF=ic("preserve_cdata"),s0=ic("highlight_on_focus"),sU=ic("xss_sanitization"),s1=ic("init_content_sync"),sz=t=>tP.explode(t.options.get("images_file_types")),s6=ic("table_tab_navigation"),sj=ic("details_initial_state"),s4=ic("details_serialized_state"),sH=nx,s7=nO,s3=t=>{let r=t.parentNode;r&&r.removeChild(t)},s9=t=>{let r=oa(t);return{count:t.length-r.length,text:r}},s2=t=>{let r;for(;-1!==(r=t.data.lastIndexOf("\uFEFF"));)t.deleteData(r,1)},s5=(t,r)=>(sq(t),r),sV=(t,r)=>{var n,o,a,l;return lM.isTextPosition(r)?(n=t,o=r,s7(n)&&o.container()===n?((t,r)=>{let n=s9(t.data.substr(0,r.offset())),o=s9(t.data.substr(r.offset()));return(n.text+o.text).length>0?(s2(t),lM(t,r.offset()-n.count)):r})(n,o):s5(n,o)):(a=t,(l=r).container()===a.parentNode?((t,r)=>{let n=r.container(),o=((t,r)=>{let n=et(t,r);return -1===n?Q.none():Q.some(n)})(ek(n.childNodes),t).map(t=>t<r.offset()?lM(n,r.offset()-1):r).getOr(r);return sq(t),o})(a,l):s5(a,l))},sq=t=>{sH(t)&&ou(t)&&(oc(t)?t.removeAttribute("data-mce-caret"):s3(t)),s7(t)&&(s2(t),0===t.data.length&&s3(t))},sW=n0,sK=nz,sG=nU,sY=(t,r,n)=>{let o=lf(r.getBoundingClientRect(),n),a,l;if("BODY"===t.tagName){let i=t.ownerDocument.documentElement;a=t.scrollLeft||i.scrollLeft,l=t.scrollTop||i.scrollTop}else{let s=t.getBoundingClientRect();a=t.scrollLeft-s.left,l=t.scrollTop-s.top}o.left+=a,o.right+=a,o.top+=l,o.bottom+=l,o.width=1;let d=r.offsetWidth-r.clientWidth;return d>0&&(n&&(d*=-1),o.left+=d,o.right+=d),o},sX=(t,r,n,o)=>{let a=a5(),l,i,s=i_(t),d=t.dom,u=()=>{(t=>{var r,n;let o=nb(rc(t),"*[contentEditable=false],video,audio,embed,object");for(let a=0;a<o.length;a++){let l=o[a].dom,i=l.previousSibling;if(op(i)){let s=i.data;1===s.length?null===(r=i.parentNode)||void 0===r||r.removeChild(i):i.deleteData(s.length-1,1)}og(i=l.nextSibling)&&(1===i.data.length?null===(n=i.parentNode)||void 0===n||n.removeChild(i):i.deleteData(0,1))}})(r),i&&(sq(i),i=null),a.on(t=>{d.remove(t.caret),a.clear()}),l&&(clearInterval(l),l=void 0)};return{show(t,c){let m;if(u(),sG(c))return null;if(!n(c))return i=((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF"),a=t.parentNode;if(r){let l=t.previousSibling;if(oi(l)){if(ou(l))return l;if(op(l))return l.splitText(l.data.length-1)}null==a||a.insertBefore(o,t)}else{let i=t.nextSibling;if(oi(i)){if(ou(i))return i;if(og(i))return i.splitText(1),i}t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o)}return o})(c,t),m=c.ownerDocument.createRange(),sJ(i.nextSibling)?(m.setStart(i,0),m.setEnd(i,0)):(m.setStart(i,1),m.setEnd(i,1)),m;{let f=((t,r,n)=>{var o;let a=(null!==(o=r.ownerDocument)&&void 0!==o?o:document).createElement(t);a.setAttribute("data-mce-caret",n?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(ot().dom);let l=r.parentNode;return n?null==l||l.insertBefore(a,r):r.nextSibling?null==l||l.insertBefore(a,r.nextSibling):null==l||l.appendChild(a),a})(s,c,t),g=sY(r,c,t);d.setStyle(f,"top",g.top),i=f;let p=d.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});d.setStyles(p,{...g}),d.add(r,p),a.set({caret:p,element:c,before:t}),t&&d.addClass(p,"mce-visual-caret-before"),l=setInterval(()=>{a.on(t=>{o()?d.toggleClass(t.caret,"mce-visual-caret-hidden"):d.addClass(t.caret,"mce-visual-caret-hidden")})},500),(m=c.ownerDocument.createRange()).setStart(f,0),m.setEnd(f,0)}return m},hide:u,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition(){a.on(t=>{let n=sY(r,t.element,t.before);d.setStyles(t.caret,{...n})})},destroy:()=>clearInterval(l)}},sQ=()=>tT.browser.isFirefox(),sJ=t=>sW(t)||sK(t),sZ=t=>(sJ(t)||nN(t)&&sQ())&&r_(rc(t)).exists(rH),de=nF,dt=n0,dr=nz,dn=n8("display","block table table-cell table-caption list-item"),da=ou,dl=os,di=nx,ds=nO,dd=o8,du=t=>t>0,dc=t=>t<0,dm=(t,r)=>{let n;for(;n=t(r);)if(!dl(n))return n;return null},df=(t,r,n,o,a)=>{let l=new ny(t,o),i=dt(t)||dl(t),s;if(dc(r)){if(i&&(s=dm(l.prev.bind(l),!0),n(s)))return s;for(;s=dm(l.prev.bind(l),a);)if(n(s))return s}if(du(r)){if(i&&(s=dm(l.next.bind(l),!0),n(s)))return s;for(;s=dm(l.next.bind(l),a);)if(n(s))return s}return null},dg=(t,r)=>{for(;t&&t!==r;){if(dn(t))return t;t=t.parentNode}return null},dp=(t,r,n)=>dg(t.container(),n)===dg(r.container(),n),dh=(t,r)=>{if(!r)return Q.none();let n=r.container(),o=r.offset();return di(n)?Q.from(n.childNodes[o+t]):Q.none()},dv=(t,r)=>{var n;let o=(null!==(n=r.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),o},db=(t,r,n)=>dg(r,t)===dg(n,t),d$=(t,r,n)=>{let o=t?"previousSibling":"nextSibling",a=n;for(;a&&a!==r;){let l=a[o];if(l&&da(l)&&(l=l[o]),dt(l)||dr(l)){if(db(r,l,a))return l;break}if(dd(l))break;a=a.parentNode}return null},dy=V(dv,!0),dC=V(dv,!1),d_=(t,r,n)=>{let o,a=V(d$,!0,r),l=V(d$,!1,r),i=n.startContainer,s=n.startOffset;if(os(i)){let d=ds(i)?i.parentNode:i,u=d.getAttribute("data-mce-caret");if("before"===u&&sZ(o=d.nextSibling))return dy(o);if("after"===u&&sZ(o=d.previousSibling))return dC(o)}if(!n.collapsed)return n;if(nO(i)){if(da(i)){if(1===t){if(o=l(i))return dy(o);if(o=a(i))return dC(o)}if(-1===t){if(o=a(i))return dC(o);if(o=l(i))return dy(o)}return n}if(op(i)&&s>=i.data.length-1)return 1===t&&(o=l(i))?dy(o):n;if(og(i)&&s<=1)return -1===t&&(o=a(i))?dC(o):n;if(s===i.data.length)return(o=l(i))?dy(o):n;if(0===s)return(o=a(i))?dC(o):n}return n},dx=(t,r)=>dh(t?0:-1,r).filter(dt),dk=(t,r,n)=>{let o=d_(t,r,n);return -1===t?lM.fromRangeStart(o):lM.fromRangeEnd(o)},dw=t=>Q.from(t.getNode()).map(rc),d8=(t,r)=>{let n=r;for(;(n=t(n))&&!n.isVisible(););return n},dE=(t,r)=>{let n=dp(t,r);return!(n||!nM(t.getNode()))||n};(hu=hc||(hc={}))[hu.Backwards=-1]="Backwards",hu[hu.Forwards=1]="Forwards";let dS=n0,dN=nO,dR=nx,dA=nM,dO=o8,dT=t=>{var r;return ox(t)||!!oE(r=t)&&!eu(ek(r.getElementsByTagName("*")),(t,r)=>t||ob(r),!1)},dB=oS,dD=(t,r)=>t.hasChildNodes()&&r<t.childNodes.length?t.childNodes[r]:null,dL=(t,r)=>{if(du(t)){if(dO(r.previousSibling)&&!dN(r.previousSibling))return lM.before(r);if(dN(r))return lM(r,0)}if(dc(t)){if(dO(r.nextSibling)&&!dN(r.nextSibling))return lM.after(r);if(dN(r))return lM(r,r.data.length)}return dc(t)?dA(r)?lM.before(r):lM.after(r):lM.before(r)},dP=(t,r,n)=>{let o,a,l,i;if(!dR(n)||!r)return null;if(r.isEqual(lM.after(n))&&n.lastChild){if(i=lM.after(n.lastChild),dc(t)&&dO(n.lastChild)&&dR(n.lastChild))return dA(n.lastChild)?lM.before(n.lastChild):i}else i=r;let s=i.container(),d=i.offset();if(dN(s)){if(dc(t)&&d>0)return lM(s,--d);if(du(t)&&d<s.length)return lM(s,++d);o=s}else{if(dc(t)&&d>0&&(a=dD(s,d-1),dO(a)))return!dT(a)&&(l=df(a,t,dB,a))?dN(l)?lM(l,l.data.length):lM.after(l):dN(a)?lM(a,a.data.length):lM.before(a);if(du(t)&&d<s.childNodes.length&&(a=dD(s,d),dO(a)))return dA(a)?((t,r)=>{let n=r.nextSibling;return n&&dO(n)?dN(n)?lM(n,0):lM.before(n):dP(hc.Forwards,lM.after(r),t)})(n,a):!dT(a)&&(l=df(a,t,dB,a))?dN(l)?lM(l,0):lM.before(l):dN(a)?lM(a,0):lM.after(a);o=a||i.getNode()}if(o&&(du(t)&&i.isAtEnd()||dc(t)&&i.isAtStart())&&(o=df(o,t,X,n,!0),dB(o,n)))return dL(t,o);a=o?df(o,t,dB,n):o;let u=e4(es(((t,r)=>{let n=[],o=t;for(;o&&o!==r;)n.push(o),o=o.parentNode;return n})(s,n),dS));return!u||a&&u.contains(a)?a?dL(t,a):null:i=du(t)?lM.after(u):lM.before(u)},dM=t=>({next:r=>dP(hc.Forwards,r,t),prev:r=>dP(hc.Backwards,r,t)}),dI=t=>lM.isTextPosition(t)?0===t.offset():o8(t.getNode()),dF=t=>{if(lM.isTextPosition(t)){let r=t.container();return t.offset()===r.data.length}return o8(t.getNode(!0))},d0=(t,r)=>!lM.isTextPosition(t)&&!lM.isTextPosition(r)&&t.getNode()===r.getNode(!0),dU=(t,r,n)=>{let o=dM(r);return Q.from(t?o.next(n):o.prev(n))},d1=(t,r,n)=>dU(t,r,n).bind(o=>{var a,l,i,s;return dp(n,o,r)&&(a=t,l=n,i=o,a?!d0(l,i)&&(s=l,!(!lM.isTextPosition(s)&&nM(s.getNode())))&&dF(l)&&dI(i):!d0(i,l)&&dI(l)&&dF(i))?dU(t,r,o):Q.some(o)}),dz=(t,r,n,o)=>d1(t,r,n).bind(n=>o(n)?dz(t,r,n,o):Q.some(n)),d6=(t,r)=>{var n;let o=t?r.firstChild:r.lastChild;return nO(o)?Q.some(lM(o,t?0:o.data.length)):o?o8(o)?Q.some(t?lM.before(o):nM(n=o)?lM.before(n):lM.after(n)):((t,r,n)=>{let o=t?lM.before(n):lM.after(n);return dU(t,r,o)})(t,r,o):Q.none()},dj=V(dU,!0),d4=V(dU,!1),dH=V(d6,!0),d7=V(d6,!1),d3="_mce_caret",d9=t=>nx(t)&&t.id===d3,d2=(t,r)=>{let n=r;for(;n&&n!==t;){if(d9(n))return n;n=n.parentNode}return null},d5=t=>eP(t,"name"),dV=t=>tP.isArray(t.start),dq=t=>!(!d5(t)&&O(t.forward))||t.forward,dW=(t,r)=>(nx(r)&&t.isBlock(r)&&!r.innerHTML&&(r.innerHTML='<br data-mce-bogus="1" />'),r),dK=(t,r)=>d7(t).fold(Y,t=>(r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),!0)),dG=(t,r,n)=>{var o;return!(r.hasChildNodes()||!d2(t,r)||(((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF");t.appendChild(o),r.setStart(o,0),r.setEnd(o,0)})(r,n),0))},dY=(t,r,n,o)=>{let a=n[r?"start":"end"],l=t.getRoot();if(a){let i=l,s=a[0];for(let d=a.length-1;i&&d>=1;d--){let u=i.childNodes;if(dG(l,i,o))return!0;if(a[d]>u.length-1)return!!dG(l,i,o)||dK(i,o);i=u[a[d]]}nO(i)&&(s=Math.min(a[0],i.data.length)),nx(i)&&(s=Math.min(a[0],i.childNodes.length)),r?o.setStart(i,s):o.setEnd(i,s)}return!0},dX=t=>nO(t)&&t.data.length>0,dQ=(t,r,n)=>{let o=t.get(n.id+"_"+r),a=null==o?void 0:o.parentNode,l=n.keep;if(o&&a){let i,s;if("start"===r?l?o.hasChildNodes()?(i=o.firstChild,s=1):dX(o.nextSibling)?(i=o.nextSibling,s=0):dX(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)+1):(i=a,s=t.nodeIndex(o)):l?o.hasChildNodes()?(i=o.firstChild,s=1):dX(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)):(i=a,s=t.nodeIndex(o)),!l){let d=o.previousSibling,u=o.nextSibling,c;for(tP.each(tP.grep(o.childNodes),t=>{nO(t)&&(t.data=t.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+r);)t.remove(c,!0);if(nO(u)&&nO(d)&&!tT.browser.isOpera()){let m=d.data.length;d.appendData(u.data),t.remove(u),i=d,s=m}}return Q.some(lM(i,s))}return Q.none()},dJ=(t,r,n)=>((t,r,n=!1)=>{var o;return 2===r?lW(oa,n,t):3===r?(t=>{let r=t.getRng();return{start:lH(t.dom.getRoot(),lM.fromRangeStart(r)),end:lH(t.dom.getRoot(),lM.fromRangeEnd(r)),forward:t.isForward()}})(t):r?{rng:(o=t).getRng(),forward:o.isForward()}:lG(t,!1)})(t,r,n),dZ=(t,r)=>{((t,r)=>{let n=t.dom;if(r){var o,a,l,i,s;if(dV(r))return((t,r)=>{let n=t.createRng();return dY(t,!0,r,n)&&dY(t,!1,r,n)?Q.some({range:n,forward:dq(r)}):Q.none()})(n,r);if(E(r.start))return((t,r)=>{let n=Q.from(l7(t.getRoot(),r.start)),o=Q.from(l7(t.getRoot(),r.end));return tI(n,o,(n,o)=>{let a=t.createRng();return a.setStart(n.container(),n.offset()),a.setEnd(o.container(),o.offset()),{range:a,forward:dq(r)}})})(n,r);if(eP(r,"id"))return((t,r)=>{let n=dQ(t,"start",r),o=dQ(t,"end",r);return tI(n,o.or(n),(n,o)=>{let a=t.createRng();return a.setStart(dW(t,n.container()),n.offset()),a.setEnd(dW(t,o.container()),o.offset()),{range:a,forward:dq(r)}})})(n,r);if(d5(r))return l=n,i=r,Q.from(l.select(i.name)[i.index]).map(t=>{let r=l.createRng();return r.selectNode(t),{range:r,forward:!0}});if(eP(r,"rng"))return Q.some({range:r.rng,forward:dq(r)})}return Q.none()})(t,r).each(({range:r,forward:n})=>{t.setRng(r,n)})},ue=t=>nx(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),ut=(hm="\xa0",t=>hm===t),ur=t=>""!==t&&-1!==" \f\n\r	\v".indexOf(t),un=t=>!ur(t)&&!ut(t)&&!nH(t),uo=t=>{let r=t.toString(16);return(1===r.length?"0"+r:r).toUpperCase()},ua=t=>{var r,n;return r=uo(t.red)+uo(t.green)+uo(t.blue),{value:eV(n=r,"#").toUpperCase()}},ul=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ui=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,us=(t,r,n,o)=>({red:t,green:r,blue:n,alpha:o}),ud=(t,r,n,o)=>{let a=parseInt(t,10),l=parseInt(r,10),i=parseInt(n,10),s=parseFloat(o);return us(a,l,i,s)},uu=t=>(t=>{if("transparent"===t)return Q.some(us(0,0,0,0));let r=ul.exec(t);if(null!==r)return Q.some(ud(r[1],r[2],r[3],"1"));let n=ui.exec(t);return null!==n?Q.some(ud(n[1],n[2],n[3],n[4])):Q.none()})(t).map(ua).map(t=>"#"+t.value).getOr(t),uc=t=>{let r=[];if(t)for(let n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));return r},um=(t,r)=>{var n,o;let a=nb(r,"td[data-mce-selected],th[data-mce-selected]");return a.length>0?a:es(ep(n=t,t=>{let r=lb(t);return r?[rc(r)]:[]}),nQ)},uf=t=>um(uc(t.selection.getSel()),rc(t.getBody())),ug=(t,r)=>r6(t,"table",r),up=t=>rR(t).fold(z([t]),r=>[t].concat(up(r))),uh=t=>rA(t).fold(z([t]),r=>"br"===t6(r)?rk(r).map(r=>[t].concat(uh(r))).getOr([]):[t].concat(uh(r))),uv=(t,r)=>tI((t=>{let r=t.startContainer,n=t.startOffset;return nO(r)?0===n?Q.some(rc(r)):Q.none():Q.from(r.childNodes[n]).map(rc)})(r),(t=>{let r=t.endContainer,n=t.endOffset;return nO(r)?n===r.data.length?Q.some(rc(r)):Q.none():Q.from(r.childNodes[n-1]).map(rc)})(r),(r,n)=>{let o=em(up(t),V(rh,r)),a=em(uh(t),V(rh,n));return o.isSome()&&a.isSome()}).getOr(!1),ub=(t,r,n,o)=>{let a=n,l=new ny(n,a),i=eT(t.schema.getMoveCaretBeforeOnEnterElements(),(t,r)=>!er(["td","th","table"],r.toLowerCase())),s=n;do{if(nO(s)&&0!==tP.trim(s.data).length)return void(o?r.setStart(s,0):r.setEnd(s,s.data.length));if(i[s.nodeName])return void(o?r.setStartBefore(s):"BR"===s.nodeName?r.setEndBefore(s):r.setEndAfter(s))}while(s=o?l.next():l.prev());"BODY"===a.nodeName&&(o?r.setStart(a,0):r.setEnd(a,a.childNodes.length))},u$=t=>{let r=t.selection.getSel();return D(r)&&r.rangeCount>0},uy=(t,r)=>{let n=uf(t);n.length>0?ea(n,n=>{let o=n.dom,a=t.dom.createRng();a.setStartBefore(o),a.setEndAfter(o),r(a,!0)}):r(t.selection.getRng(),!1)},uC=(t,r,n)=>{let o=lG(t,r);n(o),t.moveToBookmark(o)},u_=t=>P(null==t?void 0:t.nodeType),ux=t=>nx(t)&&!ue(t)&&!d9(t)&&!nS(t),uk=t=>!0===t.isContentEditable,uw=(t,r,n)=>{let{selection:o,dom:a}=t,l=o.getNode(),i=n0(l);uC(o,!0,()=>{r()}),i&&n0(l)&&a.isChildOf(l,t.getBody())?t.selection.select(l):n(o.getStart())&&u8(a,o)},u8=(t,r)=>{var n,o;let a=r.getRng(),{startContainer:l,startOffset:i}=a;if(!((t,r)=>{if(ux(r)&&!/^(TD|TH)$/.test(r.nodeName)){let n=t.getAttrib(r,"data-mce-selected"),o=parseInt(n,10);return!isNaN(o)&&o>0}return!1})(t,r.getNode())&&nx(l)){let s=l.childNodes,d=t.getRoot(),u;if(i<s.length){let c=s[i];u=new ny(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:d)}else{let m=s[s.length-1];(u=new ny(m,null!==(o=t.getParent(m,t.isBlock))&&void 0!==o?o:d)).next(!0)}for(let f=u.current();f;f=u.next()){if("false"===t.getContentEditable(f))return;if(nO(f)&&!uR(f))return a.setStart(f,0),void r.setRng(a)}}},uE=(t,r,n)=>{if(t){let o=r?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(nx(t)||!uR(t))return t}},uS=(t,r)=>!!t.getTextBlockElements()[r.nodeName.toLowerCase()]||o3(t,r),uN=(t,r,n)=>t.schema.isValidChild(r,n),uR=(t,r=!1)=>{if(D(t)&&nO(t)){let n=r?t.data.replace(/ /g,"\xa0"):t.data;return oR(n)}return!1},uA=(t,r)=>{let n=t.dom;return ux(r)&&"false"===n.getContentEditable(r)&&((t,r)=>{let n="[data-mce-cef-wrappable]",o=iJ(t),a=eZ(o)?n:`${n},${o}`;return rg(rc(r),a)})(t,r)&&0===n.select('[contenteditable="true"]',r).length},uO=(t,r)=>L(t)?t(r):(D(r)&&(t=t.replace(/%(\w+)/g,(t,n)=>r[n]||t)),t),uT=(t,r)=>(r=r||"",t=""+((t=t||"").nodeName||t),r=""+(r.nodeName||r),t.toLowerCase()===r.toLowerCase()),uB=(t,r)=>{if(B(t))return null;{let n=String(t);return"color"!==r&&"backgroundColor"!==r||(n=uu(n)),"fontWeight"===r&&700===t&&(n="bold"),"fontFamily"===r&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},uD=(t,r,n)=>{let o=t.getStyle(r,n);return uB(o,n)},uL=(t,r)=>{let n;return t.getParent(r,r=>!!nx(r)&&!!(n=t.getStyle(r,"text-decoration"))&&"none"!==n),n},uP=(t,r,n)=>t.getParents(r,n,t.getRoot()),uM=(t,r,n)=>{let o=t.formatter.get(r);return D(o)&&en(o,n)},uI=t=>eM(t,"block"),uF=t=>eM(t,"selector"),u0=t=>eM(t,"inline"),uU=t=>uF(t)&&!1!==t.expand&&!u0(t),u1=ue,uz=uP,u6=uR,uj=uS,u4=(t,r)=>{let n=r;for(;n;){if(nx(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:r;n=n.parentNode}return r},uH=(t,r,n,o)=>{let a=r.data;if(t){for(let l=n;l>0;l--)if(o(a.charAt(l-1)))return l}else for(let i=n;i<a.length;i++)if(o(a.charAt(i)))return i;return -1},u7=(t,r,n)=>uH(t,r,n,t=>ut(t)||ur(t)),u3=(t,r,n)=>uH(t,r,n,un),u9=(t,r,n,o,a,l)=>{let i,s=t.getParent(n,t.isBlock)||r,d=(r,n,o)=>{let l=lu(t),d=a?l.backwards:l.forwards;return Q.from(d(r,n,(t,r)=>u1(t.parentNode)?-1:(i=t,o(a,t,r)),s))};return d(n,o,u7).bind(t=>l?d(t.container,t.offset+(a?-1:0),u3):Q.some(t)).orThunk(()=>i?Q.some({container:i,offset:a?0:i.length}):Q.none())},u2=(t,r,n,o,a)=>{let l=o[a];nO(o)&&eZ(o.data)&&l&&(o=l);let i=uz(t,o);for(let s=0;s<i.length;s++)for(let d=0;d<r.length;d++){let u=r[d];if((!D(u.collapsed)||u.collapsed===n.collapsed)&&uF(u)&&t.is(i[s],u.selector))return i[s]}return o},u5=(t,r,n,o)=>{var a;let l=n,i=t.getRoot(),s=r[0];if(uI(s)&&(l=s.wrapper?null:t.getParent(n,s.block,i)),!l){let d=null!==(a=t.getParent(n,"LI,TD,TH"))&&void 0!==a?a:i;l=t.getParent(nO(n)?n.parentNode:n,r=>r!==i&&uj(t.schema,r),d)}if(l&&uI(s)&&s.wrapper&&(l=uz(t,l,"ul,ol").reverse()[0]||l),!l)for(l=n;l&&l[o]&&!t.isBlock(l[o])&&!uT(l=l[o],"br"););return l||n},uV=(t,r,n,o)=>{let a=n.parentNode;return!D(n[o])&&(!(a!==r&&!B(a)&&!t.isBlock(a))||uV(t,r,a,o))},uq=(t,r,n,o,a)=>{var l;let i=n,s=a?"previousSibling":"nextSibling",d=t.getRoot();if(nO(n)&&!u6(n)&&(a?o>0:o<n.data.length))return n;for(;i;){if(!r[0].block_expand&&t.isBlock(i))return i;for(let u=i[s];u;u=u[s]){let c=nO(u)&&!uV(t,d,u,s);if(!u1(u)&&(!nM(l=u)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!u6(u,c))return i}if(i===d||i.parentNode===d){n=i;break}i=i.parentNode}return n},uW=t=>u1(t.parentNode)||u1(t),uK=(t,r,n,o=!1)=>{let{startContainer:a,startOffset:l,endContainer:i,endOffset:s}=r,d=n[0];return nx(a)&&a.hasChildNodes()&&(a=l$(a,l),nO(a)&&(l=0)),nx(i)&&i.hasChildNodes()&&(i=l$(i,r.collapsed?s:s-1),nO(i)&&(s=i.data.length)),a=u4(t,a),i=u4(t,i),uW(a)&&(a=u1(a)?a:a.parentNode,nO(a=r.collapsed?a.previousSibling||a:a.nextSibling||a)&&(l=r.collapsed?a.length:0)),uW(i)&&(i=u1(i)?i:i.parentNode,nO(i=r.collapsed?i.nextSibling||i:i.previousSibling||i)&&(s=r.collapsed?0:i.length)),r.collapsed&&(u9(t,t.getRoot(),a,l,!0,o).each(({container:t,offset:r})=>{a=t,l=r}),u9(t,t.getRoot(),i,s,!1,o).each(({container:t,offset:r})=>{i=t,s=r})),(u0(d)||d.block_expand)&&(u0(d)&&nO(a)&&0!==l||(a=uq(t,n,a,l,!0)),u0(d)&&nO(i)&&s!==i.data.length||(i=uq(t,n,i,s,!1))),uU(d)&&(a=u2(t,n,r,a,"previousSibling"),i=u2(t,n,r,i,"nextSibling")),(uI(d)||uF(d))&&(a=u5(t,n,a,"previousSibling"),i=u5(t,n,i,"nextSibling"),uI(d)&&(t.isBlock(a)||(a=uq(t,n,a,l,!0)),t.isBlock(i)||(i=uq(t,n,i,s,!1)))),nx(a)&&a.parentNode&&(l=t.nodeIndex(a),a=a.parentNode),nx(i)&&i.parentNode&&(s=t.nodeIndex(i)+1,i=i.parentNode),{startContainer:a,startOffset:l,endContainer:i,endOffset:s}},uG=(t,r,n)=>{var o;let a=r.startOffset,l=l$(r.startContainer,a),i=r.endOffset,s=l$(r.endContainer,i-1),d=t=>{let r=t[0];nO(r)&&r===l&&a>=r.data.length&&t.splice(0,1);let n=t[t.length-1];return 0===i&&t.length>0&&n===s&&nO(n)&&t.splice(t.length-1,1),t},u=(t,r,n)=>{let o=[];for(;t&&t!==n;t=t[r])o.push(t);return o},c=(r,n)=>t.getParent(r,t=>t.parentNode===n,n),m=(t,r,o)=>{let a=o?"nextSibling":"previousSibling";for(let l=t,i=l.parentNode;l&&l!==r;l=i){i=l.parentNode;let s=u(l===t?l:l[a],a);s.length&&(o||s.reverse(),n(d(s)))}};if(l===s)return n(d([l]));let f=null!==(o=t.findCommonAncestor(l,s))&&void 0!==o?o:t.getRoot();if(t.isChildOf(l,s))return m(l,f,!0);if(t.isChildOf(s,l))return m(s,f);let g=c(l,f)||l,p=c(s,f)||s;m(l,g,!0);let h=u(g===l?g:g.nextSibling,"nextSibling",p===s?p.nextSibling:p);h.length&&n(d(h)),m(s,p)},uY=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],uX=(t,r,n,o,a,l)=>{var i,s;let{uid:d=r,...u}=n;rn(t,aW()),tq(t,`${aG()}`,d),tq(t,`${aK()}`,o);let{attributes:c={},classes:m=[]}=a(d,u);if(tW(t,c),i=t,ea(m,t=>{rn(i,t)}),l){m.length>0&&tq(t,`${aX()}`,m.join(","));let f=e8(c);f.length>0&&tq(t,`${aQ()}`,f.join(","))}},uQ=(t,r,n,o,a)=>{let l=rd("span",t);return uX(l,r,n,o,a,!1),l},uJ=(t,r,n,o,a,l)=>{let i=[],s=uQ(t.getDoc(),n,l,o,a),d=a5(),u=()=>{d.clear()},c=t=>{ea(t,m)},m=r=>{var m,f,g,p;switch(m=t,f=r,g="span",p=t6(r),rC(f).fold(()=>"skipping",t=>{var r,n;return"br"===p||t3(r=f)&&"\uFEFF"===n3(r)?"valid":t7(n=f)&&rl(n,aW())?"existing":d9(f.dom)?"caret":en(uY,t=>rg(f,t))?"valid-block":uN(m,g,p)&&uN(m,t6(t),g)?"valid":"invalid-child"})){case"invalid-child":{u();let h=rS(r);c(h),u();break}case"valid-block":u(),uX(r,n,l,o,a,!0);break;case"valid":{let v=d.get().getOrThunk(()=>{let t=ll(s);return i.push(t),d.set(t),t});rZ(r,v)}}};return uG(t.dom,r,t=>{u(),(t=>{let r=eo(t,rc);c(r)})(t)}),i},uZ=t=>{let r=(()=>{let t={};return{register(r,n){t[r]={name:r,settings:n}},lookup:r=>eL(t,r).map(t=>t.settings),getNames:()=>e8(t)}})();((t,r)=>{let n=aK(),o=t=>Q.from(t.attr(n)).bind(r.lookup),a=t=>{var r,n;t.attr(aG(),null),t.attr(aK(),null),t.attr(aY(),null);let o=Q.from(t.attr(aQ())).map(t=>t.split(",")).getOr([]),a=Q.from(t.attr(aX())).map(t=>t.split(",")).getOr([]);ea(o,r=>t.attr(r,null));let l=null!==(n=null===(r=t.attr("class"))||void 0===r?void 0:r.split(" "))&&void 0!==n?n:[],i=eb(l,[aW()].concat(a));t.attr("class",i.length>0?i.join(" "):null),t.attr(aX(),null),t.attr(aQ(),null)};t.serializer.addTempAttr(aY()),t.serializer.addAttributeFilter(n,t=>{for(let r of t)o(r).each(t=>{!1===t.persistent&&("span"===r.name?r.unwrap():a(r))})})})(t,r);let n=((t,r)=>{let n=aj({}),o=()=>({listeners:[],previous:a5()}),a=(t,r)=>{l(t,t=>(r(t),t))},l=(t,r)=>{let a=n.get(),l=r(eL(a,t).getOrThunk(o));a[t]=l,n.set(a)},i=(r,n)=>{ea(lt(t,r),t=>{n?tq(t,aY(),"true"):tX(t,aY())})},s=aq(()=>{let n=ey(r.getNames());ea(n,r=>{l(r,n=>{let o=n.previous.get();return aZ(t,Q.some(r)).fold(()=>{o.each(t=>{var o;a(o=r,t=>{ea(t.listeners,t=>t(!1,o))}),n.previous.clear(),i(t,!1)})},({uid:t,name:r,elements:l})=>{var s,d,u;tM(o,t)||(o.each(t=>i(t,!1)),s=r,d=t,u=l,a(s,t=>{ea(t.listeners,t=>t(!0,s,{uid:d,nodes:eo(u,t=>t.dom)}))}),n.previous.set(t),i(t,!0))}),{previous:n.previous,listeners:n.listeners}})})},30);return t.on("remove",()=>{s.cancel()}),t.on("NodeChange",()=>{s.throttle()}),{addListener(t,r){l(t,t=>({previous:t.previous,listeners:t.listeners.concat([r])}))}}})(t,r),o=t5("span"),a=t=>{ea(t,t=>{o(t)?nn(t):(t=>{var r;ra(t,aW()),tX(t,`${aG()}`),tX(t,`${aK()}`),tX(t,`${aY()}`);let n=tG(t,`${aQ()}`).map(t=>t.split(",")).getOr([]),o=tG(t,`${aX()}`).map(t=>t.split(",")).getOr([]);ea(n,r=>tX(t,r)),r=t,ea(o,t=>{ra(r,t)}),tX(t,`${aX()}`),tX(t,`${aQ()}`)})(t)})};return{register(t,n){r.register(t,n)},annotate(n,o){r.lookup(n).each(r=>{((t,r,n,o)=>{t.undoManager.transact(()=>{let a=t.selection,l=a.getRng(),i=uf(t).length>0,s=lo("mce-annotation");if(l.collapsed&&!i&&((t,r)=>{let n=uK(t.dom,r,[{inline:"span"}]);r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),t.selection.setRng(r)})(t,l),a.getRng().collapsed&&!i){let d=uQ(t.getDoc(),s,o,r,n.decorate);nl(d,"\xa0"),a.getRng().insertNode(d.dom),a.select(d.dom)}else uC(a,!1,()=>{uy(t,a=>{uJ(t,a,s,r,n.decorate,o)})})})})(t,n,r,o)})},annotationChanged(t,r){n.addListener(t,r)},remove(r){aZ(t,Q.some(r)).each(({elements:r})=>{let n=t.selection.getBookmark();a(r),t.selection.moveToBookmark(n)})},removeAll(r){let n=t.selection.getBookmark();eS(lr(t,r),(t,r)=>{a(t)}),t.selection.moveToBookmark(n)},getAll(r){let n=lr(t,r);return eN(n,t=>eo(t,t=>t.dom))}}},ce=t=>({getBookmark:V(dJ,t),moveToBookmark:V(dZ,t)});ce.isBookmarkNode=ue;let ct=(t,r,n)=>!n.collapsed&&en(n.getClientRects(),n=>{var o,a,l;return o=n,a=t,l=r,a>=o.left&&a<=o.right&&l>=o.top&&l<=o.bottom}),cr=(t,r,n)=>{t.dispatch(r,n)},cn=(t,r,n,o)=>{t.dispatch("FormatApply",{format:r,node:n,vars:o})},co=(t,r,n,o)=>{t.dispatch("FormatRemove",{format:r,node:n,vars:o})},ca=(t,r)=>t.dispatch("SetContent",r),cl=(t,r)=>t.dispatch("GetContent",r),ci=(t,r)=>t.dispatch("PastePlainTextToggle",{state:r}),cs={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||cs.metaKeyPressed(t),metaKeyPressed:t=>tT.os.isMacOS()||tT.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},cd="data-mce-selected",cu=Math.abs,cc=Math.round,cm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},cf=(t,r)=>{let n=r.dom,o=r.getDoc(),a=document,l=r.getBody(),i,s,d,u,c,m,f,g,p,h,v,b,$,y,C,_=t=>D(t)&&(nI(t)||n.is(t,"figure.image")),x=t=>nz(t)||n.hasClass(t,"mce-preview-object"),k=t=>{let n=t.target;((t,r)=>{var n;if("longpress"===(n=t).type||0===n.type.indexOf("touch")){let o=t.touches[0];return _(t.target)&&!ct(o.clientX,o.clientY,r)}return _(t.target)&&!ct(t.clientX,t.clientY,r)})(t,r.selection.getRng())&&!t.isDefaultPrevented()&&r.selection.select(n)},w=t=>n.hasClass(t,"mce-preview-object")&&D(t.firstElementChild)?[t,t.firstElementChild]:n.is(t,"figure.image")?[t.querySelector("img")]:[t],E=t=>{let o=i7(r);return!!o&&"false"!==t.getAttribute("data-mce-resize")&&t!==r.getBody()&&(n.hasClass(t,"mce-preview-object")&&D(t.firstElementChild)?rg(rc(t.firstElementChild),o):rg(rc(t),o))},S=(t,o,a)=>{if(D(a)){let l=w(t);ea(l,t=>{t.style[o]||!r.schema.isValid(t.nodeName.toLowerCase(),o)?n.setStyle(t,o,a):n.setAttrib(t,o,""+a)})}},N=(t,r,n)=>{S(t,"width",r),S(t,"height",n)},R=t=>{let o,a,c,k,w;o=t.screenX-m,a=t.screenY-f,b=o*u[2]+g,$=a*u[3]+p,b=b<5?5:b,$=$<5?5:$,(c=(_(i)||x(i))&&!1!==i3(r)?!cs.modifierPressed(t):cs.modifierPressed(t))&&(cu(o)>cu(a)?($=cc(b*h),b=cc($/h)):(b=cc($/h),$=cc(b*h))),N(s,b,$),k=u.startPos.x+o,w=u.startPos.y+a,k=k>0?k:0,w=w>0?w:0,n.setStyles(d,{left:k,top:w,display:"block"}),d.innerHTML=b+" &times; "+$,u[2]<0&&s.clientWidth<=b&&n.setStyle(s,"left",(void 0)+(g-b)),u[3]<0&&s.clientHeight<=$&&n.setStyle(s,"top",(void 0)+(p-$)),(o=l.scrollWidth-y)+(a=l.scrollHeight-C)!=0&&n.setStyles(d,{left:k-o,top:w-a}),v||(((t,r,n,o,a)=>{t.dispatch("ObjectResizeStart",{target:r,width:n,height:o,origin:a})})(r,i,g,p,"corner-"+u.name),v=!0)},A=()=>{let t=v;v=!1,t&&(S(i,"width",b),S(i,"height",$)),n.unbind(o,"mousemove",R),n.unbind(o,"mouseup",A),a!==o&&(n.unbind(a,"mousemove",R),n.unbind(a,"mouseup",A)),n.remove(s),n.remove(d),n.remove(c),O(i),t&&(((t,r,n,o,a)=>{t.dispatch("ObjectResized",{target:r,width:n,height:o,origin:a})})(r,i,b,$,"corner-"+u.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),r.nodeChanged()},O=t=>{M();let v=n.getPos(t,l),_=v.x,k=v.y,S=t.getBoundingClientRect(),O=S.width||S.right-S.left,T=S.height||S.bottom-S.top;i!==t&&(B(),i=t,b=$=0);let D=r.dispatch("ObjectSelected",{target:t});E(t)&&!D.isDefaultPrevented()?eS(cm,(t,r)=>{let v=n.get("mceResizeHandle"+r);v&&n.remove(v),v=n.add(l,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),n.bind(v,"mousedown",v=>{v.stopImmediatePropagation(),v.preventDefault(),(v=>{var b;let $=w(i)[0];m=v.screenX,f=v.screenY,g=$.clientWidth,h=(p=$.clientHeight)/g,(u=t).name=r,u.startPos={x:O*t[0]+_,y:T*t[1]+k},y=l.scrollWidth,C=l.scrollHeight,c=n.add(l,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),s=x(b=i)?n.create("img",{src:tT.transparentSrc}):b.cloneNode(!0),n.addClass(s,"mce-clonedresizable"),n.setAttrib(s,"data-mce-bogus","all"),s.contentEditable="false",n.setStyles(s,{left:_,top:k,margin:0}),N(s,O,T),s.removeAttribute(cd),l.appendChild(s),n.bind(o,"mousemove",R),n.bind(o,"mouseup",A),a!==o&&(n.bind(a,"mousemove",R),n.bind(a,"mouseup",A)),d=n.add(l,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+p)})(v)}),t.elm=v,n.setStyles(v,{left:O*t[0]+_-v.offsetWidth/2,top:T*t[1]+k-v.offsetHeight/2})}):B(!1)},T=aV(O,0),B=(t=!0)=>{T.cancel(),M(),i&&t&&i.removeAttribute(cd),eS(cm,(t,r)=>{let o=n.get("mceResizeHandle"+r);o&&(n.unbind(o),n.remove(o))})},L=(t,r)=>n.isChildOf(t,r),P=o=>{if(v||r.removed||r.composing)return;let a="mousedown"===o.type?o.target:t.getNode(),i=r4(rc(a),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(t=>t.dom).filter(t=>n.isEditable(t.parentElement)).getOrUndefined(),s=D(i)?n.getAttrib(i,cd,"1"):"1";if(ea(n.select(`img[${cd}],hr[${cd}]`),t=>{t.removeAttribute(cd)}),D(i)&&L(i,l)&&r.hasFocus()){I();let d=t.getStart(!0);if(L(d,i)&&L(t.getEnd(!0),i))return n.setAttrib(i,cd,s),void T.throttle(i)}B()},M=()=>{eS(cm,t=>{t.elm&&(n.unbind(t.elm),delete t.elm)})},I=()=>{try{r.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return r.on("init",()=>{I(),r.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",P),r.on("keyup compositionend",t=>{i&&"TABLE"===i.nodeName&&P(t)}),r.on("hide blur",B),r.on("contextmenu longpress",k,!0)}),r.on("remove",M),{isResizable:E,showResizeRect:O,hideResizeRect:B,updateResizeRect:P,destroy(){T.cancel(),i=s=c=null}}},cg=(t,r,n)=>{var o;let a=t.document.createRange();return o=a,r.fold(t=>{o.setStartBefore(t.dom)},(t,r)=>{o.setStart(t.dom,r)},t=>{o.setStartAfter(t.dom)}),((t,r)=>{r.fold(r=>{t.setEndBefore(r.dom)},(r,n)=>{t.setEnd(r.dom,n)},r=>{t.setEndAfter(r.dom)})})(a,n),a},cp=(t,r,n,o,a)=>{let l=t.document.createRange();return l.setStart(r.dom,n),l.setEnd(o.dom,a),l},ch=lZ([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cv=(t,r,n)=>r(rc(n.startContainer),n.startOffset,rc(n.endContainer),n.endOffset);ch.ltr,ch.rtl;let cb=(t,r,n,o)=>({start:t,soffset:r,finish:n,foffset:o}),c$=document.caretPositionFromPoint?(t,r,n)=>{var o,a;return Q.from(null===(a=(o=t.dom).caretPositionFromPoint)||void 0===a?void 0:a.call(o,r,n)).bind(r=>{if(null===r.offsetNode)return Q.none();let n=t.dom.createRange();return n.setStart(r.offsetNode,r.offset),n.collapse(),Q.some(n)})}:document.caretRangeFromPoint?(t,r,n)=>{var o,a;return Q.from(null===(a=(o=t.dom).caretRangeFromPoint)||void 0===a?void 0:a.call(o,r,n))}:Q.none,cy=lZ([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cC={before:cy.before,on:cy.on,after:cy.after,cata:(t,r,n,o)=>t.fold(r,n,o),getStart:t=>t.fold(j,j,j)},c_=lZ([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cx={domRange:c_.domRange,relative:c_.relative,exact:c_.exact,exactFromRange:t=>c_.exact(t.start,t.soffset,t.finish,t.foffset),getWin(t){var r;let n=t.match({domRange:t=>rc(t.startContainer),relative:(t,r)=>cC.getStart(t),exact:(t,r,n,o)=>t});return ry(n)},range:cb},ck=(t,r)=>{let n=t6(t);return"input"===n?cC.after(t):er(["br","img"],n)?0===r?cC.before(t):cC.after(t):cC.on(t,r)},cw=(t,r)=>{let n=t.fold(cC.before,ck,cC.after),o=r.fold(cC.before,ck,cC.after);return cx.relative(n,o)},c8=(t,r,n,o)=>{let a=ck(t,r),l=ck(n,o);return cx.relative(a,l)},cE=(t,r)=>{let n=(r||document).createDocumentFragment();return ea(t,t=>{n.appendChild(t.dom)}),rc(n)},cS=t=>{var r;let n=cx.getWin(t).dom,o=(t,r,o,a)=>cp(n,t,r,o,a),a=t.match({domRange(t){let r=rc(t.startContainer),n=rc(t.endContainer);return c8(r,t.startOffset,n,t.endOffset)},relative:cw,exact:c8});return((t,r)=>{var n,o;let a=(n=t,r.match({domRange:t=>({ltr:z(t),rtl:Q.none}),relative:(t,r)=>({ltr:eH(()=>cg(n,t,r)),rtl:eH(()=>Q.some(cg(n,r,t)))}),exact:(t,r,o,a)=>({ltr:eH(()=>cp(n,t,r,o,a)),rtl:eH(()=>Q.some(cp(n,o,a,t,r)))})}));return((t,r)=>{let n=r.ltr();return n.collapsed?r.rtl().filter(t=>!1===t.collapsed).map(t=>ch.rtl(rc(t.endContainer),t.endOffset,rc(t.startContainer),t.startOffset)).getOrThunk(()=>cv(0,ch.ltr,n)):cv(0,ch.ltr,n)})(0,a)})(n,a).match({ltr:o,rtl:o})},cN=(t,r,n)=>{var o,a,l;return(o=ry(rc(n)).dom,((t,r,n)=>{let o=rc(t.document);return c$(o,r,n).map(t=>cb(rc(t.startContainer),t.startOffset,rc(t.endContainer),t.endOffset))})(o,a=t,r)).map(t=>{let r=n.createRange();return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),r}).getOrUndefined()},cR=(t,r)=>D(t)&&D(r)&&t.startContainer===r.startContainer&&t.startOffset===r.startOffset&&t.endContainer===r.endContainer&&t.endOffset===r.endOffset,cA=(t,r,n)=>null!==((t,r,n)=>{let o=t;for(;o&&o!==r;){if(n(o))return o;o=o.parentNode}return null})(t,r,n),cO=(t,r,n)=>cA(t,r,t=>t.nodeName===n),cT=(t,r)=>ou(t)&&!cA(t,r,d9),cB=(t,r,n)=>{let o=r.parentNode;if(o){let a=new ny(r,t.getParent(o,t.isBlock)||t.getRoot()),l;for(;l=a[n?"prev":"next"]();)if(nM(l))return!0}return!1},cD=(t,r,n,o,a)=>{let l=t.getRoot(),i=t.schema.getNonEmptyElements(),s=a.parentNode,d,u;if(!s)return Q.none();let c=t.getParent(s,t.isBlock)||l;if(o&&nM(a)&&r&&t.isEmpty(c))return Q.some(lM(s,t.nodeIndex(a)));let m=new ny(a,c);for(;u=m[o?"prev":"next"]();){if("false"===t.getContentEditableParent(u)||cT(u,l))return Q.none();if(nO(u)&&u.data.length>0)return cO(u,l,"A")?Q.none():Q.some(lM(u,o?u.data.length:0));if(t.isBlock(u)||i[u.nodeName.toLowerCase()])return Q.none();d=u}return nD(d)?Q.none():n&&d?Q.some(lM(d,0)):Q.none()},cL=(t,r,n,o)=>{var a,l;let i=t.getRoot(),s,d=!1,u=n?o.startContainer:o.endContainer,c=n?o.startOffset:o.endOffset,m=nx(u)&&c===u.childNodes.length,f=t.schema.getNonEmptyElements(),g=n;if(ou(u))return Q.none();if(nx(u)&&c>u.childNodes.length-1&&(g=!1),nL(u)&&(u=i,c=0),u===i){if(g&&(s=u.childNodes[c>0?c-1:0])&&(ou(s)||f[s.nodeName]||nN(s)))return Q.none();if(u.hasChildNodes()){if(c=Math.min(!g&&c>0?c-1:c,u.childNodes.length-1),c=nO(u=u.childNodes[c])&&m?u.data.length:0,!r&&u===i.lastChild&&nN(u)||((t,r)=>{let n=r;for(;n&&n!==t;){if(n0(n))return!0;n=n.parentNode}return!1})(i,u)||ou(u))return Q.none();if(u.hasChildNodes()&&!nN(u)){s=u;let p=new ny(u,i);do{if(n0(s)||ou(s)){d=!1;break}if(nO(s)&&s.data.length>0){c=g?0:s.data.length,u=s,d=!0;break}if(f[s.nodeName.toLowerCase()]&&!n1(s)){c=t.nodeIndex(s),u=s.parentNode,g||c++,d=!0;break}}while(s=g?p.next():p.prev())}}}return r&&(nO(u)&&0===c&&cD(t,m,r,!0,u).each(t=>{u=t.container(),c=t.offset(),d=!0}),nx(u)&&((s=u.childNodes[c])||(s=u.childNodes[c-1]),!s||!nM(s)||"A"===(null===(l=(a=s).previousSibling)||void 0===l?void 0:l.nodeName)||cB(t,s,!1)||cB(t,s,!0)||cD(t,m,r,!0,s).each(t=>{u=t.container(),c=t.offset(),d=!0}))),g&&!r&&nO(u)&&c===u.data.length&&cD(t,m,r,!1,u).each(t=>{u=t.container(),c=t.offset(),d=!0}),d&&u?Q.some(lM(u,c)):Q.none()},cP=(t,r)=>{let n=r.collapsed,o=r.cloneRange(),a=lM.fromRangeStart(r);return cL(t,n,!0,o).each(t=>{n&&lM.isAbove(a,t)||o.setStart(t.container(),t.offset())}),n||cL(t,n,!1,o).each(t=>{o.setEnd(t.container(),t.offset())}),n&&o.collapse(!0),cR(r,o)?Q.none():Q.some(o)},cM=(t,r)=>t.splitText(r),cI=t=>{let r=t.startContainer,n=t.startOffset,o=t.endContainer,a=t.endOffset;if(r===o&&nO(r)){if(n>0&&n<r.data.length){if(r=(o=cM(r,n)).previousSibling,a>n){a-=n;let l=cM(o,a).previousSibling;r=o=l,a=l.data.length,n=0}else a=0}}else if(nO(r)&&n>0&&n<r.data.length&&(r=cM(r,n),n=0),nO(o)&&a>0&&a<o.data.length){let i=cM(o,a).previousSibling;o=i,a=i.data.length}return{startContainer:r,startOffset:n,endContainer:o,endOffset:a}},cF=t=>({walk:(r,n)=>uG(t,r,n),split:cI,expand(r,n={type:"word"}){if("word"===n.type){let o=uK(t,r,[{inline:"span"}]),a=t.createRng();return a.setStart(o.startContainer,o.startOffset),a.setEnd(o.endContainer,o.endOffset),a}return r},normalize:r=>cP(t,r).fold(Y,t=>(r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),!0))});cF.compareRanges=cR,cF.getCaretRangeFromPoint=cN,cF.getSelectedNode=lb,cF.getNode=l$;let c0=((t,r)=>{let n=r=>{let n=(t=>{let r=t.dom;return r0(t)?r.getBoundingClientRect().height:r.offsetHeight})(r);if(n<=0||null===n){let o=rV(r,t);return parseFloat(o)||0}return n},o=(t,r)=>eu(r,(r,n)=>{let o=rV(t,n),a=void 0===o?0:parseInt(o,10);return isNaN(a)?r:r+a},0);return{set(r,n){if(!P(n)&&!n.match(/^[0-9]+$/))throw Error(t+".set accepts only positive integer values. Value was "+n);let o=r.dom;r3(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max(t,r,n){let a=o(t,n);return r>a?r-a:0}}})("height"),cU=()=>rc(document),c1=(t,r)=>t.view(r).fold(z([]),r=>{let n=t.owner(r),o=c1(t,n);return[r].concat(o)});var cz=Object.freeze({__proto__:null,view(t){var r;return(t.dom===document?Q.none():Q.from(null===(r=t.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(rc)},owner:t=>r$(t)});let c6=t=>"textarea"===t6(t),cj=(t,r)=>{var n;let o=(t=>{let r=t.dom.ownerDocument,n=r.body,o=r.defaultView,a=r.documentElement;if(n===t.dom)return nu(n.offsetLeft,n.offsetTop);let l=nc(null==o?void 0:o.pageYOffset,a.scrollTop),i=nc(null==o?void 0:o.pageXOffset,a.scrollLeft),s=nc(a.clientTop,n.clientTop),d=nc(a.clientLeft,n.clientLeft);return nm(t).translate(i-d,l-s)})(t),a=(n=t,c0.get(n));return{element:t,bottom:o.top+a,height:a,pos:o,cleanup:r}},c4=(t,r,n,o)=>{c9(t,(a,l)=>c7(t,r,n,o),n)},cH=(t,r,n,o,a)=>{var l,i;let s={elm:o.element.dom,alignToTop:a};l=t,i=s,l.dispatch("ScrollIntoView",i).isDefaultPrevented()||(n(r,nf(r).top,o,a),((t,r)=>{t.dispatch("AfterScrollIntoView",r)})(t,s))},c7=(t,r,n,o)=>{let a=rc(t.getBody()),l=rc(t.getDoc());a.dom.offsetWidth;let i=((t,r)=>{let n=((t,r)=>{let n=rS(t);if(0===n.length||c6(t))return{element:t,offset:r};if(r<n.length&&!c6(n[r]))return{element:n[r],offset:0};{let o=n[n.length-1];return c6(o)?{element:t,offset:r}:"img"===t6(o)?{element:o,offset:1}:t3(o)?{element:o,offset:n3(o).length}:{element:o,offset:rS(o).length}}})(t,r),o=rs('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return rY(n.element,o),cj(o,()=>nr(o))})(rc(n.startContainer),n.startOffset);cH(t,l,r,i,o),i.cleanup()},c3=(t,r,n,o)=>{var a;let l=rc(t.getDoc());cH(t,l,n,cj(rc(r),I),o)},c9=(t,r,n)=>{let o=n.startContainer,a=n.startOffset,l=n.endContainer,i=n.endOffset;r(rc(o),rc(l));let s=t.dom.createRng();s.setStart(o,a),s.setEnd(l,i),t.selection.setRng(n)},c2=(t,r)=>t.element.dom.scrollIntoView({block:r?"start":"end"}),c5=(t,r,n,o)=>{let a=r+t,l=n.pos.top,i=n.bottom,s=i-l>=r;l<t?c2(n,!1!==o):l>a?c2(n,s?!1!==o:!0===o):i>a&&!s&&c2(n,!0===o)},cV=(t,r,n,o)=>{let a=ry(t).dom.innerHeight;c5(r,a,n,o)},cq=(t,r,n,o)=>{let a=ry(t).dom.innerHeight;c5(r,a,n,o);let l=(t=>{let r=cU(),n=nf(r),o=((t,r)=>{let n=r.owner(t);return c1(r,n)})(t,cz),a=nm(t),l=ed(o,(t,r)=>{let n=nm(r);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return nu(l.left+a.left+n.left,l.top+a.top+n.top)})(n.element),i=nh(window);l.top<i.y?ng(n.element,!1!==o):l.top>i.bottom&&ng(n.element,!0===o)},cW=(t,r,n)=>c4(t,cV,r,n),cK=(t,r,n)=>c3(t,r,cV,n),cG=(t,r,n)=>c4(t,cq,r,n),cY=(t,r,n)=>c3(t,r,cq,n),cX=(t,r,n)=>{(t.inline?cW:cG)(t,r,n)},cQ=t=>t.dom.focus(),cJ=t=>{let r=rL(t).dom;return t.dom===r.activeElement},cZ=(t=cU())=>Q.from(t.dom.activeElement).map(rc),me=(t,r)=>{let n=t3(r)?n3(r).length:rS(r).length+1;return t>n?n:t<0?0:t},mt=t=>cx.range(t.start,me(t.soffset,t.start),t.finish,me(t.foffset,t.finish)),mr=(t,r)=>!n_(r.dom)&&(rv(t,r)||rh(t,r)),mn=t=>r=>mr(t,r.start)&&mr(t,r.finish),mo=t=>cx.range(rc(t.startContainer),t.startOffset,rc(t.endContainer),t.endOffset),ma=t=>{let r=document.createRange();try{return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),Q.some(r)}catch(n){return Q.none()}},ml=t=>{var r,n;let o=t.inline||tT.browser.isFirefox()?(r=rc(t.getBody()),(t=>{let r=t.getSelection();return(r&&0!==r.rangeCount?Q.from(r.getRangeAt(0)):Q.none()).map(mo)})(ry(r).dom).filter(mn(r))):Q.none();t.bookmark=o.isSome()?o:t.bookmark},mi=t=>(t.bookmark?t.bookmark:Q.none()).bind(r=>{var n,o;return n=rc(t.getBody()),o=r,Q.from(o).filter(mn(n)).map(mt)}).bind(ma),ms={isEditorUIElement(t){let r=t.className.toString();return -1!==r.indexOf("tox-")||-1!==r.indexOf("mce-")}},md={setEditorTimeout(t,r,n){var o,a;return o=()=>{t.removed||r()},P(a=n)||(a=0),setTimeout(o,a)},setEditorInterval(t,r,n){var o,a;let l=(o=()=>{t.removed?clearInterval(l):r()},a=n,P(a)||(a=0),setInterval(o,a));return l}},mu,mc=a1.DOM,mm=t=>{let r=t.classList;return void 0!==r&&(r.contains("tox-edit-area")||r.contains("tox-edit-area__iframe")||r.contains("mce-content-body"))},mf=(t,r)=>{let n=iZ(t),o=mc.getParent(r,r=>{var o;return nx(o=r)&&ms.isEditorUIElement(o)||!!n&&t.dom.is(r,n)});return null!==o},mg=t=>{try{let r=rL(rc(t.getElement()));return cZ(r).fold(()=>document.body,t=>t.dom)}catch(n){return document.body}},mp=(t,r)=>{let n=r.editor;(t=>{let r=aV(()=>{ml(t)},0);t.on("init",()=>{var n,o;t.inline&&((t,r)=>{let n=()=>{r.throttle()};a1.DOM.bind(document,"mouseup",n),t.on("remove",()=>{a1.DOM.unbind(document,"mouseup",n)})})(t,r),n=t,o=r,((t,r)=>{t.on("mouseup touchend",t=>{r.throttle()})})(n,o),n.on("keyup NodeChange AfterSetSelectionRange",t=>{var r;"nodechange"===(r=t).type&&r.selectionChange||ml(n)})}),t.on("remove",()=>{r.cancel()})})(n);let o=(t,r)=>{s0(t)&&!0!==t.inline&&r(rc(t.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{let r=t.focusedEditor;mm(mg(n))&&o(n,rn),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{md.setEditorTimeout(n,()=>{let r=t.focusedEditor;mm(mg(n))&&r===n||o(n,ra),mf(n,mg(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),mu||(mu=r=>{let n=t.activeEditor;n&&rI(r).each(r=>{let o=r;o.ownerDocument===document&&(o===document.body||mf(n,o)||t.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},mc.bind(document,"focusin",mu))},mh=(t,r)=>{t.focusedEditor===r.editor&&(t.focusedEditor=null),!t.activeEditor&&mu&&(mc.unbind(document,"focusin",mu),mu=null)},mv=(t,r)=>{var n,o,a;(n=rc(t.getBody()),((a=o=r).collapsed?Q.from(l$(a.startContainer,a.startOffset)).map(rc):Q.none()).bind(t=>nX(t)?Q.some(t):rv(n,t)?Q.none():Q.some(n))).bind(t=>dH(t.dom)).fold(()=>{t.selection.normalize()},r=>t.selection.setRng(r.toRange()))},mb=t=>{if(t.setActive)try{t.setActive()}catch(r){t.focus()}else t.focus()},m$=t=>{var r;return t.inline?(t=>{var r,n;let o=t.getBody();return o&&(r=rc(o),cJ(r)||cZ(rL(n=r)).filter(t=>n.dom.contains(t.dom)).isSome())})(t):D((r=t).iframeElement)&&cJ(rc(r.iframeElement))},my=t=>t.editorManager.setActive(t),mC=(t,r,n,o,a)=>{let l=n?r.startContainer:r.endContainer,i=n?r.startOffset:r.endOffset;return Q.from(l).map(rc).map(t=>o&&r.collapsed?t:rN(t,a(t,i)).getOr(t)).bind(t=>t7(t)?Q.some(t):rC(t).filter(t7)).map(t=>t.dom).getOr(t)},m_=(t,r,n=!1)=>mC(t,r,!0,n,(t,r)=>Math.min(rO(t),r)),mx=(t,r,n=!1)=>mC(t,r,!1,n,(t,r)=>r>0?r-1:r),mk=(t,r)=>{let n=t;for(;t&&nO(t)&&0===t.length;)t=r?t.nextSibling:t.previousSibling;return t||n},mw=(t,r)=>eo(r,r=>{let n=t.dispatch("GetSelectionRange",{range:r});return n.range!==r?n.range:r}),m8=["img","br"],mE=t=>{var r;let n=n9(t).filter(t=>0!==t.trim().length||t.indexOf("\xa0")>-1).isSome();return n||er(m8,t6(t))||(r=t,tH(r)&&"false"===tK(r,"contenteditable"))},mS="[data-mce-autocompleter]",mN=(t,r)=>{var n;if(mR(rc(t.getBody())).isNone()){let o=rs('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());rJ(o,rc(r.extractContents())),r.insertNode(o.dom),rC(o).each(t=>t.dom.normalize()),((t,r)=>{let n=t=>{let o=rS(t);for(let a=o.length-1;a>=0;a--){let l=o[a];if(r(l))return Q.some(l);let i=n(l);if(i.isSome())return i}return Q.none()};return n(t)})(n=o,mE).map(r=>{var n;t.selection.setCursorLocation(r.dom,"img"===t6(n=r)?1:n9(n).fold(()=>rS(n).length,t=>t.length))})}},mR=t=>rj(t,mS),mA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},mO=(t,r,n)=>{let o=n?"lastChild":"firstChild",a=n?"prev":"next";if(t[o])return t[o];if(t!==r){let l=t[a];if(l)return l;for(let i=t.parent;i&&i!==r;i=i.parent)if(l=i[a])return l}},mT=t=>{var r;let n=null!==(r=t.value)&&void 0!==r?r:"";if(!oR(n))return!1;let o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},mB=t=>{let r="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||r};class mD{static create(t,r){let n=new mD(t,mA[t]||1);return r&&eS(r,(t,r)=>{n.attr(r,t)}),n}constructor(t,r){this.name=t,this.type=r,1===r&&(this.attributes=[],this.attributes.map={})}replace(t){return t.parent&&t.remove(),this.insert(t,this),this.remove(),this}attr(t,r){let n=this;if(!E(t))return D(t)&&eS(t,(t,r)=>{n.attr(r,t)}),n;let o=n.attributes;if(o){if(void 0!==r){if(null===r){if(t in o.map){delete o.map[t];let a=o.length;for(;a--;)if(o[a].name===t)return o.splice(a,1),n}return n}if(t in o.map){let l=o.length;for(;l--;)if(o[l].name===t){o[l].value=r;break}}else o.push({name:t,value:r});return o.map[t]=r,n}return o.map[t]}}clone(){let t=new mD(this.name,this.type),r=this.attributes;if(r){let n=[];n.map={};for(let o=0,a=r.length;o<a;o++){let l=r[o];"id"!==l.name&&(n[n.length]={name:l.name,value:l.value},n.map[l.name]=l.value)}t.attributes=n}return t.value=this.value,t}wrap(t){return this.parent&&(this.parent.insert(t,this),t.append(this)),this}unwrap(){for(let t=this.firstChild;t;){let r=t.next;this.insert(t,this,!0),t=r}this.remove()}remove(){let t=this,r=t.parent,n=t.next,o=t.prev;return r&&(r.firstChild===t?(r.firstChild=n,n&&(n.prev=null)):o&&(o.next=n),r.lastChild===t?(r.lastChild=o,o&&(o.next=null)):n&&(n.prev=o),t.parent=t.next=t.prev=null),t}append(t){let r=this;t.parent&&t.remove();let n=r.lastChild;return n?(n.next=t,t.prev=n,r.lastChild=t):r.lastChild=r.firstChild=t,t.parent=r,t}insert(t,r,n){t.parent&&t.remove();let o=r.parent||this;return n?(r===o.firstChild?o.firstChild=t:r.prev&&(r.prev.next=t),t.prev=r.prev,t.next=r,r.prev=t):(r===o.lastChild?o.lastChild=t:r.next&&(r.next.prev=t),t.next=r.next,t.prev=r,r.next=t),t.parent=o,t}getAll(t){let r=[];for(let n=this.firstChild;n;n=mO(n,this))n.name===t&&r.push(n);return r}children(){let t=[];for(let r=this.firstChild;r;r=r.next)t.push(r);return t}empty(){let t=this;if(t.firstChild){let r=[];for(let n=t.firstChild;n;n=mO(n,t))r.push(n);let o=r.length;for(;o--;){let a=r[o];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,r={},n){var o;let a=this.firstChild;if(mB(this))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||mB(a))return!1}if(8===a.type||3===a.type&&!mT(a)||3===a.type&&a.parent&&r[a.parent.name]&&oR(null!==(o=a.value)&&void 0!==o?o:"")||n&&n(a))return!1}while(a=mO(a,this));return!0}walk(t){return mO(this,null,t)}}let mL=(t,r,n=0)=>{var o,a;let l=t.toLowerCase();if(-1!==l.indexOf("[if ",n)&&(o=l,a=n,/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(a)))){let i=l.indexOf("[endif]",n);return l.indexOf(">",i)}if(r){let s=l.indexOf(">",n);return -1!==s?s:l.length}{let d=/--!?>/g;d.lastIndex=n;let u=d.exec(t);return u?u.index+u[0].length:l.length}},mP=(t,r,n)=>{let o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,a=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,l=t.getVoidElements(),i=1,s=n;for(;0!==i;)for(o.lastIndex=s;;){let d=o.exec(r);if(null===d)return s;if("!"===d[1]){s=eW(d[2],"--")?mL(r,!1,d.index+3):mL(r,!0,d.index+1);break}{a.lastIndex=o.lastIndex;let u=a.exec(r);if(A(u)||u.index!==o.lastIndex)continue;"/"===d[1]?i-=1:eP(l,d[2])||(i+=1),s=o.lastIndex+u[0].length;break}}return s},mM=(t,r)=>{let n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=t.schema,a=((t,r)=>{let n=RegExp(["\\s?("+t.join("|")+')="[^"]+"'].join("|"),"gi");return r.replace(n,"")})(t.getTempAttrs(),r),l=o.getVoidElements(),i;for(;i=n.exec(a);){let s=n.lastIndex,d=i[0].length,u;u=l[i[1]]?s:mP(o,a,s),a=a.substring(0,s-d)+a.substring(u),n.lastIndex=s-d}return oa(a)},mI=mM,mF=t=>{let r=nb(t,"[data-mce-bogus]");ea(r,t=>{"all"===tK(t,"data-mce-bogus")?nr(t):nW(t)?(rY(t,ru("\uFEFF")),nr(t)):nn(t)})},m0=t=>{let r=nb(t,"input");ea(r,t=>{tX(t,"name")})},mU=(t,r,n)=>{let o;return o="raw"===r.format?tP.trim(mI(t.serializer,n.innerHTML)):"text"===r.format?((t,r)=>{var n;let o=t.getDoc(),a=rL(rc(t.getBody())),l=rd("div",o);tq(l,"data-mce-bogus","all"),r5(l,{position:"fixed",left:"-9999999px",top:"0"}),nl(l,r.innerHTML),mF(l),m0(l);let i=(n=a,rT(n)?n:rc(r$(n).dom.body));rJ(i,l);let s=oa(l.dom.innerText);return nr(l),s})(t,n):"tree"===r.format?t.serializer.serialize(n,r):((t,r)=>{let n=i_(t),o=RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return r.replace(o,"")})(t,t.serializer.serialize(n,r)),"text"!==r.format&&!nJ(rc(n))&&E(o)?tP.trim(o):o},m1=tP.makeMap,mz=t=>{let r=[],n=(t=t||{}).indent,o=m1(t.indent_before||""),a=m1(t.indent_after||""),l=au.getEncodeFunc(t.entity_encoding||"raw",t.entities),i="xhtml"!==t.element_format;return{start(t,s,d){if(n&&o[t]&&r.length>0){let u=r[r.length-1];u.length>0&&"\n"!==u&&r.push("\n")}if(r.push("<",t),s)for(let c=0,m=s.length;c<m;c++){let f=s[c];r.push(" ",f.name,'="',l(f.value,!0),'"')}if(r[r.length]=!d||i?">":" />",d&&n&&a[t]&&r.length>0){let g=r[r.length-1];g.length>0&&"\n"!==g&&r.push("\n")}},end(t){let o;r.push("</",t,">"),n&&a[t]&&r.length>0&&(o=r[r.length-1]).length>0&&"\n"!==o&&r.push("\n")},text(t,n){t.length>0&&(r[r.length]=n?t:l(t))},cdata(t){r.push("<![CDATA[",t,"]]>")},comment(t){r.push("<!--",t,"-->")},pi(t,o){o?r.push("<?",t," ",l(o),"?>"):r.push("<?",t,"?>"),n&&r.push("\n")},doctype(t){r.push("<!DOCTYPE",t,">",n?"\n":"")},reset(){r.length=0},getContent:()=>r.join("").replace(/\n$/,"")}},m6=(t={},r=ax())=>{let n=mz(t);return t.validate=!("validate"in t)||t.validate,{serialize(o){let a=t.validate,l={3(t){var r;n.text(null!==(r=t.value)&&void 0!==r?r:"",t.raw)},8(t){var r;n.comment(null!==(r=t.value)&&void 0!==r?r:"")},7(t){n.pi(t.name,t.value)},10(t){var r;n.doctype(null!==(r=t.value)&&void 0!==r?r:"")},4(t){var r;n.cdata(null!==(r=t.value)&&void 0!==r?r:"")},11(t){let r=t;if(r=r.firstChild)do i(r);while(r=r.next)}};n.reset();let i=t=>{var o;let s=l[t.type];if(s)s(t);else{let d=t.name,u=d in r.getVoidElements(),c=t.attributes;if(a&&c&&c.length>1){let m=[];m.map={};let f=r.getElementRule(t.name);if(f){for(let g=0,p=f.attributesOrder.length;g<p;g++){let h=f.attributesOrder[g];if(h in c.map){let v=c.map[h];m.map[h]=v,m.push({name:h,value:v})}}for(let b=0,$=c.length;b<$;b++){let y=c[b].name;if(!(y in m.map)){let C=c.map[y];m.map[y]=C,m.push({name:y,value:C})}}c=m}}if(n.start(d,c,u),!u){let _=t.firstChild;if(_){"pre"!==d&&"textarea"!==d||3!==_.type||"\n"!==(null===(o=_.value)||void 0===o?void 0:o[0])||n.text("\n",!0);do i(_);while(_=_.next)}n.end(d)}}};return 1!==o.type||t.inner?3===o.type?l[3](o):l[11](o):i(o),n.getContent()}}},mj=new Set;ea(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{mj.add(t)});let m4=["font","text-decoration","text-emphasis"],mH=(t,r)=>e8(t.parseStyle(t.getAttrib(r,"style"))),m7=(t,r,n)=>{let o=mH(t,r),a=mH(t,n),l=o=>{var a,l;let i=null!==(a=t.getStyle(r,o))&&void 0!==a?a:"",s=null!==(l=t.getStyle(n,o))&&void 0!==l?l:"";return eJ(i)&&eJ(s)&&i!==s};return en(o,t=>{let r=r=>en(r,r=>r===t);if(!r(a)&&r(m4)){let n=es(a,t=>en(m4,r=>eW(t,r)));return en(n,l)}return l(t)})},m3=(t,r,n)=>Q.from(n.container()).filter(nO).exists(o=>r(o.data.charAt(n.offset()+(t?0:-1)))),m9=V(m3,!0,ur),m2=V(m3,!1,ur),m5=t=>{let r=t.container();return nO(r)&&(0===r.data.length||oo(r.data)&&ce.isBookmarkNode(r.parentNode))},mV=(t,r)=>n=>dh(t?0:-1,n).filter(r).isSome(),mq=t=>nI(t)&&"block"===rV(rc(t),"display"),mW=t=>{var r;return n0(t)&&!(nx(r=t)&&"all"===r.getAttribute("data-mce-bogus"))},mK=mV(!0,mq),mG=mV(!1,mq),mY=mV(!0,nz),mX=mV(!1,nz),mQ=mV(!0,nN),mJ=mV(!1,nN),mZ=mV(!0,mW),fe=mV(!1,mW),ft=(t,r)=>{var n,o,a;return n=t,o=r,a=Y,rv(o,n)?rx(n,t=>a(t)||rh(t,o)).slice(0,-1):[]},fr=(t,r)=>[t].concat(ft(t,r)),fn=(t,r,n)=>dz(t,r,n,m5),fo=(t,r)=>em(fr(rc(r.container()),t),nV),fa=(t,r,n)=>fn(t,r.dom,n).forall(t=>fo(r,n).fold(()=>!dp(t,n,r.dom),o=>!dp(t,n,r.dom)&&rv(o,rc(t.container())))),fl=(t,r,n)=>fo(r,n).fold(()=>fn(t,r.dom,n).forall(t=>!dp(t,n,r.dom)),r=>fn(t,r.dom,n).isNone()),fi=V(fl,!1),fs=V(fl,!0),fd=V(fa,!1),fu=V(fa,!0),fc=t=>dw(t).exists(nW),fm=(t,r,n)=>{let o=es(fr(rc(n.container()),r),nV),a=e_(o).getOr(r);return dU(t,a.dom,n).filter(fc)},ff=(t,r)=>dw(r).exists(nW)||fm(!0,t,r).isSome(),fg=(t,r)=>{var n;return(n=r,Q.from(n.getNode(!0)).map(rc)).exists(nW)||fm(!1,t,r).isSome()},fp=V(fm,!1),fh=V(fm,!0),fv=t=>lM.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),fb=(t,r)=>{let n=es(fr(rc(r.container()),t),nV);return e_(n).getOr(t)},f$=(t,r)=>fv(r)?m2(r):m2(r)||d4(fb(t,r).dom,r).exists(m2),fy=(t,r)=>fv(r)?m9(r):m9(r)||dj(fb(t,r).dom,r).exists(m9),fC=t=>dw(t).bind(t=>rz(t,t7)).exists(t=>{var r;return r=rV(t,"white-space"),er(["pre","pre-wrap"],r)}),f_=(t,r)=>n=>{var o;return o=new ny(n,t)[r](),D(o)&&n0(o)&&dn(o)},fx=(t,r)=>{var n,o,a,l,i,s;return!fC(r)&&(n=t,o=r,a=n,l=o,d4(a.dom,l).isNone()||(i=n,s=o,dj(i.dom,s).isNone())||fi(n,o)||fs(n,o)||fg(n,o)||ff(n,o)||f$(t,r)||fy(t,r))},fk=(t,r)=>!fC(r)&&(fi(t,r)||fd(t,r)||fg(t,r)||f$(t,r)||((t,r)=>{let n=d4(t.dom,r).getOr(r),o=f_(t.dom,"prev");return r.isAtStart()&&(o(r.container())||o(n.container()))})(t,r)),fw=(t,r)=>!fC(r)&&(fs(t,r)||fu(t,r)||ff(t,r)||fy(t,r)||((t,r)=>{let n=dj(t.dom,r).getOr(r),o=f_(t.dom,"next");return r.isAtEnd()&&(o(r.container())||o(n.container()))})(t,r)),f8=(t,r)=>fk(t,r)||fw(t,(t=>{let r=t.container(),n=t.offset();return nO(r)&&n<r.data.length?lM(r,n+1):t})(r)),fE=(t,r)=>ut(t.charAt(r)),fS=(t,r)=>ur(t.charAt(r)),fN=(t,r,n)=>{let o=r.data,a=lM(r,0);return n||!fE(o,0)||f8(t,a)?!!(n&&fS(o,0)&&fk(t,a))&&(r.data="\xa0"+o.slice(1),!0):(r.data=" "+o.slice(1),!0)},fR=(t,r,n)=>{let o=r.data,a=lM(r,o.length-1);return n||!fE(o,o.length-1)||f8(t,a)?!!(n&&fS(o,o.length-1)&&fw(t,a))&&(r.data=o.slice(0,-1)+"\xa0",!0):(r.data=o.slice(0,-1)+" ",!0)},fA=(t,r)=>{let n=r.container();if(!nO(n))return Q.none();if((t=>{let r=t.container();return nO(r)&&eq(r.data,"\xa0")})(r)){let o=fN(t,n,!1)||(t=>{let r=t.data,n=(t=>{let r=t.split("");return eo(r,(t,n)=>ut(t)&&n>0&&n<r.length-1&&un(r[n-1])&&un(r[n+1])?" ":t).join("")})(r);return n!==r&&(t.data=n,!0)})(n)||fR(t,n,!1);return tF(o,r)}if(f8(t,r)){let a=fN(t,n,!0)||fR(t,n,!0);return tF(a,r)}return Q.none()},fO=(t,r,n)=>{if(0===n)return;let o=rc(t),a=r1(o,nV).getOr(o),l=t.data.slice(r,r+n),i=r+n>=t.data.length&&fw(a,lM(t,t.data.length)),s=0===r&&fk(a,lM(t,0));t.replaceData(r,n,oT(l,4,s,i))},fT=(t,r)=>{let n=t.data.slice(r),o=n.length-eX(n).length;fO(t,r,o)},fB=(t,r)=>{let n=t.data.slice(0,r),o=n.length-eQ(n).length;fO(t,r-o,o)},fD=(t,r,n,o=!0)=>{let a=eQ(t.data).length,l=o?t:r,i=o?r:t;return o?l.appendData(i.data):l.insertData(0,i.data),nr(rc(i)),n&&fT(l,a),l},fL=(t,r)=>((t,r)=>{let n=t.container(),o=t.offset();return!lM.isTextPosition(t)&&n===r.parentNode&&o>lM.before(r).offset()})(r,t)?lM(r.container(),r.offset()-1):r,fP=t=>{var r;return o8(t.previousSibling)?Q.some(nO(r=t.previousSibling)?lM(r,r.data.length):lM.after(r)):t.previousSibling?d7(t.previousSibling):Q.none()},fM=t=>{var r;return o8(t.nextSibling)?Q.some(nO(r=t.nextSibling)?lM(r,0):lM.before(r)):t.nextSibling?dH(t.nextSibling):Q.none()},fI=(t,r,n)=>{var o,a,l,i,s,d,u;return(o=t,a=r,l=n,o?(i=a,fM(s=l).orThunk(()=>fP(s)).orThunk(()=>{var t,r;return t=i,r=s,dj(t,lM.after(r)).orThunk(()=>d4(t,lM.before(r)))})):(d=a,fP(u=l).orThunk(()=>fM(u)).orThunk(()=>{var t,r;return t=d,r=u,Q.from(r.previousSibling?r.previousSibling:r.parentNode).bind(r=>d4(t,lM.before(r))).orThunk(()=>dj(t,lM.after(r)))}))).map(V(fL,n))},fF=(t,r,n)=>{n.fold(()=>{t.focus()},n=>{t.selection.setRng(n.toRange(),r)})},f0=(t,r)=>r&&eP(t.schema.getBlockElements(),t6(r)),fU=t=>{if(oM(t)){let r=rs('<br data-mce-bogus="1">');return nt(t),rJ(t,r),Q.some(lM.before(r.dom))}return Q.none()},f1=(t,r,n,o=!0)=>{var a,l,i;let s=fI(r,t.getBody(),n.dom),d=r1(n,V(f0,t),(a=t.getBody(),t=>t.dom===a)),u=((t,r,n)=>{var o,a,l,i;let s=rk(t).filter(t3),d=rw(t).filter(t3);return nr(t),(o=s,a=d,l=r,i=(t,r,o)=>{let a=t.dom,l=r.dom,i=a.data.length;return fD(a,l,n),o.container()===l?lM(a,i):o},o.isSome()&&a.isSome()&&l.isSome()?Q.some(i(o.getOrDie(),a.getOrDie(),l.getOrDie())):Q.none()).orThunk(()=>(n&&(s.each(t=>fB(t.dom,t.dom.length)),d.each(t=>fT(t.dom,0))),r))})(n,s,(l=t,i=n,eP(l.schema.getTextInlineElements(),t6(i))));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):d.bind(fU).fold(()=>{o&&fF(t,r,u)},n=>{o&&fF(t,r,Q.some(n))})},fz=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,f6=(t,r)=>rg(rc(r),iH(t))&&!o3(t.schema,r)&&t.dom.isEditable(r),fj=t=>{var r,n;return"rtl"===a1.DOM.getStyle(t,"direction",!0)||(n=null!==(r=t.textContent)&&void 0!==r?r:"",fz.test(n))},f4=(t,r,n)=>{var o,a,l;let i=(o=t,a=r,l=n,es(a1.DOM.getParents(l.container(),"*",a),o));return Q.from(i[i.length-1])},fH=(t,r)=>{let n=r.container(),o=r.offset();return t?od(n)?nO(n.nextSibling)?lM(n.nextSibling,0):lM.after(n):om(r)?lM(n,o+1):r:od(n)?nO(n.previousSibling)?lM(n.previousSibling,n.previousSibling.data.length):lM.before(n):of(r)?lM(n,o-1):r},f7=V(fH,!0),f3=V(fH,!1),f9=(t,r)=>{let n=t=>t.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(r),t.off("beforeinput input",n)},f2=t=>f9(t,"Delete"),f5=t=>nK(t)||nY(t),fV=(t,r)=>{var n;return rv(t,r)?rz(r,f5,(n=t,t=>tM(rC(t),n,rh))):Q.none()},fq=(t,r=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!r})},fW=(t,r,n)=>tI(dH(n),d7(n),(o,a)=>{let l=fH(!0,o),i=fH(!1,a),s=fH(!1,r);return t?dj(n,s).exists(t=>t.isEqual(i)&&r.isEqual(l)):d4(n,s).exists(t=>t.isEqual(l)&&r.isEqual(i))}).getOr(!0),fK=t=>{var r;return(8===tj(r=t)||"#comment"===t6(r)?rk(t):rA(t)).bind(fK).orThunk(()=>Q.some(t))},fG=(t,r,n,o=!0)=>{var a,l;r.deleteContents();let i=fK(n).getOr(n),s=rc(null!==(a=t.dom.getParent(i.dom,t.dom.isBlock))&&void 0!==a?a:n.dom);if(s.dom===t.getBody()?fq(t,o):oM(s)&&(or(s),o&&t.selection.setCursorLocation(s.dom,0)),!rh(n,s)){let d=tM(rC(s),n)?[]:rC(l=s).map(rS).map(t=>es(t,t=>!rh(l,t))).getOr([]);ea(d.concat(rS(n)),t=>{rh(t,s)||rv(t,s)||!oM(t)||nr(t)})}},fY=t=>nb(t,"td,th"),fX=(t,r)=>({start:t,end:r}),fQ=lZ([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),fJ=(t,r)=>r4(rc(t),"td,th",r),fZ=t=>!rh(t.start,t.end),ge=(t,r)=>ug(t.start,r).bind(n=>ug(t.end,r).bind(t=>tF(rh(n,t),n))),gt=t=>r=>ge(r,t).map(t=>{var n,o,a;return n=r,o=t,a=fY(t),{rng:n,table:o,cells:a}}),gr=(t,r,n,o)=>{if(n.collapsed||!t.forall(fZ))return Q.none();if(r.isSameTable){let a=t.bind(gt(o));return Q.some({start:a,end:a})}{var l,i;let s=fJ(n.startContainer,o),d=fJ(n.endContainer,o),u=s.bind((l=o,t=>ug(t,l).bind(r=>ex(fY(r)).map(r=>fX(t,r))))).bind(gt(o)),c=d.bind((i=o,t=>ug(t,i).bind(r=>e_(fY(r)).map(r=>fX(r,t))))).bind(gt(o));return Q.some({start:u,end:c})}},gn=(t,r)=>ef(t,t=>rh(t,r)),go=t=>tI(gn(t.cells,t.rng.start),gn(t.cells,t.rng.end),(r,n)=>t.cells.slice(r,n+1)),ga=(t,r)=>{let{startTable:n,endTable:o}=r,a=t.cloneRange();return n.each(t=>a.setStartAfter(t.dom)),o.each(t=>a.setEndBefore(t.dom)),a},gl=(t,r)=>{var n,o,a,l,i,s,d,u,c,m,f,g;let p=(n=t,t=>rh(n,t)),h=((t,r)=>{let n=fJ(t.startContainer,r),o=fJ(t.endContainer,r);return tI(n,o,fX)})(r,p),v=((t,r)=>{let n=t=>ug(rc(t),r),o=n(t.startContainer),a=n(t.endContainer),l=o.isSome(),i=a.isSome(),s=tI(o,a,rh).getOr(!1);return{startTable:o,endTable:a,isStartInTable:l,isEndInTable:i,isSameTable:s,isMultiTable:!s&&l&&i}})(r,p);return(o=h,a=r,l=p,o.exists(t=>{var r,n;return r=t,n=l,!fZ(r)&&ge(r,n).exists(t=>{let r=t.dom.rows;return 1===r.length&&1===r[0].cells.length})&&uv(t.start,a)}))?h.map(t=>fQ.singleCellTable(r,t.start)):v.isMultiTable?(i=h,s=v,d=r,u=p,gr(i,s,d,u).bind(({start:t,end:r})=>{let n=t.bind(go).getOr([]),o=r.bind(go).getOr([]);if(n.length>0&&o.length>0){let a=ga(d,s);return Q.some(fQ.multiTable(n,o,a))}return Q.none()})):(c=h,m=v,f=r,g=p,gr(c,m,f,g).bind(({start:t,end:r})=>t.or(r)).bind(t=>{let{isSameTable:r}=m,n=go(t).getOr([]);if(r&&t.cells.length===n.length)return Q.some(fQ.fullTable(t.table));if(n.length>0){if(r)return Q.some(fQ.partialTable(n,Q.none()));{let o=ga(f,m);return Q.some(fQ.partialTable(n,Q.some({...m,rng:o})))}}return Q.none()}))},gi=t=>ea(t,t=>{tX(t,"contenteditable"),or(t)}),gs=(t,r,n,o)=>{let a=n.cloneRange();o?(a.setStart(n.startContainer,n.startOffset),a.setEndAfter(r.dom.lastChild)):(a.setStartBefore(r.dom.firstChild),a.setEnd(n.endContainer,n.endOffset)),gm(t,a,r,!1).each(t=>t())},gd=t=>{let r=uf(t),n=rc(t.selection.getNode());nU(n.dom)&&oM(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),r.length>1&&en(r,t=>rh(t,n))&&tq(n,"data-mce-selected","1")},gu=(t,r,n)=>Q.some(()=>{let o=t.selection.getRng(),a=n.bind(({rng:n,isStartInTable:a})=>{var l,i;let s=(l=t,i=a?n.endContainer:n.startContainer,Q.from(l.dom.getParent(i,l.dom.isBlock)).map(rc));n.deleteContents(),((t,r,n)=>{n.each(n=>{r?nr(n):(or(n),t.selection.setCursorLocation(n.dom,0))})})(t,a,s.filter(oM));let d=a?r[0]:r[r.length-1];return gs(t,d,o,a),oM(d)?Q.none():Q.some(a?r.slice(1):r.slice(0,-1))}).getOr(r);gi(a),gd(t)}),gc=(t,r,n,o)=>Q.some(()=>{let a=t.selection.getRng(),l=r[0],i=n[n.length-1];gs(t,l,a,!0),gs(t,i,a,!1);let s=oM(l)?r:r.slice(1),d=oM(i)?n:n.slice(0,-1);gi(s.concat(d)),o.deleteContents(),gd(t)}),gm=(t,r,n,o=!0)=>Q.some(()=>{fG(t,r,n,o)}),gf=(t,r)=>Q.some(()=>f1(t,!1,r)),gg=(t,r)=>em(fr(r,t),nQ),gp=(t,r)=>em(fr(r,t),t5("caption")),gh=(t,r)=>Q.some(()=>{or(r),t.selection.setCursorLocation(r.dom,0)}),gv=(t,r)=>t?mQ(r):mJ(r),gb=(t,r,n)=>{let o=rc(t.getBody());return gp(o,n).fold(()=>((t,r,n,o)=>{let a=lM.fromRangeStart(t.selection.getRng());return gg(n,o).bind(o=>{var l,i,s,d,u;return oM(o)?gh(t,o):(l=t,i=n,s=r,d=o,u=a,d1(s,l.getBody(),u).bind(t=>gg(i,rc(t.getNode())).bind(t=>rh(t,d)?Q.none():Q.some(I))))})})(t,r,o,n).orThunk(()=>tF(((t,r)=>{let n=lM.fromRangeStart(t.selection.getRng());return gv(r,n)||dU(r,t.getBody(),n).exists(t=>gv(r,t))})(t,r),I)),n=>((t,r,n,o)=>{var a,l,i,s,d;let u=lM.fromRangeStart(t.selection.getRng());return oM(o)?gh(t,o):(a=t,l=n,i=r,s=o,d=u,d1(i,a.getBody(),d).fold(()=>Q.some(I),t=>{var r,n,o,u,c,m,f,g,p;return(r=s,n=i,o=d,u=t,dH(r.dom).bind(t=>d7(r.dom).map(r=>n?o.isEqual(t)&&u.isEqual(r):o.isEqual(r)&&u.isEqual(t))).getOr(!0))?gh(a,s):(f=l,g=s,gp(f,rc(t.getNode())).fold(()=>Q.some(I),t=>tF(!rh(t,g),I)))}))})(t,r,o,n))},g$=(t,r)=>{let n=rc(t.selection.getStart(!0)),o=uf(t);return t.selection.isCollapsed()&&0===o.length?gb(t,r,n):((t,r,n)=>{var o,a,l,i;let s=rc(t.getBody()),d=t.selection.getRng();return 0!==n.length?gu(t,n,Q.none()):(o=t,a=s,l=d,gp(a,r).fold(()=>{var t,r,n;return t=o,gl(a,l).bind(r=>r.fold(V(gm,t),V(gf,t),V(gu,t),V(gc,t)))},t=>{var r,n;return gh(o,t)}))})(t,n,o)},gy=(t,r)=>{let n=r;for(;n&&n!==t;){if(nF(n)||n0(n))return n;n=n.parentNode}return null},gC=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],g_=tP.each,gx=t=>{let r=t.dom,n=new Set(t.serializer.getTempAttrs()),o=t=>en(gC,r=>eW(t,r))||n.has(t);return{compare(t,n){if(t.nodeName!==n.nodeName||t.nodeType!==n.nodeType)return!1;let a=t=>{let n={};return g_(r.getAttribs(t),a=>{let l=a.nodeName.toLowerCase();"style"===l||o(l)||(n[l]=r.getAttrib(t,l))}),n},l=(t,r)=>{for(let n in t)if(eP(t,n)){let o=r[n];if(T(o)||t[n]!==o)return!1;delete r[n]}for(let a in r)if(eP(r,a))return!1;return!0};return(!(nx(t)&&nx(n))||!!l(a(t),a(n))&&!!l(r.parseStyle(r.getAttrib(t,"style")),r.parseStyle(r.getAttrib(n,"style"))))&&!ue(t)&&!ue(n)},isAttributeInternal:o}},gk=(t,r,n,o)=>{let a=n.name;for(let l=0,i=t.length;l<i;l++){let s=t[l];if(s.name===a){let d=o.nodes[a];d?d.nodes.push(n):o.nodes[a]={filter:s,nodes:[n]}}}if(n.attributes)for(let u=0,c=r.length;u<c;u++){let m=r[u],f=m.name;if(f in n.attributes.map){let g=o.attributes[f];g?g.nodes.push(n):o.attributes[f]={filter:m,nodes:[n]}}}},gw=(t,r)=>{let n=(t,n)=>{eS(t,t=>{let o=ek(t.nodes);ea(t.filter.callbacks,a=>{for(let l=o.length-1;l>=0;l--){let i=o[l];((n?void 0===i.attr(t.filter.name):i.name!==t.filter.name)||B(i.parent))&&o.splice(l,1)}o.length>0&&a(o,t.filter.name,r)})})};n(t.nodes,!1),n(t.attributes,!0)},g8=(t,r,n,o={})=>{let a=((t,r,n)=>{let o={nodes:{},attributes:{}};return n.firstChild&&((n,a)=>{let l=n;for(;l=l.walk();)gk(t,r,l,o)})(n),o})(t,r,n);gw(a,o)},gE=(t,r,n)=>{if(t.insert&&r(n)){let o=new mD("br",1);o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new mD("#text",3)).value="\xa0"},gS=(t,r)=>{let n=null==t?void 0:t.firstChild;return D(n)&&n===t.lastChild&&n.name===r},gN=(t,r,n,o)=>o.isEmpty(r,n,r=>((t,r)=>{let n=t.getElementRule(r.name);return!0===(null==n?void 0:n.paddEmpty)})(t,r)),gR=t=>{let r;for(let n=t;n;n=n.parent){let o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(r=n)}return Q.from(r)},gA=(t,r,n=t.parent)=>{if(r.getSpecialElements()[t.name])t.empty().remove();else{let o=t.children();for(let a of o)n&&!r.isValidChild(n.name,a.name)&&gA(a,r,n);t.unwrap()}},gO=(t,r,n,o=I)=>{let a=r.getTextBlockElements(),l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=tP.makeMap("tr,td,th,tbody,thead,tfoot,table"),d=new Set,u=t=>t!==n&&!s[t.name];for(let c=0;c<t.length;c++){let m=t[c],f,g,p;if(!m.parent||d.has(m))continue;if(a[m.name]&&"li"===m.parent.name){let h=m.next;for(;h&&a[h.name];)h.name="li",d.add(h),m.parent.insert(h,m.parent),h=h.next;m.unwrap();continue}let v=[m];for(f=m.parent;f&&!r.isValidChild(f.name,m.name)&&u(f);f=f.parent)v.push(f);if(f&&v.length>1){if(r.isValidChild(f.name,m.name)){v.reverse(),o(g=v[0].clone());let b=g;for(let $=0;$<v.length-1;$++){r.isValidChild(b.name,v[$].name)&&$>0?(o(p=v[$].clone()),b.append(p)):p=b;for(let y=v[$].firstChild;y&&y!==v[$+1];){let C=y.next;p.append(y),y=C}b=p}gN(r,l,i,g)?f.insert(m,v[0],!0):(f.insert(g,v[0],!0),f.insert(m,g)),(gN(r,l,i,f=v[0])||gS(f,"br"))&&f.empty().remove()}else gA(m,r)}else if(m.parent){if("li"===m.name){let _=m.prev;if(_&&("ul"===_.name||"ol"===_.name)){_.append(m);continue}if((_=m.next)&&("ul"===_.name||"ol"===_.name)&&_.firstChild){_.insert(m,_.firstChild,!0);continue}let x=new mD("ul",1);o(x),m.wrap(x);continue}if(r.isValidChild(m.parent.name,"div")&&r.isValidChild("div",m.name)){let k=new mD("div",1);o(k),m.wrap(k)}else gA(m,r)}}},gT=(t,r,n=r.parent)=>!(!n||!t.children[r.name]||t.isValidChild(n.name,r.name))||!(!n||"a"!==r.name||!((t,r)=>{let n=t;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n)),gB=t=>t.collapsed?t:(t=>{let r=lM.fromRangeStart(t),n=lM.fromRangeEnd(t),o=t.commonAncestorContainer;return dU(!1,o,n).map(a=>!dp(r,n,o)&&dp(r,a,o)?((t,r,n,o)=>{let a=document.createRange();return a.setStart(t,r),a.setEnd(n,o),a})(r.container(),r.offset(),a.container(),a.offset()):t).getOr(t)})(t),gD=(t,r)=>{let n=r.firstChild,o=r.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((t,r)=>{var n,o,a,l;let i=t.getNonEmptyElements();return D(r)&&(r.isEmpty(i)||(n=t,o=r,n.getBlockElements()[o.name]&&D((a=o).firstChild)&&a.firstChild===a.lastChild&&("br"===(l=o.firstChild).name||"\xa0"===l.value)))})(t,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)},gL=t=>{var r,n,o;return t.length>0&&(!(n=t[t.length-1]).firstChild||D(null==(r=n)?void 0:r.firstChild)&&r.firstChild===r.lastChild&&("\xa0"===(o=r.firstChild).data||nM(o)))?t.slice(0,-1):t},gP=(t,r)=>{let n=t.getParent(r,t.isBlock);return n&&"LI"===n.nodeName?n:null},gM=(t,r)=>{let n=lM.after(t),o=dM(r).prev(n);return o?o.toRange():null},gI=(t,r,n,o)=>{var a,l,i,s,d,u;let c=((t,r,n)=>{let o=r.serialize(n);return(t=>{var r,n;let o=t.firstChild,a=t.lastChild;return o&&"META"===o.nodeName&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),a&&"mce_marker"===a.id&&(null===(n=a.parentNode)||void 0===n||n.removeChild(a)),t})(t.createFragment(o))})(r,t,o),m=gP(r,n.startContainer),f=gL(es(null!==(l=null==(a=c.firstChild)?void 0:a.childNodes)&&void 0!==l?l:[],t=>"LI"===t.nodeName)),g=r.getRoot(),p=t=>{let o=lM.fromRangeStart(n),a=dM(r.getRoot()),l=1===t?a.prev(o):a.next(o),i=null==l?void 0:l.getNode();return!i||gP(r,i)!==m};return m?p(1)?((t,r,n)=>{let o=t.parentNode;return o&&tP.each(r,r=>{o.insertBefore(r,t)}),((t,r)=>{let n=lM.before(t),o=dM(r).next(n);return o?o.toRange():null})(t,n)})(m,f,g):p(2)?(i=m,s=f,d=g,r.insertAfter(s.reverse(),i),gM(s[0],d)):((t,r,n,o)=>{let a=((t,r)=>{let n=r.cloneRange(),o=r.cloneRange();return n.setStartBefore(t),o.setEndAfter(t),[n.cloneContents(),o.cloneContents()]})(t,o),l=t.parentNode;return l&&(l.insertBefore(a[0],t),tP.each(r,r=>{l.insertBefore(r,t)}),l.insertBefore(a[1],t),l.removeChild(t)),gM(r[r.length-1],n)})(m,f,g,n):null},gF=["pre"],g0=nU,gU=(t,r,n)=>{var o,a,l,i,s,d,u,c;let m=t.selection,f=t.dom,g=t.parser,p=n.merge,h=m6({validate:!0},t.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===r.indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,v);let b=m.getRng(),$=b.startContainer,y=t.getBody();$===y&&m.isCollapsed()&&f.isBlock(y.firstChild)&&(i=t,D(s=y.firstChild)&&!i.schema.getVoidElements()[s.nodeName])&&f.isEmpty(y.firstChild)&&((b=f.createRng()).setStart(y.firstChild,0),b.setEnd(y.firstChild,0),m.setRng(b)),m.isCollapsed()||(t=>{var r,n,o;let a=t.dom,l=gB(t.selection.getRng());t.selection.setRng(l);let i=a.getParent(l.startContainer,g0);(r=a,n=l,o=i,D(o)&&o===r.getParent(n.endContainer,g0)&&uv(rc(o),n))?gm(t,l,rc(i)):l.startContainer===l.endContainer&&l.endOffset-l.startOffset==1&&nO(l.startContainer.childNodes[l.startOffset])?l.deleteContents():t.getDoc().execCommand("Delete",!1)})(t);let C=m.getNode(),_={context:C.nodeName.toLowerCase(),data:n.data,insert:!0},x=g.parse(r,_);if(!0===n.paste&&gD(t.schema,x)&&gP(d=f,C))return(b=gI(h,f,m.getRng(),x))&&m.setRng(b),r;!0===n.paste&&((t,r,n,o)=>{var a;let l=r.firstChild,i=r.lastChild,s=l===("bookmark"===i.attr("data-mce-type")?i.prev:i),d=er(gF,l.name);if(s&&d){let u="false"!==l.attr("contenteditable"),c=(null===(a=t.getParent(n,t.isBlock))||void 0===a?void 0:a.nodeName.toLowerCase())===l.name,m=Q.from(gy(o,n)).forall(nF);return u&&c&&m}return!1})(f,x,C,t.getBody())&&(null===(o=x.firstChild)||void 0===o||o.unwrap()),(t=>{let r=t;for(;r=r.walk();)1===r.type&&r.attr("data-mce-fragment","1")})(x);let k=x.lastChild;if(k&&"mce_marker"===k.attr("id")){let w=k;for(k=k.prev;k;k=k.walk(!0))if(3===k.type||!f.isBlock(k.name)){k.parent&&t.schema.isValidChild(k.parent.name,"span")&&k.parent.insert(w,k,"br"===k.name);break}}if(t._selectionOverrides.showBlockCaretContainer(C),_.invalid){t.selection.setContent(v);let E,S=m.getNode(),N=t.getBody();for(nL(S)?S=E=N:E=S;E&&E!==N;)S=E,E=E.parentNode;r=S===N?N.innerHTML:f.getOuterHTML(S);let R=g.parse(r),A=(t=>{for(let r=t;r;r=r.walk())if("mce_marker"===r.attr("id"))return Q.some(r);return Q.none()})(R),O=A.bind(gR).getOr(R);A.each(t=>t.replace(x));let T=x.children(),B=null!==(a=x.parent)&&void 0!==a?a:R;x.unwrap();let L=es(T,r=>gT(t.schema,r,B));gO(L,t.schema,O),g8(g.getNodeFilters(),g.getAttributeFilters(),R),r=h.serialize(R),S===N?f.setHTML(N,r):f.setOuterHTML(S,r)}else r=h.serialize(x),((t,r,n)=>{var o;if("all"===n.getAttribute("data-mce-bogus"))null===(o=n.parentNode)||void 0===o||o.insertBefore(t.dom.createFragment(r),n);else{let a=n.firstChild,l=n.lastChild;a&&(a!==l||"BR"!==a.nodeName)?t.selection.setContent(r,{no_events:!0}):t.dom.setHTML(n,r)}})(t,r,C);return((t,r)=>{let n=t.schema.getTextInlineElements(),o=t.dom;if(r){let a=t.getBody(),l=gx(t);tP.each(o.select("*[data-mce-fragment]"),t=>{var r,i;if(D(n[t.nodeName.toLowerCase()])&&eh(mH(r=o,t),t=>{var r;return r=t,!mj.has(r)})){for(let s=t.parentElement;D(s)&&s!==a&&!m7(o,t,s);s=s.parentElement)if(l.compare(s,t)){o.remove(t,!0);break}}})}})(t,p),((t,r)=>{var n,o,a,l,i;let s,d=t.dom,u=t.selection;if(!r)return;u.scrollIntoView(r);let c=gy(t.getBody(),r);if(c&&"false"===d.getContentEditable(c))return d.remove(r),void u.select(c);let m=d.createRng(),f=r.previousSibling;if(nO(f)){m.setStart(f,null!==(o=null===(n=f.nodeValue)||void 0===n?void 0:n.length)&&void 0!==o?o:0);let g=r.nextSibling;nO(g)&&(f.appendData(g.data),null===(a=g.parentNode)||void 0===a||a.removeChild(g))}else m.setStartBefore(r),m.setEndBefore(r);let p=d.getParent(r,d.isBlock),h;d.remove(r),p&&d.isEmpty(p)&&(nt(rc(p)),m.setStart(p,0),m.setEnd(p,0),g0(p)||p.getAttribute("data-mce-fragment")||!(s=(i=m,h=lM.fromRangeStart(i),null==(h=dM(t.getBody()).next(h))?void 0:h.toRange()))?d.add(p,d.create("br",{"data-mce-bogus":"1"})):(m=s,d.remove(p))),u.setRng(m)})(t,f.get("mce_marker")),l=t.getBody(),tP.each(l.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")}),((t,r)=>{Q.from(t.getParent(r,"td,th")).map(rc).each(on)})(f,m.getStart()),ea(ek(t.getBody().querySelectorAll("details")),t=>{let r=es(ek(t.children),t=>"SUMMARY"===t.nodeName);r.length>1&&ea(r.slice(1),t=>{let r=rc(t);ra(r,"mce-accordion-summary"),ls(r,"p")})}),((t,r,n)=>{let o=rx(rc(n),t=>rh(t,rc(r)));eC(o,o.length-2).filter(t7).fold(()=>o6(t,r),r=>o6(t,r.dom))})(t.schema,t.getBody(),m.getStart()),r},g1=t=>t instanceof mD,gz=(t,r,n)=>{var o;t.dom.setHTML(t.getBody(),r),!0!==n&&m$(o=t)&&dH(o.getBody()).each(t=>{let r=t.getNode(),n=nN(r)?dH(r).getOr(t):t;o.selection.setRng(n.toRange())})},g6=(t,r)=>((t,r)=>{var n,o;let a=t.dom;return a.parentNode?(n=rc(a.parentNode),o=n=>!rh(t,n)&&r(n),em(n.dom.childNodes,t=>o(rc(t))).map(rc)):Q.none()})(t,r).isSome(),gj=t=>L(t)?t:Y,g4=(t,r,n)=>{let o=r(t),a=gj(n);return o.orThunk(()=>a(t)?Q.none():((t,r,n)=>{let o=t.dom,a=gj(n);for(;o.parentNode;){o=o.parentNode;let l=rc(o),i=r(l);if(i.isSome())return i;if(a(l))break}return Q.none()})(t,r,a))},gH=uT,g7=(t,r,n)=>{let o=t.formatter.get(n);if(o)for(let a=0;a<o.length;a++){let l=o[a];if(uF(l)&&!1===l.inherit&&t.dom.is(r,l.selector))return!0}return!1},g3=(t,r,n,o,a)=>{let l=t.dom.getRoot();if(r===l)return!1;let i=t.dom.getParent(r,r=>!!g7(t,r,n)||r.parentNode===l||!!g5(t,r,n,o,!0));return!!g5(t,i,n,o,a)},g9=(t,r,n)=>!(!u0(n)||!gH(r,n.inline))||!(!uI(n)||!gH(r,n.block))||!!uF(n)&&nx(r)&&t.is(r,n.selector),g2=(t,r,n,o,a,l)=>{let i=n[o],s="attributes"===o;if(L(n.onmatch))return n.onmatch(r,n,o);if(i){if(eF(i))for(let d=0;d<i.length&&(s?!t.getAttrib(r,i[d]):!uD(t,r,i[d]));d++);else for(let u in i)if(eP(i,u)){let c=s?t.getAttrib(r,u):uD(t,r,u),m=uO(i[u],l),f=B(c)||eZ(c);if(f&&B(m))continue;if(a&&f&&!n.exact||(!a||n.exact)&&!gH(c,uB(m,u)))return!1}}return!0},g5=(t,r,n,o,a)=>{let l=t.formatter.get(n),i=t.dom;if(l&&nx(r))for(let s=0;s<l.length;s++){let d=l[s];if(g9(t.dom,r,d)&&g2(i,r,d,"attributes",a,o)&&g2(i,r,d,"styles",a,o)){let u=d.classes;if(u){for(let c=0;c<u.length;c++)if(!t.dom.hasClass(r,uO(u[c],o)))return}return d}}},gV=(t,r,n,o,a)=>{if(o)return g3(t,o,r,n,a);if(o=t.selection.getNode(),g3(t,o,r,n,a))return!0;let l=t.selection.getStart();return!(l===o||!g3(t,l,r,n,a))},gq=t=>(t=>{let r=[],n=t;for(;n;){if(nO(n)&&"\uFEFF"!==n.data||n.childNodes.length>1)return[];nx(n)&&r.push(n),n=n.firstChild}return r})(t).length>0,gW=t=>{if(t){let r=new ny(t,t);for(let n=r.current();n;n=r.next())if(nO(n))return n}return null},gK=t=>{let r=rd("span");return tW(r,{id:d3,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&rJ(r,ru("\uFEFF")),r},gG=(t,r,n=!0)=>{let o=t.dom,a=t.selection;if(gq(r))f1(t,!1,rc(r),n);else{let l=a.getRng(),i=o.getParent(r,o.isBlock),s=l.startContainer,d=l.startOffset,u=l.endContainer,c=l.endOffset,m=(t=>{let r=gW(t);return r&&"\uFEFF"===r.data.charAt(0)&&r.deleteData(0,1),r})(r);o.remove(r,!0),s===m&&d>0&&l.setStart(m,d-1),u===m&&c>0&&l.setEnd(m,c-1),i&&o.isEmpty(i)&&or(rc(i)),a.setRng(l)}},gY=(t,r,n=!0)=>{let o=t.dom,a=t.selection;if(r)gG(t,r,n);else if(!(r=d2(t.getBody(),a.getStart())))for(;r=o.get(d3);)gG(t,r,n)},gX=(t,r)=>(t.appendChild(r),r),gQ=(t,r)=>{var n;let o=ed(t,(t,r)=>gX(t,r.cloneNode(!1)),r),a=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return gX(o,a.createTextNode("\uFEFF"))},gJ=(t,r,n,o)=>{let a=t.dom,l=t.selection,i=!1,s=t.formatter.get(r);if(!s)return;let d=l.getRng(),u=d.startContainer,c=d.startOffset,m=u;nO(u)&&(c!==u.data.length&&(i=!0),m=m.parentNode);let f=[],g;for(;m;){if(g5(t,m,r,n,o)){g=m;break}m.nextSibling&&(i=!0),f.push(m),m=m.parentNode}if(g){if(i){let p=l.getBookmark();d.collapse(!0);let h=uK(a,d,s,!0);h=cI(h),t.formatter.remove(r,n,h,o),l.moveToBookmark(p)}else{let v=d2(t.getBody(),g),y=gK(!1).dom;((t,r,n)=>{var o,a;let l=t.dom,i=l.getParent(n,V(uS,t.schema));i&&l.isEmpty(i)?null===(o=n.parentNode)||void 0===o||o.replaceChild(r,n):((t=>{let r=nb(t,"br"),n=es((t=>{let r=[],n=t.dom;for(;n;)r.push(rc(n)),n=n.lastChild;return r})(t).slice(-1),nW);r.length===n.length&&ea(n,nr)})(rc(n)),l.isEmpty(n)?null===(a=n.parentNode)||void 0===a||a.replaceChild(r,n):l.insertAfter(r,n))})(t,y,null!=v?v:g);let C=((t,r,n,o,a,l)=>{var i,s,d;let u=t.formatter,c=t.dom,m=es(e8(u.get()),t=>t!==o&&!eq(t,"removeformat")),f=(i=t,s=n,d=m,eu(d,(t,r)=>{var n,o;let a=(n=i,o=r,uM(n,o,t=>{let r=t=>L(t)||t.length>1&&"%"===t.charAt(0);return en(["styles","attributes"],n=>eL(t,n).exists(t=>{let n=R(t)?t:eD(t);return en(n,r)}))}));return i.formatter.matchNode(s,r,{},a)?t.concat([r]):t},[]));if(es(f,r=>!((t,r,n)=>{let o=["inline","block","selector","attributes","styles","classes"],a=t=>eT(t,(t,r)=>en(o,t=>t===r));return uM(t,r,r=>{let o=a(r);return uM(t,n,t=>{let r=a(t);return((t,r,n=$)=>b(n).eq(t,r))(o,r)})})})(t,r,o)).length>0){let g=n.cloneNode(!1);return c.add(r,g),u.remove(o,a,g,l),c.remove(g),Q.some(g)}return Q.none()})(t,y,g,r,n,o),_=gQ(f.concat(C.toArray()),y);v&&gG(t,v,!1),l.setCursorLocation(_,1),a.isEmpty(g)&&a.remove(g)}}},gZ=t=>{let r=gK(!1),n=gQ(t,r.dom);return{caretContainer:r,caretPosition:lM(n,0)}},pe=(t,r)=>{let{caretContainer:n,caretPosition:o}=gZ(r);return rY(rc(t),n),nr(rc(t)),o},pt=(t,r)=>{let n=t.schema.getTextInlineElements();return eP(n,t6(r))&&!d9(r.dom)&&!nS(r.dom)},pr=t=>d9(t.dom)&&gq(t.dom),pn={},po=nw(["pre"]);pn.pre||(pn.pre=[]),pn.pre.push(t=>{if(!t.selection.getRng().collapsed){var r;let n=t.selection.getSelectedBlocks(),o=es(es(n,po),(r=n,t=>{let n=t.previousSibling;return po(n)&&er(r,n)}));ea(o,t=>{((t,r)=>{let n=rc(r),o=r$(n).dom;nr(n),ne(rc(t),[rd("br",o),rd("br",o),...rS(n)])})(t.previousSibling,t)})}});let pa=["fontWeight","fontStyle","color","fontSize","fontFamily"],pl=(t,r)=>{let n=t.get(r);return R(n)?em(n,t=>{var r;return u0(t)&&"span"===t.inline&&S((r=t).styles)&&en(e8(r.styles),t=>er(pa,t))}):Q.none()},pi=(t,r)=>d4(r,lM.fromRangeStart(t)).isNone(),ps=(t,r)=>!1===dj(r,lM.fromRangeEnd(t)).exists(t=>!nM(t.getNode())||dj(r,t).isSome()),pd=t=>r=>n6(r)&&t.isEditable(r),pu=t=>es(t.getSelectedBlocks(),pd(t.dom)),pc=tP.each,pm=t=>nx(t)&&!ue(t)&&!d9(t)&&!nS(t),pf=(t,r)=>{for(let n=t;n&&!(nO(n)&&eJ(n.data));n=n[r])if(nx(n)&&!ue(n))return n;return t},pg=(t,r,n)=>{let o=gx(t),a=nx(r)&&uk(r),l=nx(n)&&uk(n);if(a&&l){let i=pf(r,"previousSibling"),s=pf(n,"nextSibling");if(o.compare(i,s)){for(let d=i.nextSibling;d&&d!==s;){let u=d;d=d.nextSibling,i.appendChild(u)}return t.dom.remove(s),tP.each(tP.grep(s.childNodes),t=>{i.appendChild(t)}),i}}return n},pp=(t,r,n,o)=>{var a;if(o&&!1!==r.merge_siblings){let l=null!==(a=pg(t,uE(o),o))&&void 0!==a?a:o;pg(t,l,uE(l,!0))}},ph=(t,r,n)=>{pc(t.childNodes,t=>{pm(t)&&(r(t)&&n(t),t.hasChildNodes()&&ph(t,r,n))})},pv=(t,r)=>n=>!(!n||!uD(t,n,r)),pb=(t,r,n)=>o=>{var a,l;t.setStyle(o,r,n),""===o.getAttribute("style")&&o.removeAttribute("style"),a=t,"SPAN"===(l=o).nodeName&&0===a.getAttribs(l).length&&a.remove(l,!0)},p$=lZ([{keep:[]},{rename:["name"]},{removed:[]}]),py=/^(src|href|style)$/,pC=tP.each,p_=uT,px=(t,r,n)=>t.isChildOf(r,n)&&r!==n&&!t.isBlock(n),pk=(t,r,n)=>{let o=r[n?"startContainer":"endContainer"],a=r[n?"startOffset":"endOffset"];if(nx(o)){let l=o.childNodes.length-1;!n&&a&&a--,o=o.childNodes[a>l?l:a]}return nO(o)&&n&&a>=o.data.length&&(o=new ny(o,t.getBody()).next()||o),nO(o)&&!n&&0===a&&(o=new ny(o,t.getBody()).prev()||o),o},pw=(t,r)=>{var n;let o=r?"firstChild":"lastChild",a=t[o];return(n=t,/^(TR|TH|TD)$/.test(n.nodeName)&&a)?"TR"===t.nodeName&&a[o]||a:t},p8=(t,r,n,o)=>{var a;let l=t.create(n,o);return null===(a=r.parentNode)||void 0===a||a.insertBefore(l,r),l.appendChild(r),l},pE=(t,r,n,o,a)=>{let l=rc(r),i=rc(t.create(o,a)),s=n?rE(l):r8(l);return ne(i,s),n?(rY(l,i),rQ(i,l)):(rX(l,i),rJ(i,l)),i.dom},pS=(t,r,n)=>{var o;let a=r.parentNode,l,i=t.dom,s=i_(t);uI(n)&&a===i.getRoot()&&(n.list_block&&p_(r,n.list_block)||ea(ek(r.childNodes),r=>{uN(t,s,r.nodeName.toLowerCase())?l?l.appendChild(r):(l=p8(i,r,s),i.setAttribs(l,ix(t))):l=null})),uF(o=n)&&u0(o)&&tM(eL(o,"mixed"),!0)&&!p_(n.inline,r)||i.remove(r,!0)},pN=(t,r,n)=>P(t)?{name:r,value:null}:{name:t,value:uO(r,n)},pR=(t,r)=>{""===t.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style"))},pA=(t,r,n,o,a)=>{let l=!1;pC(n.styles,(i,s)=>{let{name:d,value:u}=pN(s,i,o),c=uB(u,d);(n.remove_similar||A(u)||!nx(a)||p_(uD(t,a,d),c))&&t.setStyle(r,d,""),l=!0}),l&&pR(t,r)},pO=(t,r,n,o,a)=>{var l,i;let s=t.dom,d=gx(t),u=t.schema;if(u0(r)&&oH(u,r.inline)&&o3(u,o)&&o.parentElement===t.getBody())return pS(t,o,r),p$.removed();if(!r.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!g9(s,o,r)&&(l=o,!r.links||"A"!==l.nodeName))return p$.keep();let c=o,m=r.preserve_attributes;if(u0(r)&&"all"===r.remove&&R(m)){let f=es(s.getAttribs(c),t=>er(m,t.name.toLowerCase()));if(s.removeAllAttribs(c),ea(f,t=>s.setAttrib(c,t.name,t.value)),f.length>0)return p$.rename("span")}if("all"!==r.remove){pA(s,c,r,n,a),pC(r.attributes,(t,o)=>{let{name:l,value:i}=pN(o,t,n);if(r.remove_similar||A(i)||!nx(a)||p_(s.getAttrib(a,l),i)){if("class"===l){let d=s.getAttrib(c,l);if(d){let u="";if(ea(d.split(/\s+/),t=>{/mce\-\w+/.test(t)&&(u+=(u?" ":"")+t)}),u)return void s.setAttrib(c,l,u)}}if(py.test(l)&&c.removeAttribute("data-mce-"+l),"style"===l&&nw(["li"])(c)&&"none"===s.getStyle(c,"list-style-type"))return c.removeAttribute(l),void s.setStyle(c,"list-style-type","none");"class"===l&&c.removeAttribute("className"),c.removeAttribute(l)}}),pC(r.classes,t=>{t=uO(t,n),nx(a)&&!s.hasClass(a,t)||s.removeClass(c,t)});let g=s.getAttribs(c);for(let p=0;p<g.length;p++){let h=g[p].nodeName;if(!d.isAttributeInternal(h))return p$.keep()}}return"none"!==r.remove?(pS(t,c,r),p$.removed()):p$.keep()},pT=(t,r,n,o)=>pO(t,r,n,o,o).fold(z(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),z(null)),pB=(t,r,n,o,a)=>{(o||t.selection.isEditable())&&((t,r,n,o,a)=>{let l=t.formatter.get(r),i=l[0],s=t.dom,d=t.selection,u=o=>{var s,d,u,c,m;let f,g=(s=t,d=o,u=r,c=n,m=a,d.parentNode&&ea(uP(s.dom,d.parentNode).reverse(),t=>{if(!f&&nx(t)&&"_start"!==t.id&&"_end"!==t.id){let r=g5(s,t,u,c,m);r&&!1!==r.split&&(f=t)}}),f);return((t,r,n,o,a,l,i,s)=>{var d,u;let c,m,f=t.dom;if(n){let g=n.parentNode;for(let p=o.parentNode;p&&p!==g;p=p.parentNode){let h=f.clone(p,!1);for(let v=0;v<r.length&&null!==(h=pT(t,r[v],s,h));v++);h&&(c&&h.appendChild(c),m||(m=h),c=h)}i.mixed&&f.isBlock(n)||(o=null!==(d=f.split(n,o))&&void 0!==d?d:o),c&&m&&(null===(u=a.parentNode)||void 0===u||u.insertBefore(c,a),m.appendChild(a),u0(i)&&pp(t,i,0,c))}return o})(t,l,g,o,o,0,i,n)},c=r=>en(l,o=>pD(t,o,n,r,r)),m=r=>{let n=ek(r.childNodes),o=c(r)||en(l,t=>g9(s,r,t)),a=r.parentNode;if(!o&&D(a)&&uU(i)&&c(a),i.deep&&n.length)for(let d=0;d<n.length;d++)m(n[d]);ea(["underline","line-through","overline"],n=>{nx(r)&&t.dom.getStyle(r,"text-decoration")===n&&r.parentNode&&uL(s,r.parentNode)===n&&pD(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,r)})},f=t=>{let r=s.get(t?"_start":"_end");if(r){var n;let o=r[t?"firstChild":"lastChild"];return ue(n=o)&&nx(n)&&("_start"===n.id||"_end"===n.id)&&(o=o[t?"firstChild":"lastChild"]),nO(o)&&0===o.data.length&&(o=t?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),s.remove(r,!0),o}return null},g=r=>{let n,o,a=uK(s,r,l,r.collapsed);if(i.split){if(a=cI(a),n=pk(t,a,!0),o=pk(t,a),n!==o){if(n=pw(n,!0),o=pw(o,!1),px(s,n,o)){let d=Q.from(n.firstChild).getOr(n);return u(pE(s,d,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void f(!0)}if(px(s,o,n)){let c=Q.from(o.lastChild).getOr(o);return u(pE(s,c,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void f(!1)}n=p8(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=p8(s,o,"span",{id:"_end","data-mce-type":"bookmark"});let g=s.createRng();g.setStartAfter(n),g.setEndBefore(o),uG(s,g,t=>{ea(t,t=>{ue(t)||ue(t.parentNode)||u(t)})}),u(n),u(o),n=f(!0),o=f()}else n=o=u(n);a.startContainer=n.parentNode?n.parentNode:n,a.startOffset=s.nodeIndex(n),a.endContainer=o.parentNode?o.parentNode:o,a.endOffset=s.nodeIndex(o)+1}uG(s,a,t=>{ea(t,m)})};if(o){if(u_(o)){let p=s.createRng();p.setStartBefore(o),p.setEndAfter(o),g(p)}else g(o);co(t,r,o,n)}else{var h,v,b;d.isCollapsed()&&u0(i)&&!uf(t).length?gJ(t,r,n,a):(uw(t,()=>uy(t,g),o=>u0(i)&&gV(t,r,n,o)),t.nodeChanged()),h=t,v=r,b=n,"removeformat"===v?ea(pu(h.selection),t=>{ea(pa,r=>h.dom.setStyle(t,r,"")),pR(h.dom,t)}):pl(h.formatter,v).each(t=>{ea(pu(h.selection),r=>pA(h.dom,r,t,b,null))}),co(t,r,o,n)}})(t,r,n,o,a)},pD=(t,r,n,o,a)=>pO(t,r,n,o,a).fold(Y,r=>(t.dom.rename(o,r),!0),X),pL=tP.each,pP=tP.each,pM=(t,r,n,o)=>{if(pP(n.styles,(n,a)=>{t.setStyle(r,a,uO(n,o))}),n.styles){let a=t.getAttrib(r,"style");a&&t.setAttrib(r,"data-mce-style",a)}},pI=(t,r,n,o)=>{let a=t.formatter.get(r),l=a[0],i=!o&&t.selection.isCollapsed(),s=t.dom,d=t.selection,u=(t,r=l)=>{L(r.onformat)&&r.onformat(t,r,n,o),pM(s,t,r,n),pP(r.attributes,(r,o)=>{s.setAttrib(t,o,uO(r,n))}),pP(r.classes,r=>{let o=uO(r,n);s.hasClass(t,o)||s.addClass(t,o)})},c=(t,r)=>{let n=!1;return pP(t,t=>!(!uF(t)||("false"!==s.getContentEditable(r)||t.ceFalseOverride)&&(!D(t.collapsed)||t.collapsed===i)&&s.is(r,t.selector)&&!d9(r)&&(u(r,t),n=!0,1))),n},m=t=>{if(E(t)){let r=s.create(t);return u(r),r}return null},f=(o,i,s)=>{let d=[],f=!0,g=l.inline||l.block,p=m(g);uG(o,i,i=>{let m,h=i=>{var v,b;let $=!1,y=f,C=!1,_=i.parentNode,x=_.nodeName.toLowerCase(),k=o.getContentEditable(i);D(k)&&(y=f,f="true"===k,$=!0,C=uA(t,i));let w=f&&!$;if(nM(i)&&!((t,r,n,o)=>{if(iQ(t)&&u0(r)&&n.parentNode){let a=aC(t.schema),l=g6(rc(n),t=>d9(t.dom));return eM(a,o)&&oM(rc(n.parentNode),!1)&&!l}return!1})(t,l,i,x))return m=null,void(uI(l)&&o.remove(i));if(v=i,b=l,uI(b)&&!0===b.wrapper&&g5(t,v,r,n))m=null;else{if(((r,n,o)=>{var a;let i=(a=l,uI(a)&&!0!==a.wrapper&&uS(t.schema,r)&&uN(t,n,g));return o&&i})(i,x,w)){let E=o.rename(i,g);return u(E),d.push(E),void(m=null)}if(uF(l)){let S=c(a,i);if(!S&&D(_)&&uU(l)&&(S=c(a,_)),!u0(l)||S)return void(m=null)}D(p)&&((r,n,a,i)=>{let d=r.nodeName.toLowerCase(),u=uN(t,g,d)&&uN(t,n,g),c=!s&&nO(r)&&oo(r.data),m=d9(r),f=!u0(l)||!o.isBlock(r);return(a||i)&&u&&!c&&!m&&f})(i,x,w,C)?(m||(m=o.clone(p,!1),_.insertBefore(m,i),d.push(m)),C&&$&&(f=y),m.appendChild(i)):(m=null,ea(ek(i.childNodes),h),$&&(f=y),m=null)}};ea(i,h)}),!0===l.links&&ea(d,t=>{let r=t=>{"A"===t.nodeName&&u(t,l),ea(ek(t.childNodes),r)};r(t)}),ea(d,i=>{var s,c,m,f,g;let p,h=(s=i,p=0,ea(s.childNodes,t=>{var r;D(r=t)&&nO(r)&&0===r.length||ue(t)||p++}),p);!(d.length>1)&&o.isBlock(i)||0!==h?(u0(l)||uI(l)&&l.wrapper)&&(l.exact||1!==h||(i=(t=>{let r=em(t.childNodes,ux).filter(t=>"false"!==o.getContentEditable(t)&&g9(o,t,l));return r.map(r=>{let n=o.clone(r,!1);return u(n),o.replace(n,t,!0),o.remove(r,!0),n}).getOr(t)})(i)),c=t,m=a,f=n,g=i,pL(m,t=>{u0(t)&&pL(c.dom.select(t.inline,g),r=>{pm(r)&&pD(c,t,f,r,t.exact?r:null)}),((t,r,n)=>{if(r.clear_child_styles){let o=r.links?"*:not(a)":"*";pc(t.select(o,n),n=>{pm(n)&&uk(n)&&pc(r.styles,(r,o)=>{t.setStyle(n,o,"")})})}})(c.dom,t,g)}),((t,r,n,o,a)=>{let l=a.parentNode;g5(t,l,n,o)&&pD(t,r,o,a)||r.merge_with_parents&&l&&t.dom.getParent(l,l=>!!g5(t,l,n,o)&&(pD(t,r,o,a),!0))})(t,l,r,n,i),((t,r,n,o)=>{if(r.styles&&r.styles.backgroundColor){let a=pv(t,"fontSize");ph(o,t=>a(t)&&uk(t),pb(t,"backgroundColor",uO(r.styles.backgroundColor,n)))}})(o,l,n,i),((t,r,n,o)=>{let a=r=>{if(nx(r)&&nx(r.parentNode)&&uk(r)){let n=uL(t,r.parentNode);t.getStyle(r,"color")&&n?t.setStyle(r,"text-decoration",n):t.getStyle(r,"text-decoration")===n&&t.setStyle(r,"text-decoration",null)}};r.styles&&(r.styles.color||r.styles.textDecoration)&&(tP.walk(o,a,"childNodes"),a(o))})(o,l,0,i),((t,r,n,o)=>{if(u0(r)&&("sub"===r.inline||"sup"===r.inline)){let a=pv(t,"fontSize");ph(o,t=>a(t)&&uk(t),pb(t,"fontSize",""));let l=es(t.select("sup"===r.inline?"sub":"sup",o),uk);t.remove(l,!0)}})(o,l,0,i),pp(t,l,0,i)):o.remove(i,!0)})},g=u_(o)?o:d.getNode();if("false"===s.getContentEditable(g)&&!uA(t,g))return c(a,o=g),void cn(t,r,o,n);if(l){var p,h;if(o){if(u_(o)){if(!c(a,o)){let v=s.createRng();v.setStartBefore(o),v.setEndAfter(o),f(s,uK(s,v,a),!0)}}else f(s,o,!0)}else i&&u0(l)&&!uf(t).length?((t,r,n)=>{var o,a;let l,i=t.selection,s=t.formatter.get(r);if(!s)return;let d=i.getRng(),u=d.startOffset,c=d.startContainer.nodeValue;l=d2(t.getBody(),i.getStart());let m=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(c&&u>0&&u<c.length&&m.test(c.charAt(u))&&m.test(c.charAt(u-1))){let f=i.getBookmark();d.collapse(!0);let g=uK(t.dom,d,s);g=cI(g),t.formatter.apply(r,n,g),i.moveToBookmark(f)}else{let p=l?gW(l):null;l&&(null==p?void 0:p.data)==="\uFEFF"||(o=t.getDoc(),a=gK(!0).dom,p=(l=o.importNode(a,!0)).firstChild,d.insertNode(l),u=1),t.formatter.apply(r,n,l),i.setCursorLocation(p,u)}})(t,r,n):(d.setRng(gB(d.getRng())),uw(t,()=>{uy(t,(t,r)=>{let n=r?t:uK(s,t,a);f(s,n,!1)})},X),t.nodeChanged()),pl(t.formatter,r).each(r=>{var o;ea(es((t=>{let r=t.getSelectedBlocks(),n=t.getRng();if(t.isCollapsed())return[];if(1===r.length)return pi(n,r[0])&&ps(n,r[0])?r:[];{let o=e_(r).filter(t=>pi(n,t)).toArray(),a=ex(r).filter(t=>ps(n,t)).toArray(),l=r.slice(1,-1);return o.concat(l).concat(a)}})(o=t.selection),pd(o.dom)),t=>pM(s,t,r,n))});p=r,h=t,eP(pn,p)&&ea(pn[p],t=>{t(h)})}cn(t,r,o,n)},pF=(t,r,n,o)=>{(o||t.selection.isEditable())&&pI(t,r,n,o)},p0=t=>eP(t,"vars"),pU=t=>t.selection.getStart(),p1=(t,r,n,o,a)=>ec(r,r=>{let l=t.formatter.matchNode(r,n,null!=a?a:{},o);return!T(l)},r=>!!g7(t,r,n)||!o&&D(t.formatter.matchNode(r,n,a,!0))),pz=(t,r)=>{let n=null!=r?r:pU(t);return es(uP(t.dom,n),t=>nx(t)&&!nS(t))},p6=(t,r,n)=>{let o=pz(t,r);eS(n,(n,a)=>{let l=n=>{let l=p1(t,o,a,n.similar,p0(n)?n.vars:void 0),i=l.isSome();if(n.state.get()!==i){n.state.set(i);let s=l.getOr(r);p0(n)?n.callback(i,{node:s,format:a,parents:o}):ea(n.callbacks,t=>t(i,{node:s,format:a,parents:o}))}};ea([n.withSimilar,n.withoutSimilar],l),ea(n.withVars,l)})},pj=tP.explode,p4=()=>{let t={};return{addFilter(r,n){ea(pj(r),r=>{eP(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>eD(t),removeFilter(r,n){ea(pj(r),r=>{if(eP(t,r)){if(D(n)){let o=t[r],a=es(o.callbacks,t=>t!==n);a.length>0?o.callbacks=a:delete t[r]}else delete t[r]}})}}},pH=(t,r,n)=>{var o;let a=ak();r.convert_fonts_to_spans&&((t,r,n)=>{t.addNodeFilter("font",t=>{ea(t,t=>{var o;let a=r.parse(t.attr("style")),l=t.attr("color"),i=t.attr("face"),s=t.attr("size");l&&(a.color=l),i&&(a["font-family"]=i),s&&te(s).each(t=>{a["font-size"]=n[t-1]}),t.name="span",t.attr("style",r.serialize(a)),o=t,ea(["color","face","size"],t=>{o.attr(t,null)})})})})(t,a,tP.explode(null!==(o=r.font_size_legacy_values)&&void 0!==o?o:"")),((t,r,n)=>{t.addNodeFilter("strike",t=>{let o="html4"!==r.type;ea(t,t=>{if(o)t.name="s";else{let r=n.parse(t.attr("style"));r["text-decoration"]="line-through",t.name="span",t.attr("style",n.serialize(r))}})})})(t,n,a)},p7=(t,r)=>{t.addNodeFilter("br",(t,n,o)=>{let a=tP.extend({},r.getBlockElements()),l=r.getNonEmptyElements(),i=r.getWhitespaceElements();a.body=1;let s=t=>{var n,o;return t.name in a&&(n=r,1===(o=t).type&&oH(n,o.name)&&T(o.attr(oI)))};for(let d=0,u=t.length;d<u;d++){let c=t[d],m=c.parent;if(m&&a[m.name]&&c===m.lastChild){let f=c.prev;for(;f;){let g=f.name;if("span"!==g||"bookmark"!==f.attr("data-mce-type")){"br"===g&&(c=null);break}f=f.prev}if(c&&(c.remove(),gN(r,l,i,m))){let p=r.getElementRule(m.name);p&&(p.removeEmpty?m.remove():p.paddEmpty&&gE(o,s,m))}}else{let h=c;for(;m&&m.firstChild===h&&m.lastChild===h&&(h=m,!a[m.name]);)m=m.parent;if(h===m){let v=new mD("#text",3);v.value="\xa0",c.replace(v)}}}})},p3=t=>{let[r,...n]=t.split(","),o=n.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(r);if(a){let l=";base64"===a[2],i=l?(t=>{let r=/([a-z0-9+\/=\s]+)/i.exec(t);return r?r[1]:""})(o):decodeURIComponent(o);return Q.some({type:a[1],data:i,base64Encoded:l})}return Q.none()},p9=(t,r,n=!0)=>{let o=r;if(n)try{o=atob(r)}catch(a){return Q.none()}let l=new Uint8Array(o.length);for(let i=0;i<l.length;i++)l[i]=o.charCodeAt(i);return Q.some(new Blob([l],{type:t}))},p2=t=>new Promise((r,n)=>{let o=new FileReader;o.onloadend=()=>{r(o.result)},o.onerror=()=>{var t;n(null===(t=o.error)||void 0===t?void 0:t.message)},o.readAsDataURL(t)}),p5=0,pV=(t,r,n)=>p3(t).bind(({data:t,type:o,base64Encoded:a})=>{if(r&&!a)return Q.none();{let l=a?t:btoa(t);return n(l,o)}}),pq=(t,r,n)=>{let o=t.create("blobid"+p5++,r,n);return t.add(o),o},pW=(t,r,n=!1)=>pV(r,n,(r,n)=>Q.from(t.getByData(r,n)).orThunk(()=>p9(n,r).map(n=>pq(t,n,r)))),pK=(t,r)=>{let n=t.schema;r.remove_trailing_brs&&p7(t,n),t.addAttributeFilter("href",t=>{let n=t.length,o=t=>{var r;let n=t?tP.trim(t):"";return/\b(noopener)\b/g.test(n)?n:n.split(" ").filter(t=>t.length>0).concat(["noopener"]).sort().join(" ")};if(!r.allow_unsafe_link_target)for(;n--;){let a=t[n];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",o(a.attr("rel")))}}),r.allow_html_in_named_anchor||t.addAttributeFilter("id,name",t=>{let r,n,o,a,l=t.length;for(;l--;)if("a"===(a=t[l]).name&&a.firstChild&&!a.attr("href"))for(o=a.parent,r=a.lastChild;r&&o;)n=r.prev,o.insert(r,a),r=n}),r.fix_list_elements&&t.addNodeFilter("ul,ol",t=>{let r,n,o=t.length;for(;o--;)if((n=(r=t[o]).parent)&&("ul"===n.name||"ol"===n.name)){if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{let a=new mD("li",1);a.attr("style","list-style-type: none"),r.wrap(a)}}});let o=n.getValidClasses();r.validate&&o&&t.addAttributeFilter("class",t=>{var r;let n=t.length;for(;n--;){let a=t[n],l=null!==(r=a.attr("class"))&&void 0!==r?r:"",i=tP.explode(l," "),s="";for(let d=0;d<i.length;d++){let u=i[d],c=!1,m=o["*"];m&&m[u]&&(c=!0),m=o[a.name],!c&&m&&m[u]&&(c=!0),c&&(s&&(s+=" "),s+=u)}s.length||(s=null),a.attr("class",s)}}),((t,r)=>{let{blob_cache:n}=r;if(n){let o=t=>{var r,o;let a=t.attr("src");(r=t).attr("src")===tT.transparentSrc||D(r.attr("data-mce-placeholder"))||D(t.attr("data-mce-bogus"))||B(a)||pW(n,a,!0).each(r=>{t.attr("src",r.blobUri())})};t.addAttributeFilter("src",t=>ea(t,o))}})(t,r)};function pG(t){return(pG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pY(t,r){return(pY=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function pX(t,r,n){return(pX=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?function(t,r,n){var o=[null];o.push.apply(o,r);var a=new(Function.bind.apply(t,o));return n&&pY(a,n.prototype),a}:Reflect.construct).apply(null,arguments)}function pQ(t){return function(t){if(Array.isArray(t))return pJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return pJ(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pJ(t,r):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pJ(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,o=Array(r);n<r;n++)o[n]=t[n];return o}var pZ=Object.hasOwnProperty,he=Object.setPrototypeOf,ht=Object.isFrozen,hr=Object.getPrototypeOf,hn=Object.getOwnPropertyDescriptor,ho=Object.freeze,ha=Object.seal,hl=Object.create,hi="undefined"!=typeof Reflect&&Reflect,hs=hi.apply,hd=hi.construct;hs||(hs=function(t,r,n){return t.apply(r,n)}),ho||(ho=function(t){return t}),ha||(ha=function(t){return t}),hd||(hd=function(t,r){return pX(t,pQ(r))});var hu,hc,hm,hf,hg=hk(Array.prototype.forEach),hp=hk(Array.prototype.pop),hh=hk(Array.prototype.push),hv=hk(String.prototype.toLowerCase),hb=hk(String.prototype.match),h$=hk(String.prototype.replace),hy=hk(String.prototype.indexOf),hC=hk(String.prototype.trim),h_=hk(RegExp.prototype.test),hx=(hf=TypeError,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return hd(hf,r)});function hk(t){return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return hs(t,r,o)}}function hw(t,r){he&&he(t,null);for(var n=r.length;n--;){var o=r[n];if("string"==typeof o){var a=hv(o);a!==o&&(ht(r)||(r[n]=a),o=a)}t[o]=!0}return t}function h8(t){var r,n=hl(null);for(r in t)hs(pZ,t,[r])&&(n[r]=t[r]);return n}function hE(t,r){for(;null!==t;){var n=hn(t,r);if(n){if(n.get)return hk(n.get);if("function"==typeof n.value)return hk(n.value)}t=hr(t)}return function(t){return console.warn("fallback value for",t),null}}var hS=ho(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hN=ho(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),hR=ho(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),hA=ho(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hO=ho(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),hT=ho(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hB=ho(["#text"]),hD=ho(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hL=ho(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hP=ho(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hM=ho(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hI=ha(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hF=ha(/<%[\w\W]*|[\w\W]*%>/gm),h0=ha(/^data-[\-\w.\u00B7-\uFFFF]/),hU=ha(/^aria-[\-\w]+$/),h1=ha(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hz=ha(/^(?:\w+script|data):/i),h6=ha(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hj=ha(/^html$/i),h4=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,n=function(r){return t(r)};if(n.version="2.3.8",n.removed=[],!r||!r.document||9!==r.document.nodeType)return n.isSupported=!1,n;var o=r.document,a=r.document,l=r.DocumentFragment,i=r.HTMLTemplateElement,s=r.Node,d=r.Element,u=r.NodeFilter,c=r.NamedNodeMap,m=void 0===c?r.NamedNodeMap||r.MozNamedAttrMap:c,f=r.HTMLFormElement,g=r.DOMParser,p=r.trustedTypes,h=d.prototype,v=hE(h,"cloneNode"),b=hE(h,"nextSibling"),$=hE(h,"childNodes"),y=hE(h,"parentNode");if("function"==typeof i){var C=a.createElement("template");C.content&&C.content.ownerDocument&&(a=C.content.ownerDocument)}var _=function(t,r){if("object"!==pG(t)||"function"!=typeof t.createPolicy)return null;var n=null,o="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(o)&&(n=r.currentScript.getAttribute(o));var a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML:function(t){return t}})}catch(l){return console.warn("TrustedTypes policy "+a+" could not be created."),null}}(p,o),x=_?_.createHTML(""):"",k=a,w=k.implementation,E=k.createNodeIterator,S=k.createDocumentFragment,N=k.getElementsByTagName,R=o.importNode,A={};try{A=h8(a).documentMode?a.documentMode:{}}catch(O){}var T={};n.isSupported="function"==typeof y&&w&&void 0!==w.createHTMLDocument&&9!==A;var B,D,L=hI,P=hF,M=h0,I=hU,F=hz,U=h6,z=h1,j=null,H=hw({},[].concat(pQ(hS),pQ(hN),pQ(hR),pQ(hO),pQ(hB))),V=null,q=hw({},[].concat(pQ(hD),pQ(hL),pQ(hP),pQ(hM))),W=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,G=null,Y=!0,X=!0,Q=!1,J=!1,Z=!1,ee=!1,et=!1,er=!1,en=!1,eo=!1,ea=!0,el=!0,ei=!1,es={},ed=null,eu=hw({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ec=null,em=hw({},["audio","video","img","source","image","track"]),ef=null,eg=hw({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ep="http://www.w3.org/1998/Math/MathML",eh="http://www.w3.org/2000/svg",ev="http://www.w3.org/1999/xhtml",eb=ev,e$=!1,ey=["application/xhtml+xml","text/html"],eC=null,e_=a.createElement("form"),ex=function(t){return t instanceof RegExp||t instanceof Function},ek=function(t){eC&&eC===t||(t&&"object"===pG(t)||(t={}),j="ALLOWED_TAGS"in(t=h8(t))?hw({},t.ALLOWED_TAGS):H,V="ALLOWED_ATTR"in t?hw({},t.ALLOWED_ATTR):q,ef="ADD_URI_SAFE_ATTR"in t?hw(h8(eg),t.ADD_URI_SAFE_ATTR):eg,ec="ADD_DATA_URI_TAGS"in t?hw(h8(em),t.ADD_DATA_URI_TAGS):em,ed="FORBID_CONTENTS"in t?hw({},t.FORBID_CONTENTS):eu,K="FORBID_TAGS"in t?hw({},t.FORBID_TAGS):{},G="FORBID_ATTR"in t?hw({},t.FORBID_ATTR):{},es="USE_PROFILES"in t&&t.USE_PROFILES,Y=!1!==t.ALLOW_ARIA_ATTR,X=!1!==t.ALLOW_DATA_ATTR,Q=t.ALLOW_UNKNOWN_PROTOCOLS||!1,J=t.SAFE_FOR_TEMPLATES||!1,Z=t.WHOLE_DOCUMENT||!1,er=t.RETURN_DOM||!1,en=t.RETURN_DOM_FRAGMENT||!1,eo=t.RETURN_TRUSTED_TYPE||!1,et=t.FORCE_BODY||!1,ea=!1!==t.SANITIZE_DOM,el=!1!==t.KEEP_CONTENT,ei=t.IN_PLACE||!1,z=t.ALLOWED_URI_REGEXP||z,eb=t.NAMESPACE||ev,t.CUSTOM_ELEMENT_HANDLING&&ex(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ex(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),D="application/xhtml+xml"===(B=B=-1===ey.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE)?function(t){return t}:hv,J&&(X=!1),en&&(er=!0),es&&(j=hw({},pQ(hB)),V=[],!0===es.html&&(hw(j,hS),hw(V,hD)),!0===es.svg&&(hw(j,hN),hw(V,hL),hw(V,hM)),!0===es.svgFilters&&(hw(j,hR),hw(V,hL),hw(V,hM)),!0===es.mathMl&&(hw(j,hO),hw(V,hP),hw(V,hM))),t.ADD_TAGS&&(j===H&&(j=h8(j)),hw(j,t.ADD_TAGS)),t.ADD_ATTR&&(V===q&&(V=h8(V)),hw(V,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&hw(ef,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&(ed===eu&&(ed=h8(ed)),hw(ed,t.FORBID_CONTENTS)),el&&(j["#text"]=!0),Z&&hw(j,["html","head","body"]),j.table&&(hw(j,["tbody"]),delete K.tbody),ho&&ho(t),eC=t)},ew=hw({},["mi","mo","mn","ms","mtext"]),e8=hw({},["foreignobject","desc","title","annotation-xml"]),eE=hw({},["title","style","font","a","script"]),eS=hw({},hN);hw(eS,hR),hw(eS,hA);var eN=hw({},hO);hw(eN,hT);var eR=function(t){hh(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(r){try{t.outerHTML=x}catch(o){t.remove()}}},eA=function(t,r){try{hh(n.removed,{attribute:r.getAttributeNode(t),from:r})}catch(o){hh(n.removed,{attribute:null,from:r})}if(r.removeAttribute(t),"is"===t&&!V[t]){if(er||en)try{eR(r)}catch(a){}else try{r.setAttribute(t,"")}catch(l){}}},eO=function(t){if(et)t="<remove></remove>"+t;else{var r,n,o=hb(t,/^[\r\n\t ]+/);n=o&&o[0]}"application/xhtml+xml"===B&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var l=_?_.createHTML(t):t;if(eb===ev)try{r=(new g).parseFromString(l,B)}catch(i){}if(!r||!r.documentElement){r=w.createDocument(eb,"template",null);try{r.documentElement.innerHTML=e$?"":l}catch(s){}}var d=r.body||r.documentElement;return t&&n&&d.insertBefore(a.createTextNode(n),d.childNodes[0]||null),eb===ev?N.call(r,Z?"html":"body")[0]:Z?r.documentElement:d},eT=function(t){return E.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},eB=function(t){return"object"===pG(s)?t instanceof s:t&&"object"===pG(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},eD=function(t,r,o){T[t]&&hg(T[t],function(t){t.call(n,r,o,eC)})},eL=function(t){if(eD("beforeSanitizeElements",t,null),(s=t)instanceof f&&("string"!=typeof s.nodeName||"string"!=typeof s.textContent||"function"!=typeof s.removeChild||!(s.attributes instanceof m)||"function"!=typeof s.removeAttribute||"function"!=typeof s.setAttribute||"string"!=typeof s.namespaceURI||"function"!=typeof s.insertBefore)||h_(/[\u0080-\uFFFF]/,t.nodeName))return eR(t),!0;var r,o,a,l,i,s,u=D(t.nodeName);if(eD("uponSanitizeElement",t,{tagName:u,allowedTags:j}),t.hasChildNodes()&&!eB(t.firstElementChild)&&(!eB(t.content)||!eB(t.content.firstElementChild))&&h_(/<[/\w]/g,t.innerHTML)&&h_(/<[/\w]/g,t.textContent)||"select"===u&&h_(/<template/i,t.innerHTML))return eR(t),!0;if(!j[u]||K[u]){if(!K[u]&&eM(u)&&(W.tagNameCheck instanceof RegExp&&h_(W.tagNameCheck,u)||W.tagNameCheck instanceof Function&&W.tagNameCheck(u)))return!1;if(el&&!ed[u]){var c=y(t)||t.parentNode,g=$(t)||t.childNodes;if(g&&c)for(var p=g.length-1;p>=0;--p)c.insertBefore(v(g[p],!0),b(t))}return eR(t),!0}return!(t instanceof d)||(r=t,(o=y(r))&&o.tagName||(o={namespaceURI:ev,tagName:"template"}),a=hv(r.tagName),l=hv(o.tagName),r.namespaceURI===eh?o.namespaceURI===ev?"svg"===a:o.namespaceURI===ep?"svg"===a&&("annotation-xml"===l||ew[l]):Boolean(eS[a]):r.namespaceURI===ep?o.namespaceURI===ev?"math"===a:o.namespaceURI===eh?"math"===a&&e8[l]:Boolean(eN[a]):r.namespaceURI===ev&&!(o.namespaceURI===eh&&!e8[l])&&!(o.namespaceURI===ep&&!ew[l])&&!eN[a]&&(eE[a]||!eS[a]))?("noscript"===u||"noembed"===u)&&h_(/<\/no(script|embed)/i,t.innerHTML)?(eR(t),!0):(J&&3===t.nodeType&&(i=h$(i=t.textContent,L," "),i=h$(i,P," "),t.textContent!==i&&(hh(n.removed,{element:t.cloneNode()}),t.textContent=i)),eD("afterSanitizeElements",t,null),!1):(eR(t),!0)},eP=function(t,r,n){if(ea&&("id"===r||"name"===r)&&(n in a||n in e_))return!1;if(X&&!G[r]&&h_(M,r));else if(Y&&h_(I,r));else if(!V[r]||G[r]){if(!(eM(t)&&(W.tagNameCheck instanceof RegExp&&h_(W.tagNameCheck,t)||W.tagNameCheck instanceof Function&&W.tagNameCheck(t))&&(W.attributeNameCheck instanceof RegExp&&h_(W.attributeNameCheck,r)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(r))||"is"===r&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&h_(W.tagNameCheck,n)||W.tagNameCheck instanceof Function&&W.tagNameCheck(n))))return!1}else if(ef[r]);else if(h_(z,h$(n,U,"")));else if("src"!==r&&"xlink:href"!==r&&"href"!==r||"script"===t||0!==hy(n,"data:")||!ec[t]){if(Q&&!h_(F,h$(n,U,"")));else if(n)return!1}return!0},eM=function(t){return t.indexOf("-")>0},eI=function(t){eD("beforeSanitizeAttributes",t,null);var r,n,o,a,l=t.attributes;if(l){var i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V};for(a=l.length;a--;){var s=r=l[a],d=s.name,u=s.namespaceURI;n="value"===d?r.value:hC(r.value),o=D(d);var c=n;if(i.attrName=o,i.attrValue=n,i.keepAttr=!0,i.forceKeepAttr=void 0,eD("uponSanitizeAttribute",t,i),n=i.attrValue,!i.forceKeepAttr){if(i.keepAttr){if(h_(/\/>/i,n))eA(d,t);else{J&&(n=h$(n,L," "),n=h$(n,P," "));var m=D(t.nodeName);if(eP(m,o,n)){if(n!==c)try{u?t.setAttributeNS(u,d,n):t.setAttribute(d,n)}catch(f){eA(d,t)}}else eA(d,t)}}else eA(d,t)}}eD("afterSanitizeAttributes",t,null)}},eF=function t(r){var n,o=eT(r);for(eD("beforeSanitizeShadowDOM",r,null);n=o.nextNode();)eD("uponSanitizeShadowNode",n,null),eL(n)||(n.content instanceof l&&t(n.content),eI(n));eD("afterSanitizeShadowDOM",r,null)};return n.sanitize=function(t,a){if((e$=!t)&&(t="<!-->"),"string"!=typeof t&&!eB(t)){if("function"!=typeof t.toString)throw hx("toString is not a function");if("string"!=typeof(t=t.toString()))throw hx("dirty is not a string, aborting")}if(!n.isSupported){if("object"===pG(r.toStaticHTML)||"function"==typeof r.toStaticHTML){if("string"==typeof t)return r.toStaticHTML(t);if(eB(t))return r.toStaticHTML(t.outerHTML)}return t}if(ee||ek(a),n.removed=[],"string"==typeof t&&(ei=!1),ei){if(t.nodeName){var i,d,u,c,m,f=D(t.nodeName);if(!j[f]||K[f])throw hx("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof s)1===(d=(i=eO("<!---->")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===d.nodeName||"HTML"===d.nodeName?i=d:i.appendChild(d);else{if(!er&&!J&&!Z&&-1===t.indexOf("<"))return _&&eo?_.createHTML(t):t;if(!(i=eO(t)))return er?null:eo?x:""}i&&et&&eR(i.firstChild);for(var g=eT(ei?t:i);u=g.nextNode();)3===u.nodeType&&u===c||eL(u)||(u.content instanceof l&&eF(u.content),eI(u),c=u);if(c=null,ei)return t;if(er){if(en)for(m=S.call(i.ownerDocument);i.firstChild;)m.appendChild(i.firstChild);else m=i;return V.shadowroot&&(m=R.call(o,m,!0)),m}var p=Z?i.outerHTML:i.innerHTML;return Z&&j["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&h_(hj,i.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+p),J&&(p=h$(p,L," "),p=h$(p,P," ")),_&&eo?_.createHTML(p):p},n.setConfig=function(t){ek(t),ee=!0},n.clearConfig=function(){eC=null,ee=!1},n.isValidAttribute=function(t,r,n){eC||ek({});var o=D(t),a=D(r);return eP(o,a,n)},n.addHook=function(t,r){"function"==typeof r&&(T[t]=T[t]||[],hh(T[t],r))},n.removeHook=function(t){if(T[t])return hp(T[t])},n.removeHooks=function(t){T[t]&&(T[t]=[])},n.removeAllHooks=function(){T={}},n}();let hH=tP.each,h7=tP.trim,h3={ftp:21,http:80,https:443,mailto:25},h9=["img","video"],h2=(t,r,n)=>{var o,a;let l=(t=>{try{return decodeURIComponent(t)}catch(r){return unescape(t)}})(r).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(l)||!t.allow_html_data_urls&&(/^data:image\//i.test(l)?(o=t.allow_svg_data_urls,a=n,(D(o)?!o:!D(a)||!er(h9,a))&&/^data:image\/svg\+xml/i.test(l)):/^data:/i.test(l)))};class h5{static parseDataUri(t){let r,n=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(r=o[1]),{type:r,data:n[1]}}static isDomSafe(t,r,n={}){if(n.allow_script_urls)return!0;{let o=au.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!h2(n,o,r)}}static getDocumentBaseUrl(t){var r;let n;return n=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(r=t.href)&&void 0!==r?r:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}constructor(t,r={}){this.path="",this.directory="",t=h7(t),this.settings=r;let n=r.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);let a=0===t.indexOf("//");if(0!==t.indexOf("/")||a||(t=(n&&n.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){let l=n?n.path:new h5(document.location.href).directory;if(""===(null==n?void 0:n.protocol))t="//mce_host"+o.toAbsPath(l,t);else{let i=/([^#?]*)([#?]?.*)/.exec(t);i&&(t=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(l,i[1])+i[2])}}t=t.replace(/@@/g,"(mce_at)");let s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);s&&hH(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],(t,r)=>{let n=s[r];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[t]=n}),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),a&&(o.protocol="")}setPath(t){let r=/^(.*?)\/?(\w+)?$/.exec(t);r&&(this.path=r[0],this.directory=r[1],this.file=r[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;let r=new h5(t,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();let n=this.getURI(),o=r.getURI();if(n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o)return n;let a=this.toRelPath(this.path,r.path);return r.query&&(a+="?"+r.query),r.anchor&&(a+="#"+r.anchor),a}toAbsolute(t,r){let n=new h5(t,{base_uri:this});return n.getURI(r&&this.isSameOrigin(n))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;let r=this.protocol?h3[this.protocol]:null;if(r&&(this.port||r)==(t.port||r))return!0}return!1}toRelPath(t,r){let n,o,a=0,l="",i=t.substring(0,t.lastIndexOf("/")).split("/"),s=r.split("/");if(i.length>=s.length){for(n=0,o=i.length;n<o;n++)if(n>=s.length||i[n]!==s[n]){a=n+1;break}}if(i.length<s.length){for(n=0,o=s.length;n<o;n++)if(n>=i.length||i[n]!==s[n]){a=n+1;break}}if(1===a)return r;for(n=0,o=i.length-(a-1);n<o;n++)l+="../";for(n=a-1,o=s.length;n<o;n++)l+=n!==a-1?"/"+s[n]:s[n];return l}toAbsPath(t,r){let n=0,o=/\/$/.test(r)?"/":"",a=t.split("/"),l=r.split("/"),i=[];hH(a,t=>{t&&i.push(t)});let s=[];for(let d=l.length-1;d>=0;d--)0!==l[d].length&&"."!==l[d]&&(".."!==l[d]?n>0?n--:s.push(l[d]):n++);let u=i.length-n,c;return 0!==(c=u<=0?ev(s).join("/"):i.slice(0,u).join("/")+"/"+ev(s).join("/")).indexOf("/")&&(c="/"+c),o&&c.lastIndexOf("/")!==c.length-1&&(c+=o),c}getURI(t=!1){let r;return this.source&&!t||(r="",t||(this.protocol?r+=this.protocol+"://":r+="//",this.userInfo&&(r+=this.userInfo+"@"),this.host&&(r+=this.host),this.port&&(r+=":"+this.port)),this.path&&(r+=this.path),this.query&&(r+="?"+this.query),this.anchor&&(r+="#"+this.anchor),this.source=r),this.source}}let hV=tP.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),hq="data-mce-type",hW=0,hK=(t,r,n,o)=>{var a,l,i,s;let d=r.validate,u=n.getSpecialElements();8===t.nodeType&&!r.allow_conditional_comments&&/^\[if/i.test(null!==(a=t.nodeValue)&&void 0!==a?a:"")&&(t.nodeValue=" "+t.nodeValue);let c=null!==(l=null==o?void 0:o.tagName)&&void 0!==l?l:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===c)return;let m=rc(t),f=tY(m,hq),g=tK(m,"data-mce-bogus");if(!f&&E(g))return void("all"===g?nr(m):nn(m));let p=n.getElementRule(c);if(!d||p){if(D(o)&&(o.allowedTags[c]=!0),d&&p&&!f){if(ea(null!==(i=p.attributesForced)&&void 0!==i?i:[],t=>{tq(m,t.name,"{$uid}"===t.value?"mce_"+hW++:t.value)}),ea(null!==(s=p.attributesDefault)&&void 0!==s?s:[],t=>{tY(m,t.name)||tq(m,t.name,"{$uid}"===t.value?"mce_"+hW++:t.value)}),p.attributesRequired&&!en(p.attributesRequired,t=>tY(m,t))||p.removeEmptyAttrs&&(t=>{let r=t.dom.attributes;return null==r||0===r.length})(m))return void nn(m);p.outputName&&p.outputName!==c&&ls(m,p.outputName)}}else eP(u,c)?nr(m):nn(m)},hG=(t,r,n,o,a)=>!(o in hV&&h2(t,a,n))&&(!t.validate||r.isValid(n,o)||eW(o,"data-")||eW(o,"aria-")),hY=(t,r)=>t.hasAttribute(hq)&&("id"===r||"class"===r||"style"===r),hX=(t,r)=>t in r.getBoolAttrs(),hQ=(t,r,n)=>{let{attributes:o}=t;for(let a=o.length-1;a>=0;a--){let l=o[a],i=l.name,s=l.value;hG(r,n,t.tagName.toLowerCase(),i,s)||hY(t,i)?hX(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},hJ=(t,r)=>{let n=h4();return n.addHook("uponSanitizeElement",(n,o)=>{hK(n,t,r,o)}),n.addHook("uponSanitizeAttribute",(n,o)=>{let a=n.tagName.toLowerCase(),{attrName:l,attrValue:i}=o;o.keepAttr=hG(t,r,a,l,i),o.keepAttr?(o.allowedAttributes[l]=!0,hX(l,r)&&(o.attrValue=l),t.allow_svg_data_urls&&eW(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):hY(n,l)&&(o.forceKeepAttr=!0)}),n},hZ=tP.makeMap,ve=tP.extend,vt=(t,r,n)=>{let o=t.name,a=o in n&&"title"!==o&&"textarea"!==o,l=r.childNodes;for(let i=0,s=l.length;i<s;i++){let d=l[i],u=new mD(d.nodeName.toLowerCase(),d.nodeType);if(nx(d)){let c=d.attributes;for(let m=0,f=c.length;m<f;m++){let g=c[m];u.attr(g.name,g.value)}}else nO(d)?(u.value=d.data,a&&(u.raw=!0)):(nD(d)||nT(d)||nB(d))&&(u.value=d.data);vt(u,d,n),t.append(u)}},vr=(t={},r=ax())=>{var n,o,a;let l=p4(),i=p4(),s={validate:!0,root_name:"body",sanitize:!0,...t},d=new DOMParser,u=((t,r)=>{if(t.sanitize){let n=hJ(t,r);return(r,o)=>{n.sanitize(r,((t,r)=>{let n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=r,t.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:t.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(t,o)),n.removed=[]}}return(n,o)=>{let a=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT),l;for(;l=a.nextNode();)hK(l,t,r),nx(l)&&hQ(l,t,r)}})(s,r),c=l.addFilter,m=l.getFilters,f=l.removeFilter,g=i.addFilter,p=i.getFilters,h=i.removeFilter,v=(t,n)=>{let o=E(n.attr(hq)),a=1===n.type&&!eP(t,n.name)&&!o2(r,n);return 3===n.type||a&&!o},b={schema:r,addAttributeFilter:g,getAttributeFilters:p,removeAttributeFilter:h,addNodeFilter:c,getNodeFilters:m,removeNodeFilter:f,parse(t,n={}){var o;let a=s.validate,l=null!==(o=n.context)&&void 0!==o?o:s.root_name,i=((t,n,o="html")=>{let a="xhtml"===o?"application/xhtml+xml":"text/html",l=eP(r.getSpecialElements(),n.toLowerCase()),i=l?`<${n}>${t}</${n}>`:t,s="xhtml"===o?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${i}</body></html>`:`<body>${i}</body>`,c=d.parseFromString(s,a).body;return u(c,a),l?c.firstChild:c})(t,l,n.format);o6(r,i);let c=new mD(l,11);vt(c,i,r.getSpecialElements()),i.innerHTML="";let[f,g]=((t,r,n,o)=>{let a=n.validate,l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=ve(hZ("script,style,head,html,body,title,meta,param"),r.getBlockElements()),d=aC(r),u=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,f=t=>{let r=t.parent;for(;D(r);){if(r.name in i)return!0;r=r.parent}return!1},g=t=>t.name in s||o2(r,t),p=(r,n)=>{let a=n?r.prev:r.next;return!D(a)&&!B(r.parent)&&g(r.parent)&&(r.parent!==t||!0===o.isRootContent)};return[t=>{var r,n,o;if(3===t.type&&!f(t)){let a=null!==(r=t.value)&&void 0!==r?r:"";a=a.replace(u," "),n=t.prev,o=g,(D(n)&&(o(n)||"br"===n.name)||p(t,!0))&&(a=a.replace(c,"")),0===a.length?t.remove():t.value=a}},t=>{var n,s,u;if(1===t.type){let c=r.getElementRule(t.name);if(a&&c){let h=gN(r,l,i,t);c.paddInEmptyBlock&&h&&(t=>{let n=t;for(;D(n);){if(n.name in d)return gN(r,l,i,n);n=n.parent}return!1})(t)?gE(o,g,t):c.removeEmpty&&h?g(t)?t.remove():t.unwrap():c.paddEmpty&&(h||(s=t,gS(s,"#text")&&(null===(u=null==s?void 0:s.firstChild)||void 0===u?void 0:u.value)==="\xa0"))&&gE(o,g,t)}}else if(3===t.type&&!f(t)){let v=null!==(n=t.value)&&void 0!==n?n:"";(t.next&&g(t.next)||p(t,!1))&&(v=v.replace(m,"")),0===v.length?t.remove():t.value=v}}]})(c,r,s,n),h=[],b={nodes:{},attributes:{}},$=t=>gk(m(),p(),t,b);if(((t,r,n)=>{let o=[];for(let a=t,l=a;a;l=a,a=a.walk()){let i=a;ea(r,t=>t(i)),B(i.parent)&&i!==t?a=l:o.push(i)}for(let s=o.length-1;s>=0;s--){let d=o[s];ea(n,t=>t(d))}})(c,[f,$],[g,a?t=>{var n,o;return n=t,o=h,void(gT(r,n)&&o.push(n))}:I]),h.reverse(),a&&h.length>0){if(n.context){let{pass:y,fail:C}=ei(h,t=>t.parent===c);gO(C,r,c,$),n.invalid=y.length>0}else gO(h,r,c,$)}let _=((t,r)=>{var n;let o=null!==(n=r.forced_root_block)&&void 0!==n?n:t.forced_root_block;return!1===o?"":!0===o?"p":o})(s,n);return _&&("body"===c.name||n.isRootContent)&&((t,n)=>{let o=ve(hZ("script,style,head,html,body,title,meta,param"),r.getBlockElements()),a=/^[ \t\r\n]+/,l=/[ \t\r\n]+$/,i=t.firstChild,d=null,u=t=>{var r,n;t&&((i=t.firstChild)&&3===i.type&&(i.value=null===(r=i.value)||void 0===r?void 0:r.replace(a,"")),(i=t.lastChild)&&3===i.type&&(i.value=null===(n=i.value)||void 0===n?void 0:n.replace(l,"")))};if(r.isValidChild(t.name,n.toLowerCase())){for(;i;){let c=i.next;v(o,i)?(d||((d=new mD(n,1)).attr(s.forced_root_block_attrs),t.insert(d,i)),d.append(i)):(u(d),d=null),i=c}u(d)}})(c,_),n.invalid||gw(b,n),c}};return pK(b,s),n=b,o=s,a=r,o.inline_styles&&pH(n,o,a),b},vn=(t,r,n)=>{var o;let a=(o=t,g1(o)?m6({validate:!1}).serialize(o):o),l=r(a);if(l.isDefaultPrevented())return l;if(g1(t)){if(l.content!==a){let i=vr({validate:!1,forced_root_block:!1,sanitize:n}).parse(l.content,{context:t.name});return{...l,content:i}}return{...l,content:t}}return l},vo=(t,r)=>{if(r.no_events)return lJ.value(r);{var n,o;let a=(n=t,o=r,n.dispatch("BeforeGetContent",o));return a.isDefaultPrevented()?lJ.error(cl(t,{content:"",...a}).content):lJ.value(a)}},va=(t,r,n)=>{if(n.no_events)return r;{let o=vn(r,r=>cl(t,{...n,content:r}),sU(t));return o.content}},vl=(t,r)=>{if(r.no_events)return lJ.value(r);{let n=vn(r.content,n=>{var o,a;return o=t,a={...r,content:n},o.dispatch("BeforeSetContent",a)},sU(t));return n.isDefaultPrevented()?(ca(t,n),lJ.error(void 0)):lJ.value(n)}},vi=(t,r,n)=>{n.no_events||ca(t,{...n,content:r})},vs=(t,r,n)=>({element:t,width:r,rows:n}),vd=(t,r)=>({element:t,cells:r}),vu=(t,r)=>({x:t,y:r}),vc=(t,r)=>tG(t,r).bind(te).getOr(1),vm=(t,r,n)=>{let o=t.rows;return!!(o[n]?o[n].cells:[])[r]},vf=t=>eu(t,(t,r)=>r.cells.length>t?r.cells.length:t,0),vg=(t,r)=>{let n=t.rows;for(let o=0;o<n.length;o++){let a=n[o].cells;for(let l=0;l<a.length;l++)if(rh(a[l],r))return Q.some(vu(l,o))}return Q.none()},vp=(t,r,n,o,a)=>{let l=[],i=t.rows;for(let s=n;s<=a;s++){let d=i[s].cells,u=r<o?d.slice(r,o+1):d.slice(o,r+1);l.push(vd(i[s].element,u))}return l},vh=t=>{var r;return((t,r)=>{let n=ll(t.element),o=rd("tbody");return ne(o,r),rJ(n,o),n})(t,eo(t.rows,t=>{let r=eo(t.cells,t=>{let r=li(t);return tX(r,"colspan"),tX(r,"rowspan"),r}),n=ll(t.element);return ne(n,r),n}))},vv=(t,r)=>{var n,o,a;let l=rc(r.commonAncestorContainer),i=fr(l,t),s=es(i,oe),d=(n=i,o=r,em(n,t=>"li"===t6(t)&&uv(t,o)).fold(z([]),t=>{var r;return em(n,t=>"ul"===t6(t)||"ol"===t6(t)).map(t=>{let r=rd(t6(t)),n=eT(rK(t),(t,r)=>eW(r,"list-style"));return r5(r,n),[rd("li"),r]}).getOr([])})),u=s.concat(d.length?d:(a=l,nY(a)?rC(a).filter(nG).fold(z([]),t=>[a,t]):nG(a)?[a]:[]));return eo(u,ll)},vb=()=>cE([]),v$=(t,r)=>{var n,o;return(n=t,r6(r[0],"table",V(rh,n))).bind(t=>{var n,o,a;let l=r[0],i=r[r.length-1],s=(t=>{let r=vs(ll(t),0,[]);return ea(nb(t,"tr"),(t,n)=>{ea(nb(t,"td,th"),(o,a)=>{((t,r,n,o,a)=>{let l=vc(a,"rowspan"),i=vc(a,"colspan"),s=t.rows;for(let d=n;d<n+l;d++){s[d]||(s[d]=vd(li(o),[]));for(let u=r;u<r+i;u++)s[d].cells[u]=d===n&&u===r?a:ll(a)}})(r,((t,r,n)=>{for(;vm(t,r,n);)r++;return r})(r,a,n),n,t,o)})}),vs(r.element,vf(r.rows),r.rows)})(t);return(n=s,o=l,a=i,vg(n,o).bind(t=>vg(n,a).map(r=>((t,r,n)=>{let o=r.x,a=r.y,l=n.x,i=n.y,s=a<i?vp(t,o,a,l,i):vp(t,o,i,l,a);return vs(t.element,vf(s),s)})(n,t,r)))).map(t=>cE([vh(t)]))}).getOrThunk(vb)},vy=(t,r)=>{var n,o,a,l;let i=um(r,t);return i.length>0?v$(t,i):(n=t,(o=r).length>0&&o[0].collapsed?vb():(a=n,((t,r)=>{let n=eu(r,(t,r)=>(rJ(r,t),r),t);return r.length>0?cE([n]):n})(rc((l=o[0]).cloneContents()),vv(a,l))))},vC=(t,r)=>r>=0&&r<t.length&&ur(t.charAt(r)),v_=t=>oa(t.innerText),vx=t=>nx(t)?t.outerHTML:nO(t)?au.encodeRaw(t.data,!1):nD(t)?"<!--"+t.data+"-->":"",vk=(t,r)=>{var n,o;let a;return n=((t,r)=>{let n=t.length+r.length+2,o=Array(n),a=Array(n),l=(n,o,a,i,d)=>{let u=s(n,o,a,i);if(null===u||u.start===o&&u.diag===o-i||u.end===n&&u.diag===n-a){let c=n,m=a;for(;c<o||m<i;)c<o&&m<i&&t[c]===r[m]?(d.push([0,t[c]]),++c,++m):o-n>i-a?(d.push([2,t[c]]),++c):(d.push([1,r[m]]),++m)}else{l(n,u.start,a,u.start-u.diag,d);for(let f=u.start;f<u.end;++f)d.push([0,t[f]]);l(u.end,o,u.end-u.diag,i,d)}},i=(n,o,a,l)=>{var i,s,d;let u=n;for(;u-o<l&&u<a&&t[u]===r[u-o];)++u;return i=n,{start:i,end:s=u,diag:o}},s=(n,l,s,d)=>{let u=l-n,c=d-s;if(0===u||0===c)return null;let m=u-c,f=c+u,g=(f%2==0?f:f+1)/2,p,h,v,b,$;for(o[1+g]=n,a[1+g]=l+1,p=0;p<=g;++p){for(h=-p;h<=p;h+=2){for(v=h+g,h===-p||h!==p&&o[v-1]<o[v+1]?o[v]=o[v+1]:o[v]=o[v-1]+1,$=(b=o[v])-n+s-h;b<l&&$<d&&t[b]===r[$];)o[v]=++b,++$;if(m%2!=0&&m-p<=h&&h<=m+p&&a[v-m]<=o[v])return i(a[v-m],h+n-s,l,d)}for(h=m-p;h<=m+p;h+=2){for(v=h+g-m,h===m-p||h!==m+p&&a[v+1]<=a[v-1]?a[v]=a[v+1]-1:a[v]=a[v-1],$=(b=a[v]-1)-n+s-h;b>=n&&$>=s&&t[b]===r[$];)a[v]=b--,$--;if(m%2==0&&-p<=h&&h<=p&&a[v]<=o[v+m])return i(a[v],h+n-s,l,d)}}return null},d=[];return l(0,t.length,0,r.length,d),d})(eo(ek(r.childNodes),vx),t),o=r,a=0,ea(n,t=>{0===t[0]?a++:1===t[0]?(((t,r,n)=>{let o=(t=>{let r,n=document.createElement("div"),o=document.createDocumentFragment();for(t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o})(r);if(t.hasChildNodes()&&n<t.childNodes.length){let a=t.childNodes[n];t.insertBefore(o,a)}else t.appendChild(o)})(o,t[1],a),a++):2===t[0]&&((t,r)=>{if(t.hasChildNodes()&&r<t.childNodes.length){let n=t.childNodes[r];t.removeChild(n)}})(o,a)}),r},vw=eH(()=>document.implementation.createHTMLDocument("undo")),v8=t=>{var r,n,o,a;let l=es(eo(ek((r=t.getBody()).childNodes),vx),t=>t.length>0),i=ep(l,r=>{let n=mM(t.serializer,r);return n.length>0?[n]:[]}),s=i.join("");return -1!==s.indexOf("</iframe>")?{type:"fragmented",fragments:i,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}},vE=(t,r,n)=>{let o=n?r.beforeBookmark:r.bookmark;"fragmented"===r.type?vk(r.fragments,t.getBody()):t.setContent(r.content,{format:"raw",no_selection:!D(o)||!dV(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},vS=t=>"fragmented"===t.type?t.fragments.join(""):t.content,vN=t=>{let r=rd("body",vw());return nl(r,vS(t)),ea(nb(r,"*[data-mce-bogus]"),nn),na(r)},vR=(t,r)=>{var n,o,a,l;return!(!t||!r)&&(n=t,o=r,vS(n)===vS(o)||(a=t,l=r,vN(a)===vN(l)))},vA=t=>0===t.get(),vO=(t,r,n)=>{vA(n)&&(t.typing=r)},vT=(t,r)=>{t.typing&&(vO(t,!1,r),t.add())},vB=t=>({init:{bindEvents:I},undoManager:{beforeChange(r,n){var o,a,l;return o=t,a=r,l=n,void(vA(a)&&l.set(lY(o.selection)))},add:(r,n,o,a,l,i)=>((t,r,n,o,a,l,i)=>{let s=v8(t),d=tP.extend(l||{},s);if(!vA(o)||t.removed)return null;let u=r.data[n.get()];if(t.dispatch("BeforeAddUndo",{level:d,lastLevel:u,originalEvent:i}).isDefaultPrevented()||u&&vR(u,d))return null;r.data[n.get()]&&a.get().each(t=>{r.data[n.get()].beforeBookmark=t});let c=sa(t);if(c&&r.data.length>c){for(let m=0;m<r.data.length-1;m++)r.data[m]=r.data[m+1];r.data.length--,n.set(r.data.length)}d.bookmark=lY(t.selection),n.get()<r.data.length-1&&(r.data.length=n.get()+1),r.data.push(d),n.set(r.data.length-1);let f={level:d,lastLevel:u,originalEvent:i};return n.get()>0?(t.setDirty(!0),t.dispatch("AddUndo",f),t.dispatch("change",f)):t.dispatch("AddUndo",f),d})(t,r,n,o,a,l,i),undo(r,n,o){var a,l,i,s;let d;return a=t,l=r,i=n,s=o,l.typing&&(l.add(),l.typing=!1,vO(l,!1,i)),s.get()>0&&(s.set(s.get()-1),vE(a,d=l.data[s.get()],!0),a.setDirty(!0),a.dispatch("Undo",{level:d})),d},redo(r,n){var o,a,l;let i;return o=t,a=r,l=n,a.get()<l.length-1&&(a.set(a.get()+1),vE(o,i=l[a.get()],!1),o.setDirty(!0),o.dispatch("Redo",{level:i})),i},clear(r,n){var o,a,l;return o=t,a=r,l=n,void(a.data=[],l.set(0),a.typing=!1,o.dispatch("ClearUndos"))},reset(t){var r;(r=t).clear(),r.add()},hasUndo(r,n){var o,a,l;return o=t,a=r,n.get()>0||a.typing&&a.data[0]&&!vR(v8(o),a.data[0])},hasRedo(t,r){var n,o;return n=t,r.get()<n.data.length-1&&!n.typing},transact(t,r,n){var o,a,l;return o=t,a=r,l=n,vT(o,a),o.beforeChange(),o.ignore(l),o.add()},ignore:(t,r)=>((t,r)=>{try{t.set(t.get()+1),r()}finally{t.set(t.get()-1)}})(t,r),extra:(r,n,o,a)=>((t,r,n,o,a)=>{if(r.transact(o)){let l=r.data[n.get()].bookmark,i=r.data[n.get()-1];vE(t,i,!0),r.transact(a)&&(r.data[n.get()-1].beforeBookmark=l)}})(t,r,n,o,a)},formatter:{match:(r,n,o,a)=>gV(t,r,n,o,a),matchAll:(r,n)=>((t,r,n)=>{let o=[],a={},l=t.selection.getStart();return t.dom.getParent(l,l=>{for(let i=0;i<r.length;i++){let s=r[i];!a[s]&&g5(t,l,s,n)&&(a[s]=!0,o.push(s))}},t.dom.getRoot()),o})(t,r,n),matchNode:(r,n,o,a)=>g5(t,r,n,o,a),canApply:r=>((t,r)=>{let n=t.formatter.get(r),o=t.dom;if(n&&t.selection.isEditable()){let a=t.selection.getStart(),l=uP(o,a);for(let i=n.length-1;i>=0;i--){let s=n[i];if(!uF(s))return!0;for(let d=l.length-1;d>=0;d--)if(o.is(l[d],s.selector))return!0}}return!1})(t,r),closest:r=>((t,r)=>{let n=r=>rh(r,rc(t.getBody()));return Q.from(t.selection.getStart(!0)).bind(o=>g4(rc(o),n=>ew(r,r=>{var o,a;return o=n,a=r,g5(t,o.dom,a)?Q.some(a):Q.none()}),n)).getOrNull()})(t,r),apply:(r,n,o)=>pF(t,r,n,o),remove:(r,n,o,a)=>pB(t,r,n,o,a),toggle:(r,n,o)=>((t,r,n,o)=>{let a=t.formatter.get(r);a&&(!gV(t,r,n,o)||"toggle"in a[0]&&!a[0].toggle?pF(t,r,n,o):pB(t,r,n,o))})(t,r,n,o),formatChanged(r,n,o,a,l){var i,s,d,u,c,m;return i=t,s=r,d=n,u=o,((t,r,n,o,a,l)=>{let i=r.get();ea(n.split(","),r=>{let n=eL(i,r).getOrThunk(()=>{let t={withSimilar:{state:aj(!1),similar:!0,callbacks:[]},withoutSimilar:{state:aj(!1),similar:!1,callbacks:[]},withVars:[]};return i[r]=t,t}),s=()=>{let n=pz(t);return p1(t,n,r,a,l).isSome()};if(T(l)){let d=a?n.withSimilar:n.withoutSimilar;d.callbacks.push(o),1===d.callbacks.length&&d.state.set(s())}else n.withVars.push({state:aj(s()),similar:a,vars:l,callback:o})}),r.set(i)})(i,s,d,u,c=a,l),{unbind:()=>((t,r,n)=>{let o=t.get();ea(r.split(","),t=>eL(o,t).each(r=>{o[t]={withSimilar:{...r.withSimilar,callbacks:es(r.withSimilar.callbacks,t=>t!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:es(r.withoutSimilar.callbacks,t=>t!==n)},withVars:es(r.withVars,t=>t.callback!==n)}})),t.set(o)})(s,d,u)}}},editor:{getContent(r){var n,o;return n=t,o=r,Q.from(n.getBody()).fold(z("tree"===o.format?new mD("body",11):""),t=>mU(n,o,t))},setContent(r,n){var o,a,l;return o=t,a=r,l=n,Q.from(o.getBody()).map(t=>g1(a)?((t,r,n,o)=>{g8(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);let a=m6({validate:!1},t.schema).serialize(n),l=nJ(rc(r))?a:tP.trim(a);return gz(t,l,o.no_selection),{content:n,html:l}})(o,t,a,l):((t,r,n,o)=>{if(0===n.length||/^\s+$/.test(n)){let a='<br data-mce-bogus="1">';"TABLE"===r.nodeName?n="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(n="<li>"+a+"</li>");let l=i_(t);return t.schema.isValidChild(r.nodeName.toLowerCase(),l.toLowerCase())?(n=a,n=t.dom.createHTML(l,ix(t),n)):n||(n=a),gz(t,n,o.no_selection),{content:n,html:n}}{"raw"!==o.format&&(n=m6({validate:!1},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0})));let i=nJ(rc(r))?n:tP.trim(n);return gz(t,i,o.no_selection),{content:i,html:i}}})(o,t,a,l)).getOr({content:a,html:g1(l.content)?"":l.content})},insertContent:(r,n)=>gU(t,r,n),addVisual:r=>((t,r)=>{let n=t.dom,o=D(r)?r:t.getBody();ea(n.select("table,a",o),r=>{switch(r.nodeName){case"TABLE":let o=sg(t),a=n.getAttrib(r,"border");a&&"0"!==a||!t.hasVisual?n.removeClass(r,o):n.addClass(r,o);break;case"A":if(!n.getAttrib(r,"href")){let l=n.getAttrib(r,"name")||r.id,i=sp(t);l&&t.hasVisual?n.addClass(r,i):n.removeClass(r,i)}}}),t.dispatch("VisualAid",{element:r,hasVisual:t.hasVisual})})(t,r)},selection:{getContent:(r,n)=>((t,r,n={})=>{var o,a;let l=(o=n,a=r,{...o,format:a,get:!0,selection:!0,getInner:!0});return vo(t,l).fold(j,r=>{let n=((t,r)=>{if("text"===r.format){var n;return n=t,Q.from(n.selection.getRng()).map(t=>{var r,o;let a=Q.from(n.dom.getParent(t.commonAncestorContainer,n.dom.isBlock)),l=n.getBody(),i=a.map(t=>t.nodeName).getOr("div").toLowerCase(),s=rc(t.cloneContents());mF(s),m0(s);let d=n.dom.add(l,i,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},s.dom),u=v_(d),c=oa(null!==(r=d.textContent)&&void 0!==r?r:"");if(n.dom.remove(d),vC(c,0)||vC(c,c.length-1)){let m=a.getOr(l),f=v_(m),g=f.indexOf(u);return -1===g?u:(vC(f,g-1)?" ":"")+u+(vC(f,g+u.length)?" ":"")}return u}).getOr("")}{let o=((t,r)=>{let n=t.selection.getRng(),o=t.dom.create("body"),a=t.selection.getSel(),l=mw(t,uc(a)),i=r.contextual?vy(rc(t.getBody()),l).dom:n.cloneContents();return i&&o.appendChild(i),t.selection.serializer.serialize(o,r)})(t,r);return"tree"===r.format?o:t.selection.isCollapsed()?"":o}})(t,r);return va(t,n,r)})})(t,r,n)},autocompleter:{addDecoration:r=>mN(t,r),removeDecoration(){var r,n;return r=t,n=rc(t.getBody()),mR(n).each(t=>{let n=r.selection.getBookmark();nn(t),r.selection.moveToBookmark(n)})}},raw:{getModel:()=>Q.none()}}),vD=t=>eP(t.plugins,"rtc"),vL=t=>t.rtcInstance?t.rtcInstance:vB(t),vP=t=>{let r=t.rtcInstance;if(r)return r;throw Error("Failed to get RTC instance not yet initialized.")},vM=t=>vP(t).init.bindEvents(),vI=t=>0===t.dom.length?(nr(t),Q.none()):Q.some(t),vF=(t,r,n,o)=>{t.bind(t=>((o?fB:fT)(t.dom,o?t.dom.length:0),r.filter(t3).map(r=>((t,r,n,o)=>{let a=t.dom,l=r.dom,i=o?a.length:l.length;o?(fD(a,l,!1,!o),n.setStart(l,i)):(fD(l,a,!1,!o),n.setEnd(l,i))})(t,r,n,o)))).orThunk(()=>{var t,n;let a=(t=r,n=o,t.filter(t=>ce.isBookmarkNode(t.dom)).bind(n?rw:rk)).or(r).filter(t3);return a.map(t=>((t,r)=>{rC(t).each(n=>{let o=t.dom;r&&fk(n,lM(o,0))?fT(o,0):!r&&fw(n,lM(o,o.length))&&fB(o,o.length)})})(t,o))})},v0=(t,r,n)=>{if(eP(t,r)){let o=es(t[r],t=>t!==n);0===o.length?delete t[r]:t[r]=o}},vU=t=>!(!t||!t.ownerDocument)&&rv(rc(t.ownerDocument),rc(t)),v1=(t,r,n,o)=>{let a,l,{selectorChangedWithUnbind:i}=((t,r)=>{let n,o,a=(r,n)=>em(n,n=>t.is(n,r)),l=r=>t.getParents(r,void 0,t.getRoot());return{selectorChangedWithUnbind:(t,i)=>(n||(n={},o={},r.on("NodeChange",t=>{let r=t.element,i=l(r),s={};eS(n,(t,r)=>{a(r,i).each(n=>{o[r]||(ea(t,t=>{t(!0,{node:n,selector:r,parents:i})}),o[r]=t),s[r]=t})}),eS(o,(t,n)=>{s[n]||(delete o[n],ea(t,t=>{t(!1,{node:r,selector:n,parents:i})}))})})),n[t]||(n[t]=[]),n[t].push(i),a(t,l(r.selection.getStart())).each(()=>{o[t]=n[t]}),{unbind(){v0(n,t,i),v0(o,t,i)}})}})(t,o),s=(t,r)=>((t,r,n={})=>{var o,a;let l=(o=n,a=r,{format:"html",...o,set:!0,selection:!0,content:a});vl(t,l).each(r=>{let n=((t,r)=>{if("raw"!==r.format){let n=t.selection.getRng(),o=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),a=o?{context:o.nodeName.toLowerCase()}:{},l=t.parser.parse(r.content,{forced_root_block:!1,...a,...r});return m6({validate:!1},t.schema).serialize(l)}return r.content})(t,r),o=t.selection.getRng();((t,r)=>{let n=Q.from(r.firstChild).map(rc),o=Q.from(r.lastChild).map(rc);t.deleteContents(),t.insertNode(r);let a=n.bind(rk).filter(t3).bind(vI),l=o.bind(rw).filter(t3).bind(vI);vF(a,n,t,!0),vF(l,o,t,!1),t.collapse(!1)})(o,o.createContextualFragment(n)),t.selection.setRng(o),cX(t,o),vi(t,n,r)})})(o,t,r),d=t=>{let r=c();r.collapse(!!t),m(r)},u=()=>r.getSelection?r.getSelection():r.document.selection,c=()=>{let n,i=(t,r,n)=>{try{return r.compareBoundaryPoints(t,n)}catch(o){return -1}},s=r.document;if(D(o.bookmark)&&!m$(o)){let d=mi(o);if(d.isSome())return d.map(t=>mw(o,[t])[0]).getOr(s.createRange())}try{let c=u();c&&!n_(c.anchorNode)&&(n=c.rangeCount>0?c.getRangeAt(0):s.createRange(),n=mw(o,[n])[0])}catch(m){}if(n||(n=s.createRange()),nL(n.startContainer)&&n.collapsed){let f=t.getRoot();n.setStart(f,0),n.setEnd(f,0)}return a&&l&&(0===i(n.START_TO_START,n,a)&&0===i(n.END_TO_END,n,a)?n=l:(a=null,l=null)),n},m=(t,r)=>{var n;if(!((n=t)&&vU(n.startContainer)&&vU(n.endContainer)))return;let i=u();if(t=o.dispatch("SetSelectionRange",{range:t,forward:r}).range,i){l=t;try{i.removeAllRanges(),i.addRange(t)}catch(s){}!1===r&&i.extend&&(i.collapse(t.endContainer,t.endOffset),i.extend(t.startContainer,t.startOffset)),a=i.rangeCount>0?i.getRangeAt(0):null}if(!t.collapsed&&t.startContainer===t.endContainer&&(null==i?void 0:i.setBaseAndExtent)&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){let d=t.startContainer.childNodes[t.startOffset];d&&"IMG"===d.nodeName&&(i.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),i.anchorNode===t.startContainer&&i.focusNode===t.endContainer||i.setBaseAndExtent(d,0,d,1))}o.dispatch("AfterSetSelectionRange",{range:t,forward:r})},f=()=>{let r=u(),n=null==r?void 0:r.anchorNode,o=null==r?void 0:r.focusNode;if(!r||!n||!o||n_(n)||n_(o))return!0;let a=t.createRng(),l=t.createRng();try{a.setStart(n,r.anchorOffset),a.collapse(!0),l.setStart(o,r.focusOffset),l.collapse(!0)}catch(i){return!0}return 0>=a.compareBoundaryPoints(a.START_TO_START,l)},g={dom:t,win:r,serializer:n,editor:o,expand:(r={type:"word"})=>m(cF(t).expand(c(),r)),collapse:d,setCursorLocation(r,n){let a=t.createRng();D(r)&&D(n)?(a.setStart(r,n),a.setEnd(r,n),m(a),d(!1)):(ub(t,a,o.getBody(),!0),m(a))},getContent:t=>((t,r={})=>{var n,o,a;return n=t,o=r.format?r.format:"html",a=r,vP(n).selection.getContent(o,a)})(o,t),setContent:s,getBookmark:(t,r)=>p.getBookmark(t,r),moveToBookmark:t=>p.moveToBookmark(t),select(r,n){var o,a,l;return(o=t,a=r,l=n,Q.from(a).bind(t=>Q.from(t.parentNode).map(r=>{let n=o.nodeIndex(t),a=o.createRng();return a.setStart(r,n),a.setEnd(r,n+1),l&&(ub(o,a,t,!0),ub(o,a,t,!1)),a}))).each(m),r},isCollapsed(){let t=c(),r=u();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!r||t.collapsed)},isEditable(){let r=c(),n=o.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?eh(n,r=>t.isEditable(r.parentElement)):r.startContainer===r.endContainer?t.isEditable(r.startContainer):t.isEditable(r.startContainer)&&t.isEditable(r.endContainer)},isForward:f,setNode:r=>(s(t.getOuterHTML(r)),r),getNode:()=>((t,r)=>{if(!r)return t;let n=r.startContainer,o=r.endContainer,a=r.startOffset,l=r.endOffset,i=r.commonAncestorContainer;r.collapsed||(n===o&&l-a<2&&n.hasChildNodes()&&(i=n.childNodes[a]),nO(n)&&nO(o)&&(n=n.length===a?mk(n.nextSibling,!0):n.parentNode,o=0===l?mk(o.previousSibling,!1):o.parentNode,n&&n===o&&(i=n)));let s=nO(i)?i.parentNode:i;return nx(s)?s:t})(o.getBody(),c()),getSel:u,setRng:m,getRng:c,getStart:t=>m_(o.getBody(),c(),t),getEnd:t=>mx(o.getBody(),c(),t),getSelectedBlocks:(r,n)=>((t,r,n,o)=>{let a=[],l=t.getRoot(),i=t.getParent(n||m_(l,r,r.collapsed),t.isBlock),s=t.getParent(o||mx(l,r,r.collapsed),t.isBlock);if(i&&i!==l&&a.push(i),i&&s&&i!==s){let d,u=new ny(i,l);for(;(d=u.next())&&d!==s;)t.isBlock(d)&&a.push(d)}return s&&i!==s&&s!==l&&a.push(s),a})(t,c(),r,n),normalize(){let r=c(),n=u();if(!(uc(n).length>1)&&u$(o)){let a=cP(t,r);return a.each(t=>{m(t,f())}),a.getOr(r)}return r},selectorChanged:(t,r)=>(i(t,r),g),selectorChangedWithUnbind:i,getScrollContainer(){let r,n=t.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){r=n;break}n=n.parentNode}return r},scrollIntoView(t,r){D(t)?((t,r,n)=>{(t.inline?cK:cY)(t,r,n)})(o,t,r):cX(o,c(),r)},placeCaretAt:(t,r)=>m(cN(t,r,o.getDoc())),getBoundingClientRect(){let t=c();return t.collapsed?lM.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy(){r=a=l=null,h.destroy()}},p=ce(g),h=cf(g,o);return g.bookmarkManager=p,g.controlSelection=h,g},vz=(t,r,n)=>{-1===tP.inArray(r,n)&&(t.addAttributeFilter(n,(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),r.push(n))},v6=(t,r)=>{var n,o,a;let l=["data-mce-selected"],i={entity_encoding:"named",remove_trailing_brs:!0,...t},s=r&&r.dom?r.dom:a1.DOM,d=r&&r.schema?r.schema:ax(i),u=vr(i,d);return n=u,o=i,a=s,n.addAttributeFilter("data-mce-tabindex",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];o.attr("tabindex",o.attr("data-mce-tabindex")),o.attr(r,null)}}),n.addAttributeFilter("src,href,style",(t,r)=>{let n="data-mce-"+r,l=o.url_converter,i=o.url_converter_scope,s=t.length;for(;s--;){let d=t[s],u=d.attr(n);void 0!==u?(d.attr(r,u.length>0?u:null),d.attr(n,null)):(u=d.attr(r),"style"===r?u=a.serializeStyle(a.parseStyle(u),d.name):l&&(u=l.call(i,u,r,d.name)),d.attr(r,u.length>0?u:null))}}),n.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("class");o&&(o=o.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",o.length>0?o:null))}}),n.addAttributeFilter("data-mce-type",(t,r,n)=>{let o=t.length;for(;o--;){let a=t[o];if("bookmark"===a.attr("data-mce-type")&&!n.cleanup){let l=Q.from(a.firstChild).exists(t=>{var r;return!oo(null!==(r=t.value)&&void 0!==r?r:"")});l?a.unwrap():a.remove()}}}),n.addNodeFilter("noscript",t=>{var r;let n=t.length;for(;n--;){let o=t[n].firstChild;o&&(o.value=au.decode(null!==(r=o.value)&&void 0!==r?r:""))}}),n.addNodeFilter("script,style",(t,r)=>{var n;let a=t=>t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),l=t.length;for(;l--;){let i=t[l],s=i.firstChild,d=null!==(n=null==s?void 0:s.value)&&void 0!==n?n:"";if("script"===r){let u=i.attr("type");u&&i.attr("type","mce-no/type"===u?null:u.replace(/^mce\-/,"")),"xhtml"===o.element_format&&s&&d.length>0&&(s.value="// <![CDATA[\n"+a(d)+"\n// ]]>")}else"xhtml"===o.element_format&&s&&d.length>0&&(s.value="<!--\n"+a(d)+"\n-->")}}),n.addNodeFilter("#comment",t=>{let r=t.length;for(;r--;){let n=t[r],l=n.value;o.preserve_cdata&&0===(null==l?void 0:l.indexOf("[CDATA["))?(n.name="#cdata",n.type=4,n.value=a.decode(l.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==l?void 0:l.indexOf("mce:protected "))&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(l).substr(14))}}),n.addNodeFilter("xml:namespace,input",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];7===o.type?o.remove():1===o.type&&("input"!==r||o.attr("type")||o.attr("type","text"))}}),n.addAttributeFilter("data-mce-type",t=>{ea(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(n.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),o.remove_trailing_brs&&p7(n,n.schema),{schema:d,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize(t,n={}){var o,a,l,c,m;let f={format:"html",...n},g=(o=r,a=t,l=f,(c=o,m=l,D(c)&&c.hasEventListeners("PreProcess")&&!m.no_events)?((t,r,n)=>{let o,a=t.dom,l=r.cloneNode(!0),i=document.implementation;if(i.createHTMLDocument){let s=i.createHTMLDocument("");tP.each("BODY"===l.nodeName?l.childNodes:[l],t=>{s.body.appendChild(s.importNode(t,!0))}),l="BODY"!==l.nodeName?s.body.firstChild:s.body,o=a.doc,a.doc=s}return((t,r)=>{t.dispatch("PreProcess",r)})(t,{...n,node:l}),o&&(a.doc=o),l})(o,a,l):a),p=((t,r,n)=>{let o=oa(n.getInner?r.innerHTML:t.getOuterHTML(r));return n.selection||nJ(rc(r))?o:tP.trim(o)})(s,g,f),h=((t,r,n)=>{let o=n.selection?{forced_root_block:!1,...n}:n,a=t.parse(r,o);return(t=>{let r=t=>"br"===(null==t?void 0:t.name),n=t.lastChild;if(r(n)){let o=n.prev;r(o)&&(n.remove(),o.remove())}})(a),a})(u,p,f);return"tree"===f.format?h:((t,r,n,o,a)=>{var l,i,s;let d=(l=r,i=n,s=o,m6(l,i).serialize(s));return((t,r,n)=>{if(!r.no_events&&t){var o,a;let l=(o=t,a={...r,content:n},o.dispatch("PostProcess",a));return l.content}return n})(t,a,d)})(r,i,d,h,f)},addRules:d.addValidElements,setRules:d.setValidElements,addTempAttr:V(vz,u,l),getTempAttrs:z(l),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},vj=(t,r)=>{let n=v6(t,r);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},v4=(t,r,n={})=>{var o,a;let l=(o=n,a=r,{format:"html",...o,set:!0,content:a});return vl(t,l).map(r=>{var n,o,a;let l=(n=t,o=r.content,a=r,vL(n).editor.setContent(o,a));return vi(t,l.html,r),l.content}).getOr(r)},vH="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),v7="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),v3="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),v9=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],v2=(t,r)=>{let n=es(r,r=>eP(t,r));return ey(n)},v5=t=>{let r=v2(t,vH),n=t.forced_root_block;return!1!==n&&""!==n||r.push("forced_root_block (false only)"),ey(r)},vV=t=>v2(t,v7),vq=(t,r)=>{let n=tP.makeMap(t.plugins," "),o=es(r,t=>eP(n,t));return ey(o)},vW=t=>vq(t,v3),vK=t=>vq(t,v9.map(t=>t.name)),vG=t=>em(v9,r=>r.name===t).fold(()=>t,r=>r.replacedWith?`${t}, replaced by ${r.replacedWith}`:t),vY=a1.DOM,vX=t=>Q.from(t).each(t=>t.destroy()),vQ=(()=>{let t={};return{add(r,n){t[r]=n},get:r=>t[r]?t[r]:{icons:{}},has:r=>eP(t,r)}})(),vJ=a9.ModelManager,vZ=(t,r)=>r.dom[t],be=(t,r)=>parseInt(rV(r,t),10),bt=V(vZ,"clientWidth"),br=V(vZ,"clientHeight"),bn=V(be,"margin-top"),bo=V(be,"margin-left"),ba=t=>{var r;let n=[],o=()=>{let r=t.theme;return r&&r.getNotificationManagerImpl?r.getNotificationManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,getArgs:t}})()},a=()=>Q.from(n[0]),l=()=>{ea(n,t=>{t.reposition()})},i=t=>{ef(n,r=>r===t).each(t=>{n.splice(t,1)})},s=(r,s=!0)=>{var d,u;return t.removed||!(u=(d=t).inline?d.getBody():d.getContentAreaContainer(),Q.from(u).map(rc)).map(r0).getOr(!1)?{}:(s&&t.dispatch("BeforeOpenNotification",{notification:r}),em(n,t=>{var n,a;return n=o().getArgs(t),a=r,!(n.type!==a.type||n.text!==a.text||n.progressBar||n.timeout||a.progressBar||a.timeout)}).getOrThunk(()=>{var s;t.editorManager.setActive(t);let d=o().open(r,()=>{i(d),l(),a().fold(()=>t.focus(),t=>cQ(rc(t.getEl())))});return s=d,n.push(s),l(),t.dispatch("OpenNotification",{notification:{...d}}),d}))},d=z(n);return(r=t).on("SkinLoaded",()=>{let t=i5(r);t&&s({text:t,type:"warning",timeout:0},!1),l()}),r.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(l)}),r.on("remove",()=>{ea(n.slice(),t=>{o().close(t)})}),{open:s,close(){a().each(t=>{o().close(t),i(t),l()})},getNotifications:d}},bl=a9.PluginManager,bi=a9.ThemeManager,bs=t=>{let r=[],n=()=>{let r=t.theme;return r&&r.getWindowManagerImpl?r.getWindowManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t}})()},o=(t,r)=>(...n)=>r?r.apply(t,n):void 0,a=n=>{var o;o=n,t.dispatch("CloseWindow",{dialog:o}),0===(r=es(r,t=>t!==n)).length&&t.focus()},l=n=>{var o,a;t.editorManager.setActive(t),ml(t),t.ui.show();let l=n();return o=l,r.push(o),a=o,t.dispatch("OpenWindow",{dialog:a}),l};return t.on("remove",()=>{ea(r,t=>{n().close(t)})}),{open:(t,r)=>l(()=>n().open(t,r,a)),openUrl:t=>l(()=>n().openUrl(t,a)),alert(t,r,a){let l=n();l.alert(t,o(a||l,r))},confirm(t,r,a){let l=n();l.confirm(t,o(a||l,r))},close(){Q.from(r[r.length-1]).each(t=>{n().close(t),a(t)})}}},bd=(t,r)=>{t.notificationManager.open({type:"error",text:r})},bu=(t,r)=>{t._skinLoaded?bd(t,r):t.on("SkinLoaded",()=>{bd(t,r)})},bc=(t,r,n)=>{cr(t,r,{message:n}),console.error(n)},bm=(t,r,n)=>n?`Failed to load ${t}: ${n} from url ${r}`:`Failed to load ${t} url: ${r}`,bf=(t,...r)=>{let n=window.console;n&&(n.error?n.error(t,...r):n.log(t,...r))},bg=(t,r)=>{let n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return eo(r,r=>{var a;return(a=r,/^[a-z0-9\-]+$/i.test(a)&&!t.inline)?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r)})},bp=(t,r)=>{let n={};return{findAll(o,a=X){var l;let i=es((l=o)?ek(l.getElementsByTagName("img")):[],r=>{let n=r.src;return!r.hasAttribute("data-mce-bogus")&&!r.hasAttribute("data-mce-placeholder")&&!(!n||n===tT.transparentSrc)&&(eW(n,"blob:")?!t.isUploaded(n)&&a(r):!!eW(n,"data:")&&a(r))}),s=eo(i,t=>{let o=t.src;if(eP(n,o))return n[o].then(r=>E(r)?r:{image:t,blobInfo:r.blobInfo});{let a=((t,r)=>{var n,o,a;let l=()=>Promise.reject("Invalid data URI");if(eW(r,"blob:")){let i=t.getByUri(r);return D(i)?Promise.resolve(i):(eW(n=r,"blob:")?fetch(a=n).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${a} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})):eW(n,"data:")?(o=n,new Promise((t,r)=>{p3(o).bind(({type:t,data:r,base64Encoded:n})=>p9(t,r,n)).fold(()=>r("Invalid data URI"),t)})):Promise.reject("Unknown URI format")).then(r=>p2(r).then(n=>pV(n,!1,n=>Q.some(pq(t,r,n))).getOrThunk(l)))}return eW(r,"data:")?pW(t,r).fold(l,t=>Promise.resolve(t)):Promise.reject("Unknown image data format")})(r,o).then(r=>(delete n[o],{image:t,blobInfo:r})).catch(t=>(delete n[o],t));return n[o]=a,a}});return Promise.all(s)}}},bh=()=>{let t={},r=(t,r)=>({status:t,resultUri:r}),n=r=>r in t;return{hasBlobUri:n,getResultUri(r){let n=t[r];return n?n.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending(n){t[n]=r(1,null)},markUploaded(n,o){t[n]=r(2,o)},removeFailed(r){delete t[r]},destroy(){t={}}}},bv=0,bb=(t,r)=>{let n={},o=(t,n)=>new Promise((o,a)=>{let l=new XMLHttpRequest;l.open("POST",r.url),l.withCredentials=r.credentials,l.upload.onprogress=t=>{n(t.loaded/t.total*100)},l.onerror=()=>{a("Image upload failed due to a XHR Transport error. Code: "+l.status)},l.onload=()=>{var t,n;if(l.status<200||l.status>=300)return void a("HTTP Error: "+l.status);let i=JSON.parse(l.responseText);i&&E(i.location)?o((t=r.basePath,n=i.location,t?t.replace(/\/$/,"")+"/"+n.replace(/^\//,""):n)):a("Invalid JSON: "+l.responseText)};let i=new FormData;i.append("file",t.blob(),t.filename()),l.send(i)}),a=L(r.handler)?r.handler:o,l=(t,r)=>({url:r,blobInfo:t,status:!0}),i=(t,r)=>({url:"",blobInfo:t,status:!1,error:r}),s=(t,r)=>{tP.each(n[t],t=>{t(r)}),delete n[t]};return{upload(d,u){var c,m;return r.url||a!==o?(c=d,m=u,c=tP.grep(c,r=>!t.isUploaded(r.blobUri())),Promise.all(tP.map(c,r=>{var o,d,u;return t.isPending(r.blobUri())?(t=>{let r=t.blobUri();return new Promise(t=>{n[r]=n[r]||[],n[r].push(t)})})(r):(o=r,d=a,u=m,t.markPending(o.blobUri()),new Promise(r=>{let n,a;try{let c=()=>{n&&(n.close(),a=I)},m=n=>{c(),t.markUploaded(o.blobUri(),n),s(o.blobUri(),l(o,n)),r(l(o,n))},f=n=>{c(),t.removeFailed(o.blobUri()),s(o.blobUri(),i(o,n)),r(i(o,n))};a=t=>{t<0||t>100||Q.from(n).orThunk(()=>Q.from(u).map(K)).each(r=>{n=r,r.progressBar.value(t)})},d(o,a).then(m,t=>{f(E(t)?{message:t}:t)})}catch(g){r(i(o,g))}}))}))):new Promise(t=>{t([])})}}},b$=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),by=(t,r)=>bb(r,{url:iB(t),basePath:iD(t),credentials:iL(t),handler:iP(t)}),bC=t=>{let r=(()=>{let t=[],r=t=>{var r;if(!t.blob||!t.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let n=t.id||"blobid"+bv+++(()=>{let t=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+t()+t()+t()})(),o=t.name||n,a=t.blob;return{id:z(n),name:z(o),filename:z(t.filename||o+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[(r=a.type).toLowerCase()]||"dat")),blob:z(a),base64:z(t.base64),blobUri:z(t.blobUri||URL.createObjectURL(a)),uri:z(t.uri)}},n=r=>em(t,r).getOrUndefined(),o=t=>n(r=>r.id()===t);return{create(t,n,o,a,l){if(E(t))return r({id:t,name:a,filename:l,blob:n,base64:o});if(S(t))return r(t);throw Error("Unknown input type")},add(r){o(r.id())||t.push(r)},get:o,getByUri:t=>n(r=>r.blobUri()===t),getByData:(t,r)=>n(n=>n.base64()===t&&n.blob().type===r),findFirst:n,removeByUri(r){t=es(t,t=>t.blobUri()!==r||(URL.revokeObjectURL(t.blobUri()),!1))},destroy(){ea(t,t=>{URL.revokeObjectURL(t.blobUri())}),t=[]}}})(),n,o,a=bh(),l=[],i=r=>n=>t.selection?r(n):[],s=(t,r,n)=>{let o=0;do -1!==(o=t.indexOf(r,o))&&(t=t.substring(0,o)+n+t.substr(o+r.length),o+=n.length-r.length+1);while(-1!==o);return t},d=(t,r,n)=>{let o=`src="${n}"${n===tT.transparentSrc?' data-mce-placeholder="1"':""}`;return t=s(t,`src="${r}"`,o),s(t,'data-mce-src="'+r+'"','data-mce-src="'+n+'"')},u=(r,n)=>{ea(t.undoManager.data,t=>{"fragmented"===t.type?t.fragments=eo(t.fragments,t=>d(t,r,n)):t.content=d(t.content,r,n)})},c=()=>(n||(n=by(t,a)),g().then(i(o=>{let a=eo(o,t=>t.blobInfo);return n.upload(a,b$(t)).then(i(n=>{let a=[],l=!1,i=eo(n,(n,i)=>{var s,d;let{blobInfo:c,image:m}=o[i],f=!1;return n.status&&iA(t)?(n.url&&!eq(m.src,n.url)&&(l=!0),r.removeByUri(m.src),vD(t)||((r,n)=>{var o;let a=t.convertURL(n,"src");u(r.src,n),tW(rc(r),{src:iR(t)?(o=n)+(-1===o.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":a})})(m,n.url)):n.error&&(n.error.remove&&(u(m.src,tT.transparentSrc),a.push(m),f=!0),s=t,d=n.error.message,bu(s,a3.translate(["Failed to upload image: {0}",d]))),{element:m,status:n.status,uploadUri:n.url,blobInfo:c,removed:f}});return a.length>0&&!vD(t)?t.undoManager.transact(()=>{ea(no(a),n=>{var o;let a=rC(n);nr(n),a.each((o=t,t=>{var r,n;r=o,n=t,r.dom.isEmpty(n.dom)&&D(r.schema.getTextBlockElements()[t6(n)])&&rJ(t,rs('<br data-mce-bogus="1" />'))})),r.removeByUri(n.dom.src)})}):l&&t.undoManager.dispatchChange(),i}))}))),m=()=>iN(t)?c():Promise.resolve([]),f=t=>eh(l,r=>r(t)),g=()=>(o||(o=bp(a,r)),o.findAll(t.getBody(),f).then(i(r=>{let n=es(r,r=>E(r)?(bu(t,r),!1):"blob"!==r.uriType);return vD(t)||ea(n,t=>{u(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),n}))),p=n=>n.replace(/src="(blob:[^"]+)"/g,(n,o)=>{let l=a.getResultUri(o);if(l)return'src="'+l+'"';let i=r.getByUri(o);return i||(i=eu(t.editorManager.get(),(t,r)=>t||r.editorUpload&&r.editorUpload.blobCache.getByUri(o),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':n});return t.on("SetContent",()=>{iN(t)?m():g()}),t.on("RawSaveContent",t=>{t.content=p(t.content)}),t.on("GetContent",t=>{t.source_view||"raw"===t.format||"tree"===t.format||(t.content=p(t.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",t=>{ea(t,t=>{let n=t.attr("src");if(!n||r.getByUri(n))return;let o=a.getResultUri(n);o&&t.attr("src",o)})})}),{blobCache:r,addFilter(t){l.push(t)},uploadImages:c,uploadImagesAuto:m,scanForImages:g,destroy(){r.destroy(),a.destroy(),o=n=null}}},b_={remove_similar:!0,inherit:!1},bx={selector:"td,th",...b_},bk={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...bx},tablecellverticalalign:{styles:{"vertical-align":"%value"},...bx},tablecellbordercolor:{styles:{borderColor:"%value"},...bx},tablecellclass:{classes:["%value"],...bx},tableclass:{selector:"table",classes:["%value"],...b_},tablecellborderstyle:{styles:{borderStyle:"%value"},...bx},tablecellborderwidth:{styles:{borderWidth:"%value"},...bx}},bw=z(bk),b8=tP.each,bE=a1.DOM,bS=t=>D(t)&&S(t),bN=(t,r)=>{let n=r&&r.schema||ax({}),o=t=>{var r,n;let o=E(t)?{name:t,classes:[],attrs:{}}:t,a=bE.create(o.name);return r=a,(n=o).classes.length>0&&bE.addClass(r,n.classes.join(" ")),bE.setAttribs(r,n.attrs),a},a=(t,r,l)=>{let i,s=r[0],d=bS(s)?s.name:void 0,u=((t,r)=>{let o=n.getElementRule(t.nodeName.toLowerCase()),a=null==o?void 0:o.parentsRequired;return!(!a||!a.length)&&(r&&er(a,r)?r:a[0])})(t,d);if(u)d===u?(i=s,r=r.slice(1)):i=u;else if(s)i=s,r=r.slice(1);else if(!l)return t;let c=i?o(i):bE.create("div");c.appendChild(t),l&&tP.each(l,r=>{let n=o(r);c.insertBefore(n,t)});let m=bS(i)?i.siblings:void 0;return a(c,r,m)},l=bE.create("div");if(t.length>0){let i=t[0],s=o(i),d=bS(i)?i.siblings:void 0;l.appendChild(a(s,t.slice(1),d))}return l},bR=t=>{let r="div",n={name:r,classes:[],attrs:{},selector:t=tP.trim(t)};return"*"!==t&&(r=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(t,r,o,a,l)=>{switch(r){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==tP.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}if("["===a){let i=l.match(/([\w\-]+)(?:\=\"([^\"]+))?/);i&&(n.attrs[i[1]]=i[2])}return""})),n.name=r||"div",n},bA=(t,r)=>{var n;let o="",a=iX(t);if(""===a)return"";let l=t=>E(t)?t.replace(/%(\w+)/g,""):"",i=(r,n)=>bE.getStyle(null!=n?n:t.getBody(),r,!0);if(E(r)){let s=t.formatter.get(r);if(!s)return"";r=s[0]}if("preview"in r){let d=r.preview;if(!1===d)return"";a=d||a}let u,c=r.block||r.inline||"span",m=E(n=r.selector)?(n=(n=n.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tP.map(n.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{let r=tP.map(t.split(/(?:~\+|~|\+)/),bR),n=r.pop();return r.length&&(n.siblings=r),n}).reverse()):[];m.length>0?(m[0].name||(m[0].name=c),c=r.selector,u=bN(m,t)):u=bN([c],t);let f=bE.select(c,u)[0]||u.firstChild;b8(r.styles,(t,r)=>{let n=l(t);n&&bE.setStyle(f,r,n)}),b8(r.attributes,(t,r)=>{let n=l(t);n&&bE.setAttrib(f,r,n)}),b8(r.classes,t=>{let r=l(t);bE.hasClass(f,r)||bE.addClass(f,r)}),t.dispatch("PreviewFormats"),bE.setStyles(u,{position:"absolute",left:-65535}),t.getBody().appendChild(u);let g=i("fontSize"),p=/px$/.test(g)?parseInt(g,10):0;return b8(a.split(" "),t=>{let r=i(t,f);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(r)&&(r=i(t),"#ffffff"===uu(r).toLowerCase())||"color"===t&&"#000000"===uu(r).toLowerCase())){if("font-size"===t&&/em|%$/.test(r)){if(0===p)return;r=parseFloat(r)/(/%$/.test(r)?100:1)*p+"px"}"border"===t&&r&&(o+="padding:0 2px;"),o+=t+":"+r+";"}}),t.dispatch("AfterPreviewFormats"),bE.remove(u),o},bO=t=>{var r,n;let o=(t=>{let r={},n=(t,o)=>{t&&(E(t)?(R(o)||(o=[o]),ea(o,t=>{T(t.deep)&&(t.deep=!uF(t)),T(t.split)&&(t.split=!uF(t)||u0(t)),T(t.remove)&&uF(t)&&!u0(t)&&(t.remove="none"),uF(t)&&u0(t)&&(t.mixed=!0,t.block_expand=!0),E(t.classes)&&(t.classes=t.classes.split(/\s+/))}),r[t]=o):eS(t,(t,r)=>{n(r,t)}))};return n((t=>{let r=t.dom,n=t.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat(t){r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat(t){r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[o,t,r]:[t,o,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(t,r,n)=>nx(t)&&t.hasAttribute("href"),onformat(t,n,o){tP.each(o,(n,o)=>{r.setAttrib(t,o,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang"(t){var r;return null!==(r=null==t?void 0:t.customValue)&&void 0!==r?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tP.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),t=>{o[t]={block:t,remove:"all"}}),o})(t)),n(bw()),n(iY(t)),{get:t=>D(t)?r[t]:r,has:t=>eP(r,t),register:n,unregister:t=>(t&&r[t]&&delete r[t],r)}})(t),a=aj({});return(t=>{t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)t.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(t=>{t.on("mouseup keydown",r=>{var n;((t,r,n)=>{let o=t.selection,a=t.getBody();gY(t,null,n),(8===r||46===r)&&o.isCollapsed()&&"\uFEFF"===o.getStart().innerHTML&&gY(t,d2(a,o.getStart())),37!==r&&39!==r||gY(t,d2(a,o.getStart()))})(t,r.keyCode,nO(n=t.selection.getRng().endContainer)&&eK(n.data,"\xa0"))})})(t),vD(t)||(r=a,n=t,r.set({}),n.on("NodeChange",t=>{p6(n,t.element,r.get())}),n.on("FormatApply FormatRemove",t=>{let o=Q.from(t.node).map(t=>u_(t)?t:t.startContainer).bind(t=>nx(t)?Q.some(t):Q.from(t.parentElement)).getOrThunk(()=>pU(n));p6(n,o,r.get())})),{get:o.get,has:o.has,register:o.register,unregister:o.unregister,apply(r,n,o){((t,r,n,o)=>{vP(t).formatter.apply(r,n,o)})(t,r,n,o)},remove(r,n,o,a){((t,r,n,o,a)=>{vP(t).formatter.remove(r,n,o,a)})(t,r,n,o,a)},toggle(r,n,o){((t,r,n,o)=>{vP(t).formatter.toggle(r,n,o)})(t,r,n,o)},match(r,n,o,a){var l,i,s,d,u;return l=t,i=r,s=n,d=o,u=a,vP(l).formatter.match(i,s,d,u)},closest(r){var n,o;return n=t,o=r,vP(n).formatter.closest(o)},matchAll(r,n){var o,a,l;return o=t,a=r,l=n,vP(o).formatter.matchAll(a,l)},matchNode(r,n,o,a){var l,i,s,d,u;return l=t,i=r,s=n,d=o,u=a,vP(l).formatter.matchNode(i,s,d,u)},canApply(r){var n,o;return n=t,o=r,vP(n).formatter.canApply(o)},formatChanged(r,n,o,l){var i,s,d,u,c,m;return i=t,s=a,d=r,u=n,c=o,m=l,vP(i).formatter.formatChanged(s,d,u,c,m)},getCssText:V(bA,t)}},bT=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},bB=t=>{var r;let n=a5(),o=aj(0),a=aj(0),l={data:[],typing:!1,beforeChange(){((t,r,n)=>{vP(t).undoManager.beforeChange(r,n)})(t,o,n)},add(r,i){var s,d,u,c,m,f,g;return s=t,d=l,u=a,c=o,m=n,f=r,g=i,vP(s).undoManager.add(d,u,c,m,f,g)},dispatchChange(){t.setDirty(!0);let r=v8(t);r.bookmark=lY(t.selection),t.dispatch("change",{level:r,lastLevel:eC(l.data,a.get()).getOrUndefined()})},undo(){var r,n,i,s;return r=t,n=l,i=o,s=a,vP(r).undoManager.undo(n,i,s)},redo(){var r,n,o;return r=t,n=a,o=l.data,vP(r).undoManager.redo(n,o)},clear(){((t,r,n)=>{vP(t).undoManager.clear(r,n)})(t,l,a)},reset(){((t,r)=>{vP(t).undoManager.reset(r)})(t,l)},hasUndo(){var r,n,o;return r=t,n=l,o=a,vP(r).undoManager.hasUndo(n,o)},hasRedo(){var r,n,o;return r=t,n=l,o=a,vP(r).undoManager.hasRedo(n,o)},transact(r){var n,a,i,s;return n=t,a=l,i=o,s=r,vP(n).undoManager.transact(a,i,s)},ignore(r){((t,r,n)=>{vP(t).undoManager.ignore(r,n)})(t,o,r)},extra(r,n){((t,r,n,o,a)=>{vP(t).undoManager.extra(r,n,o,a)})(t,l,a,r,n)}};return vD(t)||((t,r,n)=>{let o=aj(!1),a=t=>{vO(r,!1,n),r.add({},t)};t.on("init",()=>{r.add()}),t.on("BeforeExecCommand",t=>{let o=t.command;bT(o)||(vT(r,n),r.beforeChange())}),t.on("ExecCommand",t=>{let r=t.command;bT(r)||a(t)}),t.on("ObjectResizeStart cut",()=>{r.beforeChange()}),t.on("SaveContent ObjectResized blur",a),t.on("dragend",a),t.on("keyup",n=>{let l=n.keyCode;if(n.isDefaultPrevented())return;let i=tT.os.isMacOS()&&"Meta"===n.key;(l>=33&&l<=36||l>=37&&l<=40||45===l||n.ctrlKey||i)&&(a(),t.nodeChanged()),46!==l&&8!==l||t.nodeChanged(),o.get()&&r.typing&&!vR(v8(t),r.data[0])&&(t.isDirty()||t.setDirty(!0),t.dispatch("TypingUndo"),o.set(!1),t.nodeChanged())}),t.on("keydown",t=>{let l=t.keyCode;if(t.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||45===l)return void(r.typing&&a(t));let i=t.ctrlKey&&!t.altKey||t.metaKey;if((l<16||l>20)&&224!==l&&91!==l&&!r.typing&&!i)return r.beforeChange(),vO(r,!0,n),r.add({},t),void o.set(!0);(tT.os.isMacOS()?t.metaKey:t.ctrlKey&&!t.altKey)&&r.beforeChange()}),t.on("mousedown",t=>{r.typing&&a(t)}),t.on("input",t=>{var r,n;t.inputType&&("insertReplacementText"===t.inputType||"insertText"===(r=t).inputType&&null===r.data||"insertFromPaste"===(n=t).inputType||"insertFromDrop"===n.inputType)&&a(t)}),t.on("AddUndo Undo Redo ClearUndos",r=>{r.isDefaultPrevented()||t.nodeChanged()})})(t,l,o),(r=t).addShortcut("meta+z","","Undo"),r.addShortcut("meta+y,meta+shift+z","","Redo"),l},bD=[9,27,cs.HOME,cs.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,cs.DOWN,cs.UP,cs.LEFT,cs.RIGHT].concat(tT.browser.isFirefox()?[224]:[]),bL="data-mce-placeholder",bP=t=>"keydown"===t.type||"keyup"===t.type,bM=t=>{let r=t.keyCode;return r===cs.BACKSPACE||r===cs.DELETE},bI=(t,r)=>({from:t,to:r}),bF=(t,r)=>{let n=rc(t),o=rc(r.container());return fV(n,o).map(t=>{var n,o;return{block:n=t,position:r}})},b0=(t,r)=>rz(r,t=>nQ(t)||nF(t.dom),r=>rh(r,t)).filter(t7).getOr(t),bU=t=>{let r=(t=>{let r=rS(t);return ef(r,nV).fold(z(r),t=>r.slice(0,t))})(t);return ea(r,nr),r},b1=(t,r)=>{let n=fr(r,t);return em(n.reverse(),t=>oM(t)).each(nr)},bz=(t,r,n,o)=>{if(oM(n))return or(n),dH(n.dom);0===es(r8(o),t=>!oM(t)).length&&oM(r)&&rY(o,rd("br"));let a=d4(n.dom,lM.before(o.dom));return ea(bU(r),t=>{rY(o,t)}),b1(t,r),a},b6=(t,r,n)=>{if(oM(n)){if(oM(r)){let o=ed((t=>{let r=(t,n)=>rR(t).fold(()=>n,t=>nq(t)?r(t,n.concat(ll(t))):n);return r(t,[])})(n),(t,r)=>(rZ(t,r),r),ot());nt(r),rJ(r,o)}return nr(n),dH(r.dom)}let a=d7(n.dom);return ea(bU(r),t=>{rJ(n,t)}),b1(t,r),a},bj=(t,r)=>{d6(t,r.dom).bind(t=>Q.from(t.getNode())).map(rc).filter(nW).each(nr)},b4=(t,r,n)=>{var o,a;return bj(!0,r),bj(!1,n),(o=r,rv(a=n,o)?((t,r)=>{let n=fr(r,t);return Q.from(n[n.length-1])})(a,o):Q.none()).fold(V(b6,t,r,n),V(bz,t,r,n))},bH=(t,r,n,o)=>r?b4(t,o,n):b4(t,n,o),b7=(t,r)=>{var n,o,a;let l=rc(t.getBody()),i=(n=l.dom,o=r,(a=t.selection.getRng()).collapsed?((t,r,n)=>{let o=bF(t,lM.fromRangeStart(n)),a=o.bind(n=>dU(r,t,n.position).bind(n=>bF(t,n).map(n=>{var o,a,l;return o=t,a=r,nM((l=n).position.getNode())&&!oM(l.block)?d6(!1,l.block.dom).bind(t=>t.isEqual(l.position)?dU(a,o,t).bind(t=>bF(o,t)):Q.some(l)).getOr(l):l})));return tI(o,a,bI).filter(r=>{var n,o;return!rh((n=r).from.block,n.to.block)&&((t,r)=>{let n=rc(t);return rh(b0(n,r.from.block),b0(n,r.to.block))})(t,r)&&!1===n0((o=r).from.block.dom)&&!1===n0(o.to.block.dom)&&(t=>{let r=t=>nK(t)||o4(t.dom);return r(t.from.block)&&r(t.to.block)})(r)})})(n,o,a):Q.none()).map(n=>()=>{bH(l,r,n.from.block,n.to.block).each(r=>{t.selection.setRng(r.toRange())})});return i},b3=(t,r)=>{let n=rc(r),o=V(rh,t);return r1(n,nQ,o).isSome()},b9=t=>{var r;let n=rc(t.getBody());return((t,r)=>{var n,o;let a=d4(t.dom,lM.fromRangeStart(r)).isNone(),l=dj(t.dom,lM.fromRangeEnd(r)).isNone();return n=t,o=r,!(b3(n,o.startContainer)||b3(n,o.endContainer))&&a&&l})(n,t.selection.getRng())?(r=t,Q.some(()=>{r.setContent(""),r.selection.setCursorLocation()})):((t,r)=>{let n=r.getRng();return tI(fV(t,rc(n.startContainer)),fV(t,rc(n.endContainer)),(o,a)=>rh(o,a)?Q.none():Q.some(()=>{n.deleteContents(),bH(t,!0,o,a).each(t=>{r.setRng(t.toRange())})})).getOr(Q.none())})(n,t.selection)},b2=(t,r)=>t.selection.isCollapsed()?Q.none():b9(t),b5=(t,r,n,o,a)=>Q.from(r._selectionOverrides.showCaret(t,n,o,a)),bV=(t,r)=>t.dispatch("BeforeObjectSelected",{target:r}).isDefaultPrevented()?Q.none():Q.some((t=>{let r=t.ownerDocument.createRange();return r.selectNode(t),r})(r)),bq=(t,r,n)=>r.collapsed?((t,r,n)=>{let o=d_(1,t.getBody(),r),a=lM.fromRangeStart(o),l=a.getNode();if(sJ(l))return b5(1,t,l,!a.isAtEnd(),!1);let i=a.getNode(!0);if(sJ(i))return b5(1,t,i,!1,!1);let s=gy(t.dom.getRoot(),a.getNode());return sJ(s)?b5(1,t,s,!1,n):Q.none()})(t,r,n).getOr(r):r,bW=t=>mZ(t)||mY(t),bK=t=>fe(t)||mX(t),bG=(t,r,n,o,a,l)=>{var i,s;b5(o,t,l.getNode(!a),a,!0).each(n=>{if(r.collapsed){let o=r.cloneRange();a?o.setEnd(n.startContainer,n.startOffset):o.setStart(n.endContainer,n.endOffset),o.deleteContents()}else r.deleteContents();t.selection.setRng(n)}),i=t.dom,nO(s=n)&&0===s.data.length&&i.remove(s)},bY=(t,r)=>((t,r)=>{let n=t.selection.getRng();if(!nO(n.commonAncestorContainer))return Q.none();let o=r?hc.Forwards:hc.Backwards,a=dM(t.getBody()),l=V(d8,r?a.next:a.prev),i=r?bW:bK,s=dk(o,t.getBody(),n),d=l(s),u=d?fH(r,d):d;if(!u||!dE(s,u))return Q.none();if(i(u))return Q.some(()=>bG(t,n,s.getNode(),o,r,u));let c=l(u);return c&&i(c)&&dE(u,c)?Q.some(()=>bG(t,n,s.getNode(),o,r,c)):Q.none()})(t,r),bX=(t,r)=>{let n=t.getBody();return r?dH(n).filter(mZ):d7(n).filter(fe)},bQ=t=>{let r=t.selection.getRng();return!r.collapsed&&(bX(t,!0).exists(t=>t.isEqual(lM.fromRangeStart(r)))||bX(t,!1).exists(t=>t.isEqual(lM.fromRangeEnd(r))))},bJ=lZ([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),bZ=(t,r,n)=>dU(r,t,n).bind(o=>{var a;return D(a=o.getNode())&&(nQ(rc(a))||nY(rc(a)))||((t,r,n,o)=>{let a=r=>nq(rc(r))&&!dp(n,o,t);return dx(!r,n).fold(()=>dx(r,o).fold(Y,a),a)})(t,r,n,o)?Q.none():r&&n0(o.getNode())||!r&&n0(o.getNode(!0))?((t,r,n,o)=>{let a=o.getNode(!r);return fV(rc(t),rc(n.getNode())).map(t=>oM(t)?bJ.remove(t.dom):bJ.moveToElement(a)).orThunk(()=>Q.some(bJ.moveToElement(a)))})(t,r,n,o):r&&fe(n)||!r&&mZ(n)?Q.some(bJ.moveToPosition(o)):Q.none()}),$e=(t,r)=>Q.from(gy(t.getBody(),r)),$t=(t,r)=>{let n=t.selection.getNode();return $e(t,n).filter(n0).fold(()=>((t,r,n)=>{var o,a,l,i,s;let d=d_(r?1:-1,t,n),u=lM.fromRangeStart(d),c=rc(t);return!r&&fe(u)?Q.some(bJ.remove(u.getNode(!0))):r&&mZ(u)?Q.some(bJ.remove(u.getNode())):!r&&mZ(u)&&fg(c,u)?fp(c,u).map(t=>bJ.remove(t.getNode())):r&&fe(u)&&ff(c,u)?fh(c,u).map(t=>bJ.remove(t.getNode())):(o=t,a=r,l=u,((t,r)=>{let n=r.getNode(!t);return nx(n)&&n.getAttribute("data-mce-caret")===(t?"after":"before")})(a,l)?(i=a,B(s=l.getNode(!a))?Q.none():i&&n0(s.nextSibling)?Q.some(bJ.moveToElement(s.nextSibling)):!i&&n0(s.previousSibling)?Q.some(bJ.moveToElement(s.previousSibling)):Q.none()).orThunk(()=>bZ(o,a,l)):bZ(o,a,l).bind(t=>{var r,n,a;return r=o,n=l,t.fold(t=>Q.some(bJ.remove(t)),t=>Q.some(bJ.moveToElement(t)),t=>dp(n,t,r)?Q.none():Q.some(bJ.moveToPosition(t)))}))})(t.getBody(),r,t.selection.getRng()).map(n=>()=>{var o,a,l,i,s;return n.fold((o=t,a=r,t=>(o._selectionOverrides.hideFakeCaret(),f1(o,a,rc(t)),!0)),(l=t,i=r,t=>{let r=i?lM.before(t):lM.after(t);return l.selection.setRng(r.toRange()),!0}),(s=t,t=>(s.selection.setRng(t.toRange()),!0)))}),()=>Q.some(I))},$r=t=>{let r=t.dom,n=t.selection,o=gy(t.getBody(),n.getNode());if(nF(o)&&r.isBlock(o)&&r.isEmpty(o)){let a=r.create("br",{"data-mce-bogus":"1"});r.setHTML(o,""),o.appendChild(a),n.setRng(lM.before(a).toRange())}return!0},$n=(t,r)=>t.selection.isCollapsed()?$t(t,r):((t,r)=>{let n=t.selection.getNode();return n0(n)&&!nU(n)?$e(t,n.parentNode).filter(n0).fold(()=>Q.some(()=>{var n;n=rc(t.getBody()),ea(nb(n,".mce-offscreen-selection"),nr),f1(t,r,rc(t.selection.getNode())),fq(t)}),()=>Q.some(I)):bQ(t)?Q.some(()=>{fG(t,t.selection.getRng(),rc(t.getBody()))}):Q.none()})(t,r),$o=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=lM.fromRangeStart(t.selection.getRng());return dU(r,t.getBody(),n).filter(t=>r?mK(t):mG(t)).bind(t=>dh(r?0:-1,t)).map(r=>()=>t.selection.select(r))})(t,r):Q.none(),$a=nO,$l=t=>$a(t)&&"\uFEFF"===t.data[0],$i=t=>$a(t)&&"\uFEFF"===t.data[t.data.length-1],$s=t=>{var r;return(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF")},$d=(t,r)=>t?(t=>{var r;if($a(t.previousSibling))return $i(t.previousSibling)||t.previousSibling.appendData("\uFEFF"),t.previousSibling;if($a(t))return $l(t)||t.insertData(0,"\uFEFF"),t;{let n=$s(t);return null===(r=t.parentNode)||void 0===r||r.insertBefore(n,t),n}})(r):(t=>{var r,n;if($a(t.nextSibling))return $l(t.nextSibling)||t.nextSibling.insertData(0,"\uFEFF"),t.nextSibling;if($a(t))return $i(t)||t.appendData("\uFEFF"),t;{let o=$s(t);return t.nextSibling?null===(r=t.parentNode)||void 0===r||r.insertBefore(o,t.nextSibling):null===(n=t.parentNode)||void 0===n||n.appendChild(o),o}})(r),$u=V($d,!0),$c=V($d,!1),$m=(t,r)=>nO(t.container())?$d(r,t.container()):$d(r,t.getNode()),$f=(t,r)=>{let n=r.get();return n&&t.container()===n&&od(n)},$g=(t,r)=>r.fold(r=>{sq(t.get());let n=$u(r);return t.set(n),Q.some(lM(n,n.length-1))},r=>dH(r).map(r=>{if($f(r,t)){let n=t.get();return lM(n,1)}{sq(t.get());let o=$m(r,!0);return t.set(o),lM(o,1)}}),r=>d7(r).map(r=>{if($f(r,t)){let n=t.get();return lM(n,n.length-1)}{sq(t.get());let o=$m(r,!1);return t.set(o),lM(o,o.length-1)}}),r=>{sq(t.get());let n=$c(r);return t.set(n),Q.some(lM(n,1))}),$p=(t,r)=>{for(let n=0;n<t.length;n++){let o=t[n].apply(null,r);if(o.isSome())return o}return Q.none()},$h=lZ([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),$v=(t,r)=>dg(r,t)||t,$b=(t,r,n)=>{let o=f7(n),a=$v(r,o.container());return f4(t,a,o).fold(()=>dj(a,o).bind(V(f4,t,a)).map(t=>$h.before(t)),Q.none)},$$=(t,r)=>null===d2(t,r),$y=(t,r,n)=>f4(t,r,n).filter(V($$,r)),$C=(t,r,n)=>{let o=f3(n);return $y(t,r,o).bind(t=>d4(t,o).isNone()?Q.some($h.start(t)):Q.none())},$_=(t,r,n)=>{let o=f7(n);return $y(t,r,o).bind(t=>dj(t,o).isNone()?Q.some($h.end(t)):Q.none())},$x=(t,r,n)=>{let o=f3(n),a=$v(r,o.container());return f4(t,a,o).fold(()=>d4(a,o).bind(V(f4,t,a)).map(t=>$h.after(t)),Q.none)},$k=t=>!fj($8(t)),$w=(t,r,n)=>$p([$b,$C,$_,$x],[t,r,n]).filter($k),$8=t=>t.fold(j,j,j,j),$E=t=>t.fold(z("before"),z("start"),z("end"),z("after")),$S=t=>t.fold($h.before,$h.before,$h.after,$h.after),$N=t=>t.fold($h.start,$h.start,$h.end,$h.end),$R=(t,r,n,o,a,l)=>tI(f4(r,n,o),f4(r,n,a),(r,o)=>r!==o&&((t,r,n)=>{let o=dg(r,t),a=dg(n,t);return D(o)&&o===a})(n,r,o)?$h.after(t?r:o):l).getOr(l),$A=(t,r)=>t.fold(X,t=>{var n,o;return o=r,!($E(n=t)===$E(o)&&$8(n)===$8(o))}),$O=(t,r)=>t?r.fold(F(Q.some,$h.start),Q.none,F(Q.some,$h.after),Q.none):r.fold(Q.none,F(Q.some,$h.before),Q.none,F(Q.some,$h.end)),$T=(t,r,n)=>(r.setRng(lM(n.container(),n.offset()+(t?1:-1)).toRange()),r.getSel().modify("move",t?"forward":"backward","word"),!0);(t=d||(d={}))[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol";let $B=(t,r)=>t===hc.Backwards?ev(r):r,$D=(t,r,n)=>t===hc.Forwards?r.next(n):r.prev(n),$L=(t,r,n,o)=>nM(o.getNode(r===hc.Forwards))?d.Br:!1===dp(n,o)?d.Block:d.Wrap,$P=(t,r,n,o)=>{let a=dM(n),l=o,i=[];for(;l;){let s=$D(r,a,l);if(!s)break;if(nM(s.getNode(!1)))return r===hc.Forwards?{positions:$B(r,i).concat([s]),breakType:d.Br,breakAt:Q.some(s)}:{positions:$B(r,i),breakType:d.Br,breakAt:Q.some(s)};if(s.isVisible()){if(t(l,s)){let u=$L(0,r,l,s);return{positions:$B(r,i),breakType:u,breakAt:Q.some(s)}}i.push(s),l=s}else l=s}return{positions:$B(r,i),breakType:d.Eol,breakAt:Q.none()}},$M=(t,r,n,o)=>r(n,o).breakAt.map(o=>{let a=r(n,o).positions;return t===hc.Backwards?a.concat(o):[o].concat(a)}).getOr([]),$I=(t,r)=>eu(t,(t,n)=>t.fold(()=>Q.some(n),o=>tI(e_(o.getClientRects()),e_(n.getClientRects()),(t,a)=>{let l=Math.abs(r-t.left);return Math.abs(r-a.left)<=l?n:o}).or(t)),Q.none()),$F=(t,r)=>e_(r.getClientRects()).bind(r=>$I(t,r.left)),$0=V($P,lM.isAbove,-1),$U=V($P,lM.isBelow,1),$1=V($M,-1,$0),$z=V($M,1,$U),$6=(t,r)=>$F($1(t,r),r),$j=(t,r)=>$F($z(t,r),r),$4=n0,$H=(t,r)=>Math.abs(t.left-r),$7=(t,r)=>Math.abs(t.right-r),$3=(t,r)=>e6(t,(t,n)=>{let o=Math.min($H(t,r),$7(t,r)),a=Math.min($H(n,r),$7(n,r));return a===o&&eM(n,"node")&&$4(n.node)||a<o?n:t}),$9=t=>{let r=r=>eo(r,r=>{let n=lm(r);return n.node=t,n});if(nx(t))return r(t.getClientRects());if(nO(t)){let n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),r(n.getClientRects())}return[]},$2=t=>ep(t,$9);(r=u||(u={}))[r.Up=-1]="Up",r[r.Down=1]="Down";let $5=(t,r,n,o,a,l)=>{let i=0,s=[],d=o=>{let l=$2([o]);-1===t&&(l=l.reverse());for(let d=0;d<l.length;d++){let c=l[d];if(!n(c,u)){if(s.length>0&&r(c,e4(s))&&i++,c.line=i,a(c))return!0;s.push(c)}}return!1},u=e4(l.getClientRects());if(!u)return s;let c=l.getNode();return c&&(d(c),((t,r,n,o)=>{let a=o;for(;a=df(a,t,oS,r);)if(n(a))return})(t,o,d,c)),s},$V=V($5,u.Up,lp,lh),$q=V($5,u.Down,lh,lp),$W=t=>e4(t.getClientRects()),$K=t=>r=>{var n,o;return n=t,r.line>n},$G=t=>r=>{var n,o;return n=t,r.line===n},$Y=(t,r)=>{t.selection.setRng(r),cX(t,t.selection.getRng())},$X=(t,r,n)=>Q.some(bq(t,r,n)),$Q=(t,r,n,o,a,l)=>{let i=r===hc.Forwards,s=dM(t.getBody()),d=V(d8,i?s.next:s.prev),u=i?o:a;if(!n.collapsed){let c=lb(n);if(l(c))return b5(r,t,c,r===hc.Backwards,!1);if(bQ(t)){let m=n.cloneRange();return m.collapse(r===hc.Backwards),Q.from(m)}}let f=dk(r,t.getBody(),n);if(u(f))return bV(t,f.getNode(!i));let g=d(f),p=ov(n);if(!g)return p?Q.some(n):Q.none();if(g=fH(i,g),u(g))return b5(r,t,g.getNode(!i),i,!1);let h=d(g);return h&&u(h)&&dE(g,h)?b5(r,t,h.getNode(!i),i,!1):p?$X(t,g.toRange(),!1):Q.none()},$J=(t,r,n,o,a,l)=>{let i=dk(r,t.getBody(),n),s=e4(i.getClientRects()),d=r===u.Down,c=t.getBody();if(!s)return Q.none();if(bQ(t)){let m=d?lM.fromRangeEnd(n):lM.fromRangeStart(n);return(d?$j:$6)(c,m).orThunk(()=>Q.from(m)).map(t=>t.toRange())}let f=(d?$q:$V)(c,$K(1),i),g=es(f,$G(1)),p=s.left,h=$3(g,p);if(h&&l(h.node)){let v=Math.abs(p-h.left),b=Math.abs(p-h.right);return b5(r,t,h.node,v<b,!1)}let $;if($=o(i)?i.getNode():a(i)?i.getNode(!0):lb(n)){let y=((t,r,n,o)=>{let a=dM(r),l,i,s,d,u=[],c=0;1===t?(l=a.next,i=lh,s=lp,d=lM.after(o)):(l=a.prev,i=lp,s=lh,d=lM.before(o));let m=$W(d);do{if(!d.isVisible())continue;let f=$W(d);if(s(f,m))continue;u.length>0&&i(f,e4(u))&&c++;let g=lm(f);if(g.position=d,g.line=c,n(g))break;u.push(g)}while(d=l(d));return u})(r,c,$K(1),$),C=$3(es(y,$G(1)),p);if(C||(C=e4(es(y,$G(0)))))return $X(t,C.position.toRange(),!1)}return 0===g.length?$Z(t,d).filter(d?a:o).map(r=>bq(t,r.toRange(),!1)):Q.none()},$Z=(t,r)=>{var n,o;let a=t.selection.getRng(),l=r?lM.fromRangeEnd(a):lM.fromRangeStart(a),i=(n=l.container(),o=t.getBody(),r1(rc(n),t=>de(t.dom),t=>t.dom===o).map(t=>t.dom).getOr(o));if(r){let s=$U(i,l);return ex(s.positions)}{let d=$0(i,l);return e_(d.positions)}},ye=(t,r,n)=>$Z(t,r).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),yt=(t,r)=>{let n=t.dom.createRng();n.setStart(r.container(),r.offset()),n.setEnd(r.container(),r.offset()),t.selection.setRng(n)},yr=(t,r)=>{t?r.setAttribute("data-mce-selected","inline-boundary"):r.removeAttribute("data-mce-selected")},yn=(t,r,n)=>$g(r,n).map(r=>(yt(t,r),n)),yo=(t,r,n)=>{let o=t.getBody(),a=((t,r,n)=>{let o=lM.fromRangeStart(t);if(t.collapsed)return o;{let a=lM.fromRangeEnd(t);return n?d4(r,a).getOr(a):dj(r,o).getOr(o)}})(t.selection.getRng(),o,n);return((t,r,n,o)=>{let a=fH(t,o),l=$w(r,n,a);return $w(r,n,a).bind(V($O,t)).orThunk(()=>((t,r,n,o,a)=>{let l=fH(t,a);return dU(t,n,l).map(V(fH,t)).fold(()=>o.map($S),a=>$w(r,n,a).map(V($R,t,r,n,l,a)).filter(V($A,o))).filter($k)})(t,r,n,l,o))})(n,V(f6,t),o,a).bind(n=>yn(t,r,n))},ya=(t,r,n)=>!!iG(t)&&yo(t,r,n).isSome(),yl=(t,r,n)=>!!iG(r)&&((t,r)=>{var n;let o=r.selection.getRng(),a=t?lM.fromRangeEnd(o):lM.fromRangeStart(o);return!!L(r.selection.getSel().modify)&&(t&&om(a)?$T(!0,r.selection,a):!(t||!of(a))&&$T(!1,r.selection,a))})(t,r),yi=t=>{let r=aj(null),n=V(f6,t);return t.on("NodeChange",o=>{iG(t)&&(((t,r,n)=>{let o=eo(nb(rc(r.getRoot()),'*[data-mce-selected="inline-boundary"]'),t=>t.dom),a=es(o,t),l=es(n,t);ea(eb(a,l),V(yr,!1)),ea(eb(l,a),V(yr,!0))})(n,t.dom,o.parents),((t,r)=>{let n=r.get();if(t.selection.isCollapsed()&&!t.composing&&n){var o;let a=lM.fromRangeStart(t.selection.getRng());lM.isTextPosition(a)&&!(om(o=a)||of(o))&&(yt(t,sV(n,a)),r.set(null))}})(t,r),((t,r,n,o)=>{if(r.selection.isCollapsed()){let a=es(o,t);ea(a,o=>{let a=lM.fromRangeStart(r.selection.getRng());$w(t,r.getBody(),a).bind(t=>yn(r,n,t))})}})(n,t,r,o.parents))}),r},ys=V(yl,!0),yd=V(yl,!1),yu=(t,r,n)=>{if(iG(t)){let o=$Z(t,r).getOrThunk(()=>{let n=t.selection.getRng();return r?lM.fromRangeEnd(n):lM.fromRangeStart(n)});return $w(V(f6,t),t.getBody(),o).exists(r=>{let o=$S(r);return $g(n,o).exists(r=>(yt(t,r),!0))})}return!1},yc=(t,r)=>n=>$g(r,n).map(r=>()=>yt(t,r)),ym=(t,r,n,o)=>{let a=t.getBody(),l=V(f6,t);t.undoManager.ignore(()=>{t.selection.setRng(((t,r)=>{let n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(r.container(),r.offset()),n})(n,o)),f2(t),$w(l,a,lM.fromRangeStart(t.selection.getRng())).map($N).bind(yc(t,r)).each(G)}),t.nodeChanged()},yf=(t,r,n)=>{if(t.selection.isCollapsed()&&iG(t)){let o=lM.fromRangeStart(t.selection.getRng());return((t,r,n,o)=>{var a,l;let i=(a=t.getBody(),dg(o.container(),a)||a),s=V(f6,t),d=$w(s,i,o);return d.bind(t=>n?t.fold(z(Q.some($N(t))),Q.none,z(Q.some($S(t))),Q.none):t.fold(Q.none,z(Q.some($S(t))),Q.none,z(Q.some($N(t))))).map(yc(t,r)).getOrThunk(()=>{let a=d1(n,i,o),l=a.bind(t=>$w(s,i,t));return tI(d,l,()=>f4(s,i,o).bind(r=>{var o;return tI(dH(o=r),d7(o),(t,r)=>{let n=fH(!0,t),a=fH(!1,r);return dj(o,n).forall(t=>t.isEqual(a))}).getOr(!0)?Q.some(()=>{f1(t,n,rc(r))}):Q.none()})).getOrThunk(()=>l.bind(()=>a.map(a=>()=>{n?ym(t,r,o,a):ym(t,r,a,o)})))})})(t,r,n,o)}return Q.none()},yg=(t,r)=>{let n=rc(t.getBody()),o=rc(t.selection.getStart()),a=fr(o,n);return ef(a,r).fold(z(a),t=>a.slice(0,t))},yp=t=>1===rO(t),yh=(t,r)=>{let n=V(pt,t);return ep(r,t=>n(t)?[t.dom]:[])},yv=t=>{var r;let n=(r=t,yg(r,nV));return yh(t,n)},yb=(t,r)=>{var n;let o=es((n=t,yg(n,t=>{var r;return nV(t)||rO(t)>1})),yp);return ex(o).bind(n=>{let a=lM.fromRangeStart(t.selection.getRng());return fW(r,a,n.dom)&&!pr(n)?Q.some(()=>((t,r,n,o)=>{let a=yh(r,o);if(0===a.length)f1(r,t,n);else{let l=pe(n.dom,a);r.selection.setRng(l.toRange())}})(r,t,n,o)):Q.none()})},y$=(t,r)=>{let n=t.selection.getStart(),o=((t,r)=>{let n=r.parentElement;return nM(r)&&!A(n)&&t.dom.isEmpty(n)})(t,n)||pr(rc(n))?pe(n,r):((t,r)=>{let{caretContainer:n,caretPosition:o}=gZ(r);return t.insertNode(n.dom),o})(t.selection.getRng(),r);t.selection.setRng(o.toRange())},yy=t=>nO(t.startContainer),yC=t=>{var r,n,o,a;let l=t.selection.getRng();return 0===(r=l).startOffset&&yy(r)&&((t,r)=>{let n=r.startContainer.parentElement;return!A(n)&&pt(t,rc(n))})(t,l)&&((t=>{let r=t.startContainer.parentNode,n=t.endContainer.parentNode;return!A(r)&&!A(n)&&r.isEqualNode(n)})(o=n=l)&&(t=>{let r=t.endContainer;return t.endOffset===(nO(r)?r.length:r.childNodes.length)})(o)||!(a=n).endContainer.isEqualNode(a.commonAncestorContainer))},y_=(t,r)=>t.selection.isCollapsed()?yb(t,r):(t=>{if(yC(t)){let r=yv(t);return Q.some(()=>{f2(t),((t,r)=>{let n=eb(r,yv(t));n.length>0&&y$(t,n)})(t,r)})}return Q.none()})(t),yx=t=>{var r,n,o;return r=t,o=nV,r1(r,t=>d9(t.dom),o).isSome()},yk=t=>((t=>{var r;let n=t.selection.getRng();return n.collapsed&&(yy(n)||t.dom.isEmpty(n.startContainer))&&!yx(rc(t.selection.getStart()))})(t)&&y$(t,[]),!0),yw=(t,r,n)=>D(n)?Q.some(()=>{t._selectionOverrides.hideFakeCaret(),f1(t,r,rc(n))}):Q.none(),y8=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=r?mY:mX,o=r?hc.Forwards:hc.Backwards,a=dk(o,t.getBody(),t.selection.getRng());return n(a)?yw(t,r,a.getNode(!r)):Q.from(fH(r,a)).filter(t=>n(t)&&dE(a,t)).bind(n=>yw(t,r,n.getNode(!r)))})(t,r):((t,r)=>{let n=t.selection.getNode();return nz(n)?yw(t,r,n):Q.none()})(t,r),yE=t=>te(null!=t?t:"").getOr(0),yS=(t,r)=>(t||"table"===t6(r)?"margin":"padding")+("rtl"===rV(r,"direction")?"-right":"-left"),yN=t=>{var r,n;let o=yA(t);return!t.mode.isReadOnly()&&(o.length>1||(r=t,n=o,eh(n,t=>{let n=yS(iU(r),t),o=rW(t,n).map(yE).getOr(0);return"false"!==r.dom.getContentEditable(t.dom)&&o>0})))},yR=t=>nG(t)||nY(t),yA=t=>es(no(t.selection.getSelectedBlocks()),t=>{var r;return!yR(t)&&!rC(t).exists(yR)&&rz(t,t=>nF(t.dom)||n0(t.dom)).exists(t=>nF(t.dom))}),yO=(t,r)=>{var n,o;let{dom:a}=t,l=i1(t),i=null!==(o=null===(n=/[a-z%]+$/i.exec(l))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",s=yE(l),d=iU(t);ea(yA(t),t=>{((t,r,n,o,a,l)=>{let i=yS(n,rc(l)),s=yE(t.getStyle(l,i));if("outdent"===r){let d=Math.max(0,s-o);t.setStyle(l,i,d?d+a:"")}else t.setStyle(l,i,s+o+a)})(a,r,d,s,i,t.dom)})},yT=t=>yO(t,"outdent"),yB=t=>{if(t.selection.isCollapsed()&&yN(t)){let r=t.dom,n=t.selection.getRng(),o=lM.fromRangeStart(n),a=r.getParent(n.startContainer,r.isBlock);if(null!==a&&fi(rc(a),o))return Q.some(()=>yT(t))}return Q.none()},yD=(t,r,n)=>ew([yB,$n,bY,(t,n)=>yf(t,r,n),b7,g$,$o,y8,b2,y_],r=>r(t,n)).filter(r=>t.selection.isEditable()),yL=(t,r)=>{t.addCommand("delete",()=>{((t,r)=>{yD(t,r,!1).fold(()=>{f2(t),fq(t)},G)})(t,r)}),t.addCommand("forwardDelete",()=>{((t,r)=>{yD(t,r,!0).fold(()=>{var r;return f9(t,"ForwardDelete")},G)})(t,r)})},yP=t=>void 0===t.touches||1!==t.touches.length?Q.none():Q.some(t.touches[0]),yM=(t,r)=>eP(t,r.nodeName),yI=(t,r)=>!!nO(r)||!!nx(r)&&!yM(t.getBlockElements(),r)&&!ue(r)&&!o3(t,r),yF=(t,r)=>!!(nO(r)&&(0===r.data.length||/^\s+$/.test(r.data)&&(!r.nextSibling||yM(t,r.nextSibling)))),y0=t=>t.dom.create(i_(t),ix(t)),yU=t=>{var r,n,o;let a=t.dom,l=t.selection,i=t.schema,s=i.getBlockElements(),d=l.getStart(),u=t.getBody(),c,m,f=!1,g=i_(t);if(!d||!nx(d))return;let p=u.nodeName.toLowerCase();if(!i.isValidChild(p,g.toLowerCase())||(r=s,n=u,en(ft(rc(d),rc(n)),t=>yM(r,t.dom))))return;let h=l.getRng(),{startContainer:v,startOffset:b,endContainer:$,endOffset:y}=h,C=m$(t),_=u.firstChild;for(;_;)if(nx(_)&&oj(i,_),yI(i,_)){if(yF(s,_)){m=_,_=_.nextSibling,a.remove(m);continue}c||(c=y0(t),u.insertBefore(c,_),f=!0),m=_,_=_.nextSibling,c.appendChild(m)}else c=null,_=_.nextSibling;f&&C&&(h.setStart(v,b),h.setEnd($,y),l.setRng(h),t.nodeChanged())},y1=(t,r,n)=>{let o=rc(y0(t)),a=ot();rJ(o,a),n(r,o);let l=document.createRange();return l.setStartBefore(a.dom),l.setEndBefore(a.dom),l},yz=t=>r=>-1!==(" "+r.attr("class")+" ").indexOf(t),y6=(t,r,n)=>function(o){let a=arguments,l=a[a.length-2],i=l>0?r.charAt(l-1):"";if('"'===i)return o;if(">"===i){let s=r.lastIndexOf("<",l);if(-1!==s&&-1!==r.substring(s,l).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(a[0])+'">'+t.dom.encode("string"==typeof a[1]?a[1]:a[0])+"</span>"},yj=(t,r)=>{r.hasAttribute("data-mce-caret")&&(oh(r),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(r))},y4=(t,r)=>{var n;let o=(n=t,rj(rc(n.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull());if(o)return"compositionstart"===r.type?(r.preventDefault(),r.stopPropagation(),void yj(t,o)):void(oc(o)&&(yj(t,o),t.undoManager.add()))},yH=n0,y7=(t,r,n)=>{let o=dM(t.getBody()),a=V(d8,1===r?o.next:o.prev);if(n.collapsed){let l=t.dom.getParent(n.startContainer,"PRE");if(!l)return;if(!a(lM.fromRangeStart(n))){let i=rc((t=>{let r=t.dom.create(i_(t));return r.innerHTML='<br data-mce-bogus="1">',r})(t));1===r?rX(rc(l),i):rY(rc(l),i),t.selection.select(i.dom,!0),t.selection.collapse()}}},y3=(t,r)=>((t,r)=>{var n,o,a;let l=r?hc.Forwards:hc.Backwards,i=t.selection.getRng();return(n=l,$Q(o=t,n,i,mZ,fe,yH)).orThunk(()=>(y7(t,l,i),Q.none()))})(t,((t,r)=>{let n=r?t.getEnd(!0):t.getStart(!0);return fj(n)?!r:r})(t.selection,r)).exists(r=>($Y(t,r),!0)),y9=(t,r)=>((t,r)=>{var n,o,a;let l=r?1:-1,i=t.selection.getRng();return(n=l,$J(o=t,n,i,t=>mZ(t)||mQ(t),t=>fe(t)||mJ(t),yH)).orThunk(()=>(y7(t,l,i),Q.none()))})(t,r).exists(r=>($Y(t,r),!0)),y2=(t,r)=>ye(t,r,r?fe:mZ),y5=(t,r)=>bX(t,!r).map(n=>{let o=n.toRange(),a=t.selection.getRng();return r?o.setStart(a.startContainer,a.startOffset):o.setEnd(a.endContainer,a.endOffset),o}).exists(r=>($Y(t,r),!0)),yV=t=>er(["figcaption"],t6(t)),yq=(t,r)=>{let n=rc(t.getBody()),o=lM.fromRangeStart(t.selection.getRng());return((t,r)=>{let n=V(rh,r);return rz(rc(t.container()),nV,n).filter(yV)})(o,n).exists(()=>{var a,l,i,s,d,u,c;if(a=n,l=r,i=o,l?$U(s=a.dom,i).breakAt.isNone():$0(u=a.dom,i).breakAt.isNone()){let m=y1(t,n,r?rJ:rQ);return t.selection.setRng(m),!0}return!1})},yW=(t,r)=>!!t.selection.isCollapsed()&&yq(t,r),yK={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},yG=(t,r)=>r.keyCode===t.keyCode&&r.shiftKey===t.shiftKey&&r.altKey===t.altKey&&r.ctrlKey===t.ctrlKey&&r.metaKey===t.metaKey,yY=(t,...r)=>()=>t.apply(null,r),yX=(t,r)=>{var n,o,a;return em((n=t,o=r,ep(eo(n,t=>({...yK,...t})),t=>yG(t,o)?[t]:[])),t=>t.action())},yQ=(t,r)=>{var n,o,a;return ew((n=t,o=r,ep(eo(n,t=>({...yK,...t})),t=>yG(t,o)?[t]:[])),t=>t.action())},yJ=(t,r)=>{let n=r?hc.Forwards:hc.Backwards,o=t.selection.getRng();return $Q(t,n,o,mY,mX,nz).exists(r=>($Y(t,r),!0))},yZ=(t,r)=>{let n=t.selection.getRng();return $J(t,r?1:-1,n,mY,mX,nz).exists(r=>($Y(t,r),!0))},Ce=(t,r)=>ye(t,r,r?mX:mY),Ct=lZ([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Cr={...Ct,none:t=>Ct.none(t)},Cn=(t,r,n)=>ep(rS(t),t=>rg(t,r)?n(t)?[t]:[]:Cn(t,r,n)),Co=(t,r)=>r4(t,"table",r),Ca=(t,r,n,o,a=X)=>{let l=1===o;if(!l&&n<=0)return Cr.first(t[0]);if(l&&n>=t.length-1)return Cr.last(t[t.length-1]);{let i=n+o,s=t[i];return a(s)?Cr.middle(r,s):Ca(t,r,i,o,a)}},Cl=(t,r)=>Co(t,r).bind(r=>{let n=Cn(r,"th,td",X);return ef(n,r=>rh(t,r)).map(t=>({index:t,all:n}))}),Ci=(t,r,n,o,a)=>{var l,i,s,d,u;let c=nb(rc(n),"td,th,caption").map(t=>t.dom),m=es((l=t,i=c,ep(i,t=>{var r,n;let o={left:(r=lm(t.getBoundingClientRect())).left- -1,top:r.top- -1,right:r.right+-2,bottom:r.bottom+-2,width:r.width+-1,height:r.height+-1};return[{x:o.left,y:l(o),cell:t},{x:o.right,y:l(o),cell:t}]})),t=>r(t,a));return(s=m,d=o,u=a,eu(s,(t,r)=>t.fold(()=>Q.some(r),t=>{let n=Math.sqrt(Math.abs(t.x-d)+Math.abs(t.y-u)),o=Math.sqrt(Math.abs(r.x-d)+Math.abs(r.y-u));return Q.some(o<n?r:t)}),Q.none())).map(t=>t.cell)},Cs=V(Ci,t=>t.bottom,(t,r)=>t.y<r),Cd=V(Ci,t=>t.top,(t,r)=>t.y>r),Cu=(t,r,n)=>{var o,a,l,i,s;let u=t(r,n);return((o=u).breakType!==d.Wrap||0!==o.positions.length)&&(nM(n.getNode())||(a=u).breakType!==d.Br||1!==a.positions.length)?u.breakAt.isNone():(l=t,i=r,!u.breakAt.exists(t=>l(i,t).breakAt.isSome()))},Cc=V(Cu,$0),Cm=V(Cu,$U),Cf=(t,r,n,o)=>{let a=t.selection.getRng();return!(!sQ()||!((t,r,n)=>{let o=lM.fromRangeStart(r);return d6(!t,n).exists(t=>t.isEqual(o))})(r,a,n)||(b5(r?1:-1,t,n,!r,!1).each(r=>{$Y(t,r)}),0))},Cg=(t,r,n)=>{let o=((t,r)=>{let n=r.getNode(t);return nN(n)?Q.some(n):Q.none()})(!!r,n),a=!1===r;o.fold(()=>$Y(t,n.toRange()),o=>d6(a,t.getBody()).filter(t=>t.isEqual(n)).fold(()=>$Y(t,n.toRange()),n=>((t,r,n)=>{r.undoManager.transact(()=>{let o=y1(r,rc(n),t?rX:rY);$Y(r,o)})})(r,t,o)))},Cp=(t,r,n,o)=>{var a,l,i,s,d,u,c,m,f,g;let p=t.selection.getRng(),h=lM.fromRangeStart(p),v=t.getBody();if(!r&&Cc(o,h)){let b=(a=v,l=n,i=h,(s=l,e_((d=i).getClientRects()).bind(t=>Cs(s,t.left,t.top)).bind(t=>{var r;return $F(d7(r=t).map(t=>$0(r,t).positions.concat(t)).getOr([]),d)})).orThunk(()=>e_(i.getClientRects()).bind(t=>$I($1(a,lM.before(l)),t.left))).getOr(lM.before(l)));return Cg(t,r,b),!0}if(r&&Cm(o,h)){let $=(u=v,c=n,m=h,(f=c,ex((g=m).getClientRects()).bind(t=>Cd(f,t.left,t.top)).bind(t=>{var r;return $F(dH(r=t).map(t=>[t].concat($U(r,t).positions)).getOr([]),g)})).orThunk(()=>e_(m.getClientRects()).bind(t=>$I($z(u,lM.after(c)),t.left))).getOr(lM.after(c)));return Cg(t,r,$),!0}return!1},Ch=(t,r,n)=>Q.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>Q.from(t.dom.getParent(o,"table")).map(a=>n(t,r,a,o))).getOr(!1),Cv=(t,r)=>Ch(t,r,Cf),Cb=(t,r)=>Ch(t,r,Cp),C$=(t,r,n)=>n.fold(Q.none,Q.none,(t,r)=>{var n;return((t,r)=>{let n=t=>{for(let o=0;o<t.childNodes.length;o++){let a=rc(t.childNodes[o]);if(r(a))return Q.some(a);let l=n(t.childNodes[o]);if(l.isSome())return l}return Q.none()};return n(t.dom)})(n=r,mE).map(t=>(t=>{let r=cx.exact(t,0,t,0);return cS(r)})(t))},n=>(t.execCommand("mceTableInsertRowAfter"),Cy(t,r,n))),Cy=(t,r,n)=>{var o,a;return C$(t,r,(a=rH,Cl(o=n,void 0).fold(()=>Cr.none(o),t=>Ca(t.all,o,t.index,1,a))))},CC=(t,r,n)=>{var o,a;return C$(t,r,(a=rH,Cl(o=n,void 0).fold(()=>Cr.none(),t=>Ca(t.all,o,t.index,-1,a))))},C_=(t,r)=>{var n,o;let a=["table","li","dl"],l=rc(t.getBody()),i=t=>{let r=t6(t);return rh(t,l)||er(a,r)},s=t.selection.getRng();return(n=rc(r?s.endContainer:s.startContainer),o=i,((t,r,n=Y)=>n(r)?Q.none():er(t,t6(r))?Q.some(r):r6(r,t.join(","),t=>rg(t,"table")||n(t)))(["td","th"],n,o)).map(n=>(Co(n,i).each(r=>{t.model.table.clearSelectedCells(r.dom)}),t.selection.collapse(!r),(r?Cy:CC)(t,i,n).each(r=>{t.selection.setRng(r)}),!0)).getOr(!1)},Cx=(t,r)=>({container:t,offset:r}),Ck=a1.DOM,Cw=t=>r=>t===r?-1:0,C8=(t,r,n)=>{if(nO(t)&&r>=0)return Q.some(Cx(t,r));{let o=lu(Ck);return Q.from(o.backwards(t,r,Cw(t),n)).map(t=>Cx(t.container,t.container.data.length))}},CE=(t,r,n)=>{if(!nO(t))return Q.none();let o=t.data;if(r>=0&&r<=o.length)return Q.some(Cx(t,r));{let a=lu(Ck);return Q.from(a.backwards(t,r,Cw(t),n)).bind(t=>{let o=t.container.data;return CE(t.container,r+o.length,n)})}},CS=(t,r,n)=>{if(!nO(t))return Q.none();let o=t.data;if(r<=o.length)return Q.some(Cx(t,r));{let a=lu(Ck);return Q.from(a.forwards(t,r,Cw(t),n)).bind(t=>CS(t.container,r-o.length,n))}},CN=(t,r,n,o,a)=>{var l;let i=lu(t,(l=t,t=>l.isBlock(t)||er(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===l.getContentEditable(t)));return Q.from(i.backwards(r,n,o,a))},CR=t=>oa(t.toString().replace(/\u00A0/g," ")),CA=t=>""!==t&&-1!==" \xa0\f\n\r	\v".indexOf(t),CO=(t,r)=>t.substring(r.length),CT=(t,r,n,o=0)=>{var a;return(a=rc(r.startContainer),r4(a,mS)).fold(()=>((t,r,n,o=0)=>{var a;if(!(a=r).collapsed||!nO(a.startContainer))return Q.none();let l={text:"",offset:0},i=t.getParent(r.startContainer,t.isBlock)||t.getRoot();return CN(t,r.startContainer,r.startOffset,(t,r,o)=>(l.text=o+l.text,l.offset+=r,((t,r,n)=>{let o,a=n.charAt(0);for(o=r-1;o>=0;o--){let l=t.charAt(o);if(CA(l))return Q.none();if(a===l&&eq(t,n,o,r))break}return Q.some(o)})(l.text,l.offset,n).getOr(r)),i).bind(t=>{let a=r.cloneRange();if(a.setStart(t.container,t.offset),a.setEnd(r.endContainer,r.endOffset),a.collapsed)return Q.none();let l=CR(a);return 0!==l.lastIndexOf(n)||CO(l,n).length<o?Q.none():Q.some({text:CO(l,n),range:a,trigger:n})})})(t,r,n,o),r=>{let o=t.createRng();o.selectNode(r.dom);let a=CR(o);return Q.some({range:o,text:CO(a,n),trigger:n})})},CB=t=>{var r;if(3===t.nodeType)return Cx(t,t.data.length);{let n=t.childNodes;return n.length>0?CB(n[n.length-1]):Cx(t,n.length)}},CD=(t,r)=>{var n;let o=t.childNodes;return o.length>0&&r<o.length?CD(o[r],0):o.length>0&&1===t.nodeType&&o.length===r?CB(o[o.length-1]):Cx(t,r)},CL=(t,r,n,o={})=>{var a;let l=r(),i=null!==(a=t.selection.getRng().startContainer.nodeValue)&&void 0!==a?a:"",s=es(l.lookupByTrigger(n.trigger),r=>n.text.length>=r.minChars&&r.matches.getOrThunk(()=>{var r;return r=t.dom,t=>{let n=CD(t.startContainer,t.startOffset);return!((t,r)=>{var n;let o=null!==(n=t.getParent(r.container,t.isBlock))&&void 0!==n?n:t.getRoot();return CN(t,r.container,r.offset,(t,r)=>0===r?-1:r,o).filter(t=>{let r=t.container.data.charAt(t.offset-1);return!CA(r)}).isSome()})(r,n)}})(n.range,i,n.text));if(0===s.length)return Q.none();let d=Promise.all(eo(s,t=>t.fetch(n.text,t.maxResults,o).then(r=>({matchText:n.text,items:r,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))));return Q.some({lookupData:d,context:n})};(n=c||(c={}))[n.Error=0]="Error",n[n.Value=1]="Value";let CP=(t,r,n)=>t.stype===c.Error?r(t.serror):n(t.svalue),CM=t=>({stype:c.Value,svalue:t}),CI=t=>({stype:c.Error,serror:t}),CF=CP,C0=t=>S(t)&&e8(t).length>100?" removed due to size":JSON.stringify(t,null,2),CU=(t,r)=>CI([{path:t,getErrorInfo:r}]),C1=(t,r)=>({extract:(n,o)=>eL(o,t).fold(()=>{var r,o;return r=n,o=t,CU(r,()=>'Choice schema did not contain choice key: "'+o+'"')},t=>{var a,l,i,s;return a=n,l=o,eL(i=r,s=t).fold(()=>{var t,r,n;return t=a,r=i,n=s,CU(t,()=>'The chosen schema: "'+n+'" did not exist in branches: '+C0(r))},t=>t.extract(a.concat(["branch: "+s]),l))}),toString:()=>"chooseOn("+t+"). Possible values: "+e8(r)}),Cz=t=>(...r)=>{if(0===r.length)throw Error("Can't merge zero objects");let n={};for(let o=0;o<r.length;o++){let a=r[o];for(let l in a)eP(a,l)&&(n[l]=t(n[l],a[l]))}return n},C6=Cz((t,r)=>N(t)&&N(r)?C6(t,r):r),Cj=(Cz((t,r)=>r),t=>({tag:"defaultedThunk",process:z(t)})),C4=t=>{var r;let n=(t=>{let r=[],n=[];return ea(t,t=>{CP(t,t=>n.push(t),t=>r.push(t))}),{values:r,errors:n}})(t);return n.errors.length>0?(r=n.errors,F(CI,eg)(r)):CM(n.values)},CH=(t,r,n)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},C7=t=>({extract(r,n){var o,a;return o=t(n),a=t=>{var n,o;return CU(n=r,z(t))},o.stype===c.Error?a(o.serror):o},toString:z("val")}),C3=C7(CM),C9=(t,r,n,o)=>o(eL(t,r).getOrThunk(()=>n(t))),C2=(t,r,n,o,a)=>{var l,i,s,d,u,m,f,g,p,h,v;let b=t=>a.extract(r.concat([o]),t),$=t=>t.fold(()=>CM(Q.none()),t=>{var n,l;let i=a.extract(r.concat([o]),t);return n=i,l=Q.some,n.stype===c.Value?{stype:c.Value,svalue:l(n.svalue)}:n});switch(t.tag){case"required":return l=r,i=n,s=o,d=b,eL(i,s).fold(()=>{var t,r,n;return t=l,r=s,n=i,CU(t,()=>'Could not find valid *required* value for "'+r+'" in '+C0(n))},d);case"defaultedThunk":return C9(n,o,t.process,b);case"option":return u=n,m=o,$(eL(u,m));case"defaultedOptionThunk":return g=n,p=o,h=t.process,$(eL(g,p).map(t=>!0===t?h(g):t));case"mergeWithThunk":return C9(n,o,z({}),r=>{let o=C6(t.process(n),r);return b(o)})}},C5=t=>({extract:(r,n)=>((t,r,n)=>{let o={},a=[];for(let l of n)CH(l,(n,l,i,s)=>{let d=C2(i,t,r,n,s);CF(d,t=>{a.push(...t)},t=>{o[l]=t})},(t,n)=>{o[t]=n(r)});return a.length>0?CI(a):CM(o)})(r,n,t),toString(){let r=eo(t,t=>CH(t,(t,r,n,o)=>t+" -> "+o.toString(),(t,r)=>"state("+t+")"));return"obj{\n"+r.join("\n")+"}"}}),CV=t=>({extract(r,n){let o=eo(n,(n,o)=>t.extract(r.concat(["["+o+"]"]),n));return C4(o)},toString:()=>"array("+t.toString()+")"}),Cq=(t,r,n)=>{var o,a,l,i,s,d;return CP(o=(a=t,l=r,i=n,s=l.extract([a],i),d=t=>({input:i,errors:t}),s.stype===c.Error?{stype:c.Error,serror:d(s.serror)}:s),lJ.error,lJ.value)},CW=(t,r)=>C1(t,eN(r,C5)),CK=z(C3),CG=(t,r)=>C7(n=>t(n)?CM(n):CI(`Expected type: ${r} but got: ${typeof n}`)),CY=CG(P,"number"),CX=CG(E,"string"),CQ=CG(O,"boolean"),CJ=CG(L,"function"),CZ=(t,r,n,o)=>({tag:"field",key:t,newKey:r,presence:n,prop:o}),_e=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),_t=(t,r)=>CZ(t,t,{tag:"required",process:{}},r),_r=t=>_t(t,CX),_n=t=>_t(t,CJ),_o=(t,r)=>CZ(t,t,{tag:"option",process:{}},r),_a=t=>_o(t,CX),_l=(t,r,n)=>CZ(t,t,Cj(r),n),_i=(t,r)=>_l(t,r,CY),_s=(t,r,n)=>{var o,a;return _l(t,r,(o=n,a=t=>er(o,t)?lJ.value(t):lJ.error(`Unsupported value: "${t}", choose one of "${o.join(", ")}".`),C7(t=>a(t).fold(CI,CM))))},_d=(t,r)=>_l(t,r,CQ),_u=(t,r)=>_l(t,r,CJ),_c=_r("type"),_m=_n("fetch"),_f=_n("onAction"),_g=_u("onSetup",()=>I),_p=_a("text"),_h=_a("icon"),_v=_a("tooltip"),_b=_a("label"),_$=_d("active",!1),_y=_d("enabled",!0),_C=_d("primary",!1),__=t=>{var r,n;return _l("type",t,CX)},_x=C5([_c,_r("trigger"),_i("minChars",1),CZ(o="columns",o,Cj(1),CK()),_i("maxResults",10),_o("matches",CJ),_m,_f,(m=CX,_l("highlightOn",[],CV(m)))]),_k=[_y,_v,_h,_p,_g],_w=[_$].concat(_k),_8=[_u("predicate",Y),_s("scope","node",["node","editor"]),_s("position","selection",["node","selection","line"])],_E=_k.concat([__("contextformbutton"),_C,_f,_e("original",j)]),_S=_w.concat([__("contextformbutton"),_C,_f,_e("original",j)]),_N=_k.concat([__("contextformbutton")]),_R=_w.concat([__("contextformtogglebutton")]),_A=CW("type",{contextformbutton:_E,contextformtogglebutton:_S});C5([__("contextform"),_u("initValue",z("")),_b,(a="commands",l=_A,CZ(a,a,{tag:"required",process:{}},CV(l))),_o("launch",CW("type",{contextformbutton:_N,contextformtogglebutton:_R}))].concat(_8));let _O=t=>{let r=t.ui.registry.getAll().popups,n=eN(r,t=>{var r;return Cq("Autocompleter",_x,{trigger:(r=t).ch,...r}).fold(t=>{var r;throw Error("Errors: \n"+(t=>{let r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:z("... (only showing first ten failures)")}]):t;return eo(r,t=>"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo())})((r=t).errors).join("\n")+"\n\nInput object: "+C0(r.input))},j)}),o=eI(eB(n,t=>t.trigger)),a=eD(n);return{dataset:n,triggers:o,lookupByTrigger:t=>es(a,r=>r.trigger===t)}},_T=t=>{let r=a5(),n=aj(!1),o=r.isSet,a=()=>{o()&&((t=>{vP(t).autocompleter.removeDecoration()})(t),(t=>{t.dispatch("AutocompleterEnd")})(t),n.set(!1),r.clear())},l=eH(()=>_O(t)),i=i=>{var s;(s=i,r.get().map(r=>CT(t.dom,t.selection.getRng(),r.trigger).bind(r=>CL(t,l,r,s))).getOrThunk(()=>((t,r)=>{var n,o,a;let l=r(),i=t.selection.getRng();return(n=t.dom,o=i,ew(l.triggers,t=>CT(n,o,t))).bind(n=>CL(t,r,n))})(t,l))).fold(a,l=>{var i;i=l.context,o()||(((t,r)=>{vP(t).autocompleter.addDecoration(r)})(t,i.range),r.set({trigger:i.trigger,matchLength:i.text.length})),l.lookupData.then(o=>{r.get().map(i=>{let s=l.context;i.trigger===s.trigger&&(s.text.length-i.matchLength>=10?a():(r.set({...i,matchLength:s.text.length}),n.get()?((t,r)=>{t.dispatch("AutocompleterUpdate",r)})(t,{lookupData:o}):(n.set(!0),((t,r)=>{t.dispatch("AutocompleterStart",r)})(t,{lookupData:o}))))})})})};t.addCommand("mceAutocompleterReload",(t,r)=>{let n=S(r)?r.fetchOptions:{};i(n)}),t.addCommand("mceAutocompleterClose",a),((t,r)=>{let n=aq(r.load,50);t.on("keypress compositionend",t=>{27!==t.which&&n.throttle()}),t.on("keydown",t=>{let o=t.which;8===o?n.throttle():27===o&&r.cancelIfNecessary()}),t.on("remove",n.cancel)})(t,{cancelIfNecessary:a,load:i})},_B=t=>(r,n,o={})=>{let a=r.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:I,inputType:n},i=a8(new InputEvent(t));return r.dispatch(t,{...i,...l,...o})},_D=_B("input"),_L=_B("beforeinput"),_P=(t,r)=>{let n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!r)return;if(/^(LI|DT|DD)$/.test(r.nodeName)){let a=(t=>{for(;t;){if(nx(t)||nO(t)&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}return null})(r.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&r.insertBefore(n.doc.createTextNode("\xa0"),r.firstChild)}let l=n.createRng();if(r.normalize(),r.hasChildNodes()){let i=new ny(r,r),s,d=r;for(;s=i.current();){if(nO(s)){l.setStart(s,0),l.setEnd(s,0);break}if(o[s.nodeName.toLowerCase()]){l.setStartBefore(s),l.setEndBefore(s);break}d=s,s=i.next()}s||(l.setStart(d,0),l.setEnd(d,0))}else nM(r)?r.nextSibling&&n.isBlock(r.nextSibling)?(l.setStartBefore(r),l.setEndBefore(r)):(l.setStartAfter(r),l.setEndAfter(r)):(l.setStart(r,0),l.setEnd(r,0));t.selection.setRng(l),cX(t,l)},_M=(t,r)=>{let n=t.getRoot(),o,a=r;for(;a!==n&&a&&"false"!==t.getContentEditable(a);)"true"===t.getContentEditable(a)&&(o=a),a=a.parentNode;return a!==n?o:n},_I=t=>Q.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),_F=(t,r)=>{let n=null==t?void 0:t.parentNode;return D(n)&&n.nodeName===r},_0=t=>D(t)&&/^(OL|UL|LI)$/.test(t.nodeName),_U=t=>{var r;let n=t.parentNode;return D(r=n)&&/^(LI|DT|DD)$/.test(r.nodeName)?n:t},_1=(t,r,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!nx(o);)o=o[n?"nextSibling":"previousSibling"];return o===r},_z=(t,r)=>r&&"A"===r.nodeName&&t.isEmpty(r),_6=t=>{t.innerHTML='<br data-mce-bogus="1">'},_j=(t,r)=>t.nodeName===r||t.previousSibling&&t.previousSibling.nodeName===r,_4=(t,r)=>D(r)&&t.isBlock(r)&&!/^(TD|TH|CAPTION|FORM)$/.test(r.nodeName)&&!/^(fixed|absolute)/i.test(r.style.position)&&t.isEditable(r.parentNode)&&"false"!==t.getContentEditable(r),_H=(t,r,n)=>nO(r)?t?1===n&&"\uFEFF"===r.data.charAt(n-1)?0:n:n===r.data.length-1&&"\uFEFF"===r.data.charAt(n)?r.data.length:n:n,_7=(t,r)=>{i_(t).toLowerCase()===r.tagName.toLowerCase()&&((t,r,n)=>{let o=t.dom;Q.from(n.style).map(o.parseStyle).each(t=>{let n={...rK(rc(r)),...t};o.setStyles(r,n)});let a=Q.from(n.class).map(t=>t.split(/\s+/)),l=Q.from(r.className).map(t=>es(t.split(/\s+/),t=>""!==t));tI(a,l,(t,n)=>{let a=es(n,r=>!er(t,r));o.setAttrib(r,"class",[...t,...a].join(" "))});let i=["style","class"],s=eT(n,(t,r)=>!er(i,r));o.setAttribs(r,s)})(t,r,ix(t))},_3={insert(t,r){var n,o,a,l;let i,s,d,u,c=!1,m=t.dom,f=t.schema,g=f.getNonEmptyElements(),p=t.selection.getRng(),h=i_(t),v=p.collapsed&&p.startContainer===t.dom.getRoot(),b=rc(p.startContainer),$=rN(b,p.startOffset),y=$.exists(t=>tH(t)&&!rH(t)),C=v&&y,_=r=>{let n=i,o=f.getTextInlineElements(),a,l=a=r||"TABLE"===d||"HR"===d?m.create(r||h):R.cloneNode(!1);if(!1===iE(t))m.setAttrib(a,"style",null),m.setAttrib(a,"class",null);else do if(o[n.nodeName]){if(d9(n)||ue(n))continue;let s=n.cloneNode(!1);m.setAttrib(s,"id",""),a.hasChildNodes()?(s.appendChild(a.firstChild),a.appendChild(s)):(l=s,a.appendChild(s))}while((n=n.parentNode)&&n!==N);return _7(t,a),_6(l),a},x=t=>{let r=_H(t,i,s);if(nO(i)&&(t?r>0:r<i.data.length))return!1;if(i.parentNode===R&&c&&!t||t&&nx(i)&&i===R.firstChild)return!0;if(_j(i,"TABLE")||_j(i,"HR"))return c&&!t||!c&&t;let n=new ny(i,R),o;for(nO(i)&&(t&&0===r?n.prev():t||r!==i.data.length||n.next());o=n.current();){if(nx(o)){if(!o.getAttribute("data-mce-bogus")){let a=o.nodeName.toLowerCase();if(g[a]&&"br"!==a)return!1}}else if(nO(o)&&!oR(o.data))return!1;t?n.prev():n.next()}return!0},k=()=>{let r;return r=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==O?_(h):_(),((t,r)=>{let n=iS(t);return!B(r)&&(E(n)?er(tP.explode(n),r.nodeName.toLowerCase()):n)})(t,u)&&_4(m,u)&&m.isEmpty(R,void 0,{includeZwsp:!0})?r=m.split(u,R):m.insertAfter(r,R),_P(t,r),r};cP(m,p).each(t=>{p.setStart(t.startContainer,t.startOffset),p.setEnd(t.endContainer,t.endOffset)}),i=p.startContainer,s=p.startOffset;let w=!(!r||!r.shiftKey),S=!(!r||!r.ctrlKey);nx(i)&&i.hasChildNodes()&&!C&&(c=s>i.childNodes.length-1,i=i.childNodes[Math.min(s,i.childNodes.length-1)]||i,s=c&&nO(i)?i.data.length:0);let N=_M(m,i);if(!N||((t,r)=>{let n=t.dom.getParent(r,"ol,ul,dl");return null!==n&&"false"===t.dom.getContentEditableParent(n)})(t,i))return;w||(i=((t,r,n,o,a)=>{var l,i;let s=t.dom,d=null!==(l=_M(s,o))&&void 0!==l?l:s.getRoot(),u=s.getParent(o,s.isBlock);if(!u||!_4(s,u)){if(!(u=u||d).hasChildNodes()){let c=s.create(r);return _7(t,c),u.appendChild(c),n.setStart(c,0),n.setEnd(c,0),c}let m,f=o;for(;f&&f.parentNode!==u;)f=f.parentNode;for(;f&&!s.isBlock(f);)m=f,f=f.previousSibling;let g=null===(i=null==m?void 0:m.parentElement)||void 0===i?void 0:i.nodeName;if(m&&g&&t.schema.isValidChild(g,r.toLowerCase())){let p=m.parentNode,h=s.create(r);for(_7(t,h),p.insertBefore(h,m),f=m;f&&!s.isBlock(f);){let v=f.nextSibling;h.appendChild(f),f=v}n.setStart(o,a),n.setEnd(o,a)}}return o})(t,h,p,i,s));let R=m.getParent(i,m.isBlock)||m.getRoot();u=D(null==R?void 0:R.parentNode)?m.getParent(R.parentNode,m.isBlock):null,d=R?R.nodeName.toUpperCase():"";let O=u?u.nodeName.toUpperCase():"";if("LI"!==O||S||(R=u,u=u.parentNode,d=O),nx(u)&&(n=t,o=w,a=R,!o&&a.nodeName.toLowerCase()===i_(n)&&n.dom.isEmpty(a)&&((t,r,o)=>{var a;let l=r;for(;l&&l!==t&&A(l.nextSibling);){let i=l.parentElement;if(!i||(a=i,!eP(n.schema.getTextBlockElements(),a.nodeName.toLowerCase())))return nj(i);l=i}return!1})(n.getBody(),a)))return((t,r,n)=>{var o,a,l,i,s;let d=r(i_(t)),u=(i=t,s=n,i.dom.getParent(s,nj));u&&(t.dom.insertAfter(d,u),_P(t,d),(null!==(l=null===(a=null===(o=n.parentElement)||void 0===o?void 0:o.childNodes)||void 0===a?void 0:a.length)&&void 0!==l?l:0)>1&&t.dom.remove(n))})(t,_,R);if(/^(LI|DT|DD)$/.test(d)&&nx(u)&&m.isEmpty(R))return void((t,r,n,o,a)=>{var l,i,s,d;let u=t.dom,c=t.selection.getRng(),m=n.parentNode;if(n===t.getBody()||!m)return;_0(l=n)&&_0(l.parentNode)&&(a="LI");let f=r(a);if(_1(n,o,!0)&&_1(n,o,!1)){if(_F(n,"LI")){let g=_U(n);u.insertAfter(f,g),(null===(s=(i=n).parentNode)||void 0===s?void 0:s.firstChild)===i?u.remove(g):u.remove(n)}else u.replace(f,n)}else if(_1(n,o,!0))_F(n,"LI")?(u.insertAfter(f,_U(n)),f.appendChild(u.doc.createTextNode(" ")),f.appendChild(n)):m.insertBefore(f,n),u.remove(o);else if(_1(n,o,!1))u.insertAfter(f,_U(n)),u.remove(o);else{n=_U(n);let p=c.cloneRange();p.setStartAfter(o),p.setEndAfter(n);let h=p.extractContents();"LI"===a&&(d=h).firstChild&&"LI"===d.firstChild.nodeName?(f=h.firstChild,u.insertAfter(h,n)):(u.insertAfter(h,n),u.insertAfter(f,n)),u.remove(o)}_P(t,f)})(t,_,u,R,h);if(!(C||R!==t.getBody()&&_4(m,R)))return;let T=R.parentNode,L;if(C)L=_(h),$.fold(()=>{rJ(b,rc(L))},t=>{rY(t,rc(L))}),t.selection.setCursorLocation(L,0);else if(os(R))L=oh(R),m.isEmpty(R)&&_6(R),_7(t,L),_P(t,L);else if(x(!1))L=k();else if(x(!0)&&T){L=T.insertBefore(_(),R);let P=rc(p.startContainer).dom.hasChildNodes()&&p.collapsed;_P(t,_j(R,"HR")||P?L:R)}else{let M=(t=>{let r=t.cloneRange();return r.setStart(t.startContainer,_H(!0,t.startContainer,t.startOffset)),r.setEnd(t.endContainer,_H(!1,t.endContainer,t.endOffset)),r})(p).cloneRange();M.setEndAfter(R);let I=M.extractContents();ea(nv(rc(I),t3),t=>{let r=t.dom;r.nodeValue=oa(r.data)}),(t=>{let r=t;do nO(r)&&(r.data=r.data.replace(/^[\r\n]+/,"")),r=r.firstChild;while(r)})(I),L=I.firstChild,m.insertAfter(I,R),((t,r,n)=>{var o;let a=[];if(!n)return;let l=n;for(;l=l.firstChild;){if(t.isBlock(l))return;nx(l)&&!r[l.nodeName.toLowerCase()]&&a.push(l)}let i=a.length;for(;i--;)(!(l=a[i]).hasChildNodes()||l.firstChild===l.lastChild&&""===(null===(o=l.firstChild)||void 0===o?void 0:o.nodeValue)||_z(t,l))&&t.remove(l)})(m,g,L),((t,r)=>{r.normalize();let n=r.lastChild;(!n||nx(n)&&/^(left|right)$/gi.test(t.getStyle(n,"float",!0)))&&t.add(r,"br")})(m,R),m.isEmpty(R)&&_6(R),L.normalize(),m.isEmpty(L)?(m.remove(L),k()):(_7(t,L),_P(t,L))}m.setAttrib(L,"id",""),t.dispatch("NewBlock",{newBlock:L})},fakeEventName:"insertParagraph"},_9=(t,r,n)=>{let o=t.dom.createRng();n?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),t.selection.setRng(o),cX(t,o)},_2=(t,r)=>{let n=rd("br");rY(rc(r),n),t.undoManager.add()},_5=(t,r)=>{_V(t.getBody(),r)||rX(rc(r),rd("br"));let n=rd("br");rX(rc(r),n),_9(t,n.dom,!1),t.undoManager.add()},_V=(t,r)=>{var n;return!!nM((n=lM.after(r)).getNode())||dj(t,lM.after(r)).map(t=>nM(t.getNode())).getOr(!1)},_q=t=>t&&"A"===t.nodeName&&"href"in t,_W=t=>t.fold(Y,_q,_q,Y),_K=(t,r)=>{r.fold(I,V(_2,t),V(_5,t),I)},_G={insert(t,r){let n=(t=>{let r=V(f6,t),n=lM.fromRangeStart(t.selection.getRng());return $w(r,t.getBody(),n).filter(_W)})(t);n.isSome()?n.each(V(_K,t)):((t,r)=>{let n=t.selection,o=t.dom,a=n.getRng(),l,i=!1;cP(o,a).each(t=>{a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset)});let s=a.startOffset,d=a.startContainer;if(nx(d)&&d.hasChildNodes()){let u=s>d.childNodes.length-1;d=d.childNodes[Math.min(s,d.childNodes.length-1)]||d,s=u&&nO(d)?d.data.length:0}let c=o.getParent(d,o.isBlock),m=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,f=m?m.nodeName.toUpperCase():"",g=!(!r||!r.ctrlKey);"LI"!==f||g||(c=m),nO(d)&&s>=d.data.length&&(((t,r,n)=>{let o=new ny(r,n),a,l=t.getNonEmptyElements();for(;a=o.next();)if(l[a.nodeName.toLowerCase()]||nO(a)&&a.length>0)return!0;return!1})(t.schema,d,c||o.getRoot())||(l=o.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),i=!0)),l=o.create("br"),lF(o,a,l),_9(t,l,i),t.undoManager.add()})(t,r)},fakeEventName:"insertLineBreak"},_Y=(t,r)=>_I(t).filter(t=>r.length>0&&rg(rc(t),r)).isSome(),_X=lZ([{br:[]},{block:[]},{none:[]}]),_Q=(t,r)=>{var n;return _Y(n=t,i8(n))},_J=t=>(r,n)=>{var o;return _I(r).filter(t=>nY(rc(t))).isSome()===t},_Z=(t,r)=>(n,o)=>{var a;let l=(a=n,_I(a).fold(z(""),t=>t.nodeName.toUpperCase())===t.toUpperCase());return l===r},xe=t=>{let r=_M(t.dom,t.selection.getStart());return B(r)},xt=t=>_Z("pre",t),xr=t=>(r,n)=>iC(r)===t,xn=(t,r)=>{var n;return _Y(n=t,iw(n))},xo=(t,r)=>r,xa=t=>{let r=i_(t),n=_M(t.dom,t.selection.getStart());return D(n)&&t.schema.isValidChild(n.nodeName,r)},xl=t=>{let r=t.selection.getRng(),n=r.collapsed&&r.startContainer===t.dom.getRoot(),o=rc(r.startContainer),a=rN(o,r.startOffset).map(t=>tH(t)&&!rH(t));return n&&a.getOr(!0)},xi=(t,r)=>(n,o)=>eu(t,(t,r)=>t&&r(n,o),!0)?Q.some(r):Q.none(),xs=(t,r,n)=>{r.selection.isCollapsed()||(t=>{t.execCommand("delete")})(r),D(n)&&_L(r,t.fakeEventName).isDefaultPrevented()||(t.insert(r,n),D(n)&&_D(r,t.fakeEventName))},xd=(t,r)=>{var n,o;let a=()=>xs(_G,t,r),l=()=>xs(_3,t,r),i=(n=t,o=r,$p([xi([_Q],_X.none()),xi([xt(!0),xe],_X.none()),xi([_Z("summary",!0)],_X.br()),xi([xt(!0),xr(!1),xo],_X.br()),xi([xt(!0),xr(!1)],_X.block()),xi([xt(!0),xr(!0),xo],_X.block()),xi([xt(!0),xr(!0)],_X.br()),xi([_J(!0),xo],_X.br()),xi([_J(!0)],_X.block()),xi([xn],_X.br()),xi([xo],_X.br()),xi([xa],_X.block()),xi([xl],_X.block())],[n,!(!o||!o.shiftKey)]).getOr(_X.none()));switch(ik(t)){case"linebreak":i.fold(a,a,I);break;case"block":i.fold(l,l,I);break;case"invert":i.fold(l,a,I);break;default:i.fold(a,l,I)}},xu=t8(),xc=xu.os.isiOS()&&xu.browser.isSafari(),xm=(t,r)=>{var n;r.isDefaultPrevented()||(r.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{xd(t,r)}))},xf=t8(),xg=t=>t.stopImmediatePropagation(),xp=t=>t.keyCode===cs.PAGE_UP||t.keyCode===cs.PAGE_DOWN,xh=(t,r,n)=>{n&&!t.get()?r.on("NodeChange",xg,!0):!n&&t.get()&&r.off("NodeChange",xg),t.set(n)},xv=(t,r)=>{let n=r.container(),o=r.offset();return nO(n)?(n.insertData(o,t),Q.some(lM(n,o+t.length))):dw(r).map(n=>{let o=ru(t);return r.isAtEnd()?rX(n,o):rY(n,o),lM(o.dom,t.length)})},xb=V(xv,"\xa0"),x$=V(xv," "),xy=t=>r=>{t.selection.setRng(r.toRange()),t.nodeChanged()},xC=t=>{let r=lM.fromRangeStart(t.selection.getRng()),n=rc(t.getBody());if(t.selection.isCollapsed()){var o;let a=V(f6,t),l=lM.fromRangeStart(t.selection.getRng());return $w(a,t.getBody(),l).bind((o=n,t=>t.fold(t=>d4(o.dom,lM.before(t)),t=>dH(t),t=>d7(t),t=>dj(o.dom,lM.after(t))))).map(o=>()=>{var a,l;return(a=n,l=r,t=>fx(a,t)?xb(l):x$(l))(o).each(xy(t))})}return Q.none()},x_=t=>{var r,n;return tF(tT.browser.isFirefox()&&t.selection.isEditable()&&(r=t.dom,n=t.selection.getRng().startContainer,r.isEditable(r.getParent(n,"summary"))),()=>{var r,n;let o=rc(t.getBody());t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,fx(r,n=lM.fromRangeStart(t.selection.getRng()))?xb(n):x$(n)).each(xy(t))})},xx=t=>s6(t)?[{keyCode:cs.TAB,action:yY(C_,t,!0)},{keyCode:cs.TAB,shiftKey:!0,action:yY(C_,t,!1)}]:[],xk=t=>{if(t.addShortcut("Meta+P","","mcePrint"),_T(t),vD(t))return aj(null);{var r,n,o;let a=yi(t),l,i;return(t=>{t.on("keyup compositionstart",V(y4,t))})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tT.os.isMacOS()||tT.os.isiOS();yX([{keyCode:cs.RIGHT,action:yY(y3,t,!0)},{keyCode:cs.LEFT,action:yY(y3,t,!1)},{keyCode:cs.UP,action:yY(y9,t,!1)},{keyCode:cs.DOWN,action:yY(y9,t,!0)},...o?[{keyCode:cs.UP,action:yY(y5,t,!1),metaKey:!0,shiftKey:!0},{keyCode:cs.DOWN,action:yY(y5,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:cs.RIGHT,action:yY(Cv,t,!0)},{keyCode:cs.LEFT,action:yY(Cv,t,!1)},{keyCode:cs.UP,action:yY(Cb,t,!1)},{keyCode:cs.DOWN,action:yY(Cb,t,!0)},{keyCode:cs.RIGHT,action:yY(yJ,t,!0)},{keyCode:cs.LEFT,action:yY(yJ,t,!1)},{keyCode:cs.UP,action:yY(yZ,t,!1)},{keyCode:cs.DOWN,action:yY(yZ,t,!0)},{keyCode:cs.RIGHT,action:yY(ya,t,r,!0)},{keyCode:cs.LEFT,action:yY(ya,t,r,!1)},{keyCode:cs.RIGHT,ctrlKey:!o,altKey:o,action:yY(ys,t,r)},{keyCode:cs.LEFT,ctrlKey:!o,altKey:o,action:yY(yd,t,r)},{keyCode:cs.UP,action:yY(yW,t,!1)},{keyCode:cs.DOWN,action:yY(yW,t,!0)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,a),r=t,n=a,l=!1,r.on("keydown",t=>{l=t.keyCode===cs.BACKSPACE,t.isDefaultPrevented()||((t,r,n)=>{let o=n.keyCode===cs.BACKSPACE?"deleteContentBackward":"deleteContentForward";yQ([{keyCode:cs.BACKSPACE,action:yY(yB,t)},{keyCode:cs.BACKSPACE,action:yY($n,t,!1)},{keyCode:cs.DELETE,action:yY($n,t,!0)},{keyCode:cs.BACKSPACE,action:yY(bY,t,!1)},{keyCode:cs.DELETE,action:yY(bY,t,!0)},{keyCode:cs.BACKSPACE,action:yY(yf,t,r,!1)},{keyCode:cs.DELETE,action:yY(yf,t,r,!0)},{keyCode:cs.BACKSPACE,action:yY(g$,t,!1)},{keyCode:cs.DELETE,action:yY(g$,t,!0)},{keyCode:cs.BACKSPACE,action:yY($o,t,!1)},{keyCode:cs.DELETE,action:yY($o,t,!0)},{keyCode:cs.BACKSPACE,action:yY(y8,t,!1)},{keyCode:cs.DELETE,action:yY(y8,t,!0)},{keyCode:cs.BACKSPACE,action:yY(b2,t,!1)},{keyCode:cs.DELETE,action:yY(b2,t,!0)},{keyCode:cs.BACKSPACE,action:yY(b7,t,!1)},{keyCode:cs.DELETE,action:yY(b7,t,!0)},{keyCode:cs.BACKSPACE,action:yY(y_,t,!1)},{keyCode:cs.DELETE,action:yY(y_,t,!0)}],n).filter(r=>t.selection.isEditable()).each(r=>{n.preventDefault(),_L(t,o).isDefaultPrevented()||(r(),_D(t,o))})})(r,n,t)}),r.on("keyup",t=>{t.isDefaultPrevented()||((t,r,n)=>{let o=t8(),a=o.os,l=o.browser,i=a.isMacOS()?[{keyCode:cs.BACKSPACE,altKey:!0,action:yY(yk,t)},{keyCode:cs.DELETE,altKey:!0,action:yY(yk,t)}]:[{keyCode:cs.BACKSPACE,ctrlKey:!0,action:yY(yk,t)},{keyCode:cs.DELETE,ctrlKey:!0,action:yY(yk,t)}];a.isMacOS()&&n&&i.push({keyCode:l.isFirefox()?224:91,action:yY(yk,t)}),yX([{keyCode:cs.BACKSPACE,action:yY($r,t)},{keyCode:cs.DELETE,action:yY($r,t)},...i],r)})(r,t,l),l=!1}),o=t,i=Q.none(),o.on("keydown",t=>{var r;t.keyCode===cs.ENTER&&(xc&&(t=>{if(!t.collapsed)return!1;let r=t.startContainer;if(nO(r)){let n=r.data.charAt(t.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(n)}return!1})(o.selection.getRng())?(r=o,i=Q.some(r.selection.getBookmark()),r.undoManager.add()):xm(o,t))}),o.on("keyup",t=>{t.keyCode===cs.ENTER&&i.each(()=>{var r,n;return r=o,n=t,void(r.undoManager.undo(),i.fold(I,t=>r.selection.moveToBookmark(t)),xm(r,n),i=Q.none())})}),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{yQ([{keyCode:cs.SPACEBAR,action:yY(xC,t)},{keyCode:cs.SPACEBAR,action:yY(x_,t)}],r).each(n=>{r.preventDefault(),_L(t,"insertText",{data:" "}).isDefaultPrevented()||(n(),_D(t,"insertText",{data:" "}))})})(t,r)})})(t),(t=>{t.on("input",r=>{r.isComposing||(t=>{let r=rc(t.getBody());t.selection.isCollapsed()&&fA(r,lM.fromRangeStart(t.selection.getRng())).each(r=>{t.selection.setRng(r.toRange())})})(t)})})(t),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{yX([...xx(t)],r).each(t=>{r.preventDefault()})})(t,r)})})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tT.os.isMacOS()||tT.os.isiOS();yX([{keyCode:cs.END,action:yY(y2,t,!0)},{keyCode:cs.HOME,action:yY(y2,t,!1)},...o?[]:[{keyCode:cs.HOME,action:yY(y5,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:cs.END,action:yY(y5,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:cs.END,action:yY(Ce,t,!0)},{keyCode:cs.HOME,action:yY(Ce,t,!1)},{keyCode:cs.END,action:yY(yu,t,!0,r)},{keyCode:cs.HOME,action:yY(yu,t,!1,r)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,a),((t,r)=>{if(xf.os.isMacOS())return;let n=aj(!1);t.on("keydown",r=>{xp(r)&&xh(n,t,!0)}),t.on("keyup",o=>{var a,l,i;o.isDefaultPrevented()||(a=t,l=r,i=o,yX([{keyCode:cs.PAGE_UP,action:yY(yu,a,!1,l)},{keyCode:cs.PAGE_DOWN,action:yY(yu,a,!0,l)}],i)),xp(o)&&n.get()&&(xh(n,t,!1),t.nodeChanged())})})(t,a),a}};class xw{constructor(t){let r;this.lastPath=[],this.editor=t;let n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",n=>{let o=t.selection.getRng(),a={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&cR(a,r)||t.dispatch("SelectionChange"),r=a}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{let r=t.selection.getStart(!0);r&&u$(t)&&!n.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&u$(t)&&("IMG"===t.selection.getNode().nodeName?md.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){let r=this.editor.selection,n;if(this.editor.initialized&&r&&!sl(this.editor)&&!this.editor.mode.isReadOnly()){let o=this.editor.getBody();(n=r.getStart(!0)||o).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(n,o)||(n=o);let a=[];this.editor.dom.getParent(n,t=>t===o||(a.push(t),!1)),this.editor.dispatch("NodeChange",{...t,element:n,parents:a})}}isSameElementPath(t){let r,n=this.editor,o=ev(n.dom.getParents(t,X,n.getBody()));if(o.length===this.lastPath.length){for(r=o.length;r>=0&&o[r]===this.lastPath[r];r--);if(-1===r)return this.lastPath=o,!0}return this.lastPath=o,!1}}let x8=lo("image"),xE=lo("event"),xS=t=>r=>{r[xE]=t},xN=xS(0),xR=xS(2),xA=xS(1),xO=t=>Q.from(t[xE]).exists(t=>0===t),xT,xB=lo("mode"),xD=t=>r=>{r[xB]=t},xL=(t,r)=>xD(r)(t),xP=xD(0),xM=xD(2),xI=xD(1),xF=t=>r=>Q.from(r[xB]).exists(r=>r===t),x0=xF(0),xU=xF(1),x1=["none","copy","link","move"],xz=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],x6=()=>{let t=new window.DataTransfer,r="move",n="all",o={get dropEffect(){return r},set dropEffect(e){er(x1,e)&&(r=e)},get effectAllowed(){return n},set effectAllowed(e){xO(o)&&er(xz,e)&&(n=e)},get items(){var a,l;return a=o,{...l=t.items,get length(){return l.length},add(t,r){if(x0(a)){if(!E(t))return l.add(t);if(!T(r))return l.add(t,r)}return null},remove(t){x0(a)&&l.remove(t)},clear(){x0(a)&&l.clear()}}},get files(){return xU(o)?Object.freeze({length:0,item:t=>null}):t.files},get types(){return t.types},setDragImage(r,n,a){var l;x0(o)&&(l={image:r,x:n,y:a},o[x8]=l,t.setDragImage(r,n,a))},getData:r=>xU(o)?"":t.getData(r),setData(r,n){x0(o)&&t.setData(r,n)},clearData(r){x0(o)&&t.clearData(r)}};return xP(o),o},xj=(t,r)=>t.setData("text/html",r),x4="x-tinymce/html",xH=z(x4),x7="<!-- "+x4+" -->",x3=t=>x7+t,x9=t=>-1!==t.indexOf(x7),x2="%MCEPASTEBIN%",x5=t=>t.dom.get("mcepastebin"),xV=t=>D(t)&&"mcepastebin"===t.id,xq=t=>t===x2,xW=(t,r)=>(tP.each(r,r=>{t=w(r,RegExp)?t.replace(r,""):t.replace(r[0],r[1])}),t),xK=t=>xW(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,r,n)=>r||n?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),xG=(t,r)=>({content:t,cancelled:r}),xY=(t,r)=>(t.insertContent(r,{merge:sR(t),paste:!0}),!0),xX=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),xQ=(t,r,n)=>{var o,a,l;return!(t.selection.isCollapsed()||!xX(r))&&(o=t,a=r,l=n,o.undoManager.extra(()=>{l(o,a)},()=>{o.execCommand("mceInsertLink",!1,a)}),!0)},xJ=(t,r,n)=>{var o,a,l,i,s;return o=t,!!(xX(a=r)&&en(sz(o),t=>eK(a.toLowerCase(),`.${t.toLowerCase()}`)))&&(l=t,i=r,s=n,l.undoManager.extra(()=>{s(l,i)},()=>{l.insertContent('<img src="'+i+'">')}),!0)},xZ=(xT=0,()=>"mceclip"+xT++),ke=t=>{let r=x6();return xj(r,t),xM(r),r},kt=(t,r,n,o,a)=>{var l,i,s;let d=(l=t,i=r,s=n,((t,r,n)=>{var o,a,l;let i=(o=t,a=r,l=n,o.dispatch("PastePreProcess",{content:a,internal:l})),s=((t,r)=>{let n=vr({sanitize:sU(t)},t.schema);n.addNodeFilter("meta",t=>{tP.each(t,t=>{t.remove()})});let o=n.parse(r,{forced_root_block:!1,isRootContent:!0});return m6({validate:!0},t.schema).serialize(o)})(t,i.content);return t.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()?((t,r,n)=>{var o,a,l;let i=t.dom.create("div",{style:"display:none"},r),s=(o=t,a=i,l=n,o.dispatch("PastePostProcess",{node:a,internal:l}));return xG(s.node.innerHTML,s.isDefaultPrevented())})(t,s,n):xG(s,i.isDefaultPrevented())})(l,i,s));if(!d.cancelled){let u=d.content,c=()=>{var r,n,a,l,i;return r=t,n=u,void((a=o)||!sA(r)?xY(r,n):(l=r,i=n,void tP.each([xQ,xJ,xY],t=>!t(l,i,xY))))};a?_L(t,"insertFromPaste",{dataTransfer:ke(u)}).isDefaultPrevented()||(c(),_D(t,"insertFromPaste")):c()}},kr=(t,r,n,o)=>{var a;let l=n||x9(r);kt(t,r.replace(x7,""),l,!1,o)},kn=(t,r,n)=>{let o=t.dom.encode(r).replace(/\r\n/g,"\n"),a=((t,r,n)=>{let o=t.split(/\n\n/),a=((t,r)=>{let n="<"+t,o=eB(r,(t,r)=>r+'="'+au.encodeAllRaw(t)+'"');return o.length&&(n+=" "+o.join(" ")),n+">"})(r,n),l="</"+r+">",i=eo(o,t=>t.split(/\n/).join("<br />"));return 1===i.length?i[0]:eo(i,t=>a+t+l).join("")})(oT(o,sT(t)),i_(t),ix(t));kt(t,a,!1,!0,n)},ko=t=>{let r={};if(t&&t.types)for(let n=0;n<t.types.length;n++){let o=t.types[n];try{r[o]=t.getData(o)}catch(a){r[o]=""}}return r},ka=(t,r)=>r in t&&t[r].length>0,kl=t=>ka(t,"text/html")||ka(t,"text/plain"),ki=(t,r,n)=>{var o;let a="paste"===r.type?r.clipboardData:r.dataTransfer;if(sk(t)&&a){let l=((t,r)=>{let n=r.items?ep(ek(r.items),t=>"file"===t.kind?[t.getAsFile()]:[]):[],o=r.files?ek(r.files):[];return es(n.length>0?n:o,(t=>{let r=sz(t);return t=>eW(t.type,"image/")&&en(r,r=>(t=>{let r=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tP.hasOwn(n,r)?"image/"+n[r]:"image/"+r})(r)===t.type)})(t))})(t,a);if(l.length>0)return r.preventDefault(),(o=l,Promise.all(eo(o,t=>p2(t).then(r=>({file:t,uri:r}))))).then(r=>{n&&t.selection.setRng(n),ea(r,r=>{((t,r)=>{p3(r.uri).each(({data:n,type:o,base64Encoded:a})=>{let l=a?n:btoa(n),i=r.file,s=t.editorUpload.blobCache,d=s.getByData(l,o),u=null!=d?d:((t,r,n,o)=>{let a=xZ(),l=iR(t)&&D(n.name),i=l?((t,r)=>{let n=r.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return D(n)?t.dom.encode(n[1]):void 0})(t,n.name):a,s=l?n.name:void 0,d=r.create(a,n,o,i,s);return r.add(d),d})(t,s,i,l);kr(t,`<img src="${u.blobUri()}">`,!1,!0)})})(t,r)})}),!0}return!1},ks=(t,r,n,o,a)=>{var l;let i=xK(n),s=ka(r,xH())||x9(n),d=!s&&(l=i,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(l)),u=xX(i);(xq(i)||!i.length||d&&!u)&&(o=!0),(o||u)&&(i=ka(r,"text/plain")&&d?r["text/plain"]:(t=>{let r=ax(),n=vr({},r),o="",a=r.getVoidElements(),l=tP.makeMap("script noscript style textarea video audio iframe object"," "),i=r.getBlockElements(),s=t=>{let n=t.name;if("br"!==n){if("wbr"!==n){if(a[n]&&(o+=" "),l[n])o+=" ";else{if(3===t.type&&(o+=t.value),!(t.name in r.getVoidElements())){let d=t.firstChild;if(d)do s(d);while(d=d.next)}i[n]&&t.next&&(o+="\n","p"===n&&(o+="\n"))}}}else o+="\n"};return t=xW(t,[/<!\[[^\]]+\]>/g]),s(n.parse(t)),o})(i)),xq(i)||(o?kn(t,i,a):kr(t,i,s,a))},kd=(t,r,n)=>{var o,a,l;let i;o=t,a=r,l=n,o.on("keydown",t=>{var r;r=t,(cs.metaKeyPressed(r)&&86===r.keyCode||r.shiftKey&&45===r.keyCode)&&!t.isDefaultPrevented()&&(i=t.shiftKey&&86===t.keyCode)}),o.on("paste",t=>{var r,n,s;if(t.isDefaultPrevented()||(r=t,tT.os.isAndroid()&&0===(null===(s=null===(n=r.clipboardData)||void 0===n?void 0:n.items)||void 0===s?void 0:s.length)))return;let d="text"===l.get()||i;i=!1;let u=ko(t.clipboardData);!kl(u)&&ki(o,t,a.getLastRng()||o.selection.getRng())||(ka(u,"text/html")?(t.preventDefault(),ks(o,u,u["text/html"],d,!0)):ka(u,"text/plain")&&ka(u,"text/uri-list")?(t.preventDefault(),ks(o,u,u["text/plain"],d,!0)):(a.create(),md.setEditorTimeout(o,()=>{let t=a.getHtml();a.remove(),ks(o,u,t,d,!1)},0)))}),(t=>{let r=t=>eW(t,"webkit-fake-url"),n=t=>eW(t,"data:");t.parser.addNodeFilter("img",(o,a,l)=>{var i,s;if(!sk(t)&&!0===(null===(s=(i=l).data)||void 0===s?void 0:s.paste))for(let d of o){let u=d.attr("src");E(u)&&!d.attr("data-mce-object")&&u!==tT.transparentSrc&&(r(u)||!sB(t)&&n(u))&&d.remove()}})})(t)},ku=(t,r,n,o)=>{((t,r,n)=>{if(!t)return!1;try{return t.clearData(),t.setData("text/html",r),t.setData("text/plain",n),t.setData(xH(),r),!0}catch(o){return!1}})(t.clipboardData,r.html,r.text)?(t.preventDefault(),o()):n(r.html,o)},kc=t=>(r,n)=>{let{dom:o,selection:a}=t,l=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},r);o.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(i),o.add(t.getBody(),l);let s=a.getRng();i.focus();let d=o.createRng();d.selectNodeContents(i),a.setRng(d),md.setEditorTimeout(t,()=>{a.setRng(s),o.remove(l),n()},0)},km=t=>({html:x3(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),kf=t=>{var r;return!t.selection.isCollapsed()||!!(r=t).dom.getParent(r.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",r.getBody())},kg=(t,r)=>{var n,o;return cF.getCaretRangeFromPoint(null!==(n=r.clientX)&&void 0!==n?n:0,null!==(o=r.clientY)&&void 0!==o?o:0,t.getDoc())},kp=(t,r)=>{t.focus(),r&&t.selection.setRng(r)},kh=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,kv=t=>tP.trim(t).replace(kh,uu).toLowerCase(),kb=(t,r,n)=>{let o=sS(t);if(n||"all"===o||!sN(t))return r;let a=o?o.split(/[, ]/):[];if(a&&"none"!==o){let l=t.dom,i=t.selection.getNode();r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(t,r,n,o)=>{let s=l.parseStyle(l.decode(n)),d={};for(let u=0;u<a.length;u++){let c=s[a[u]],m=c,f=l.getStyle(i,a[u],!0);/color/.test(a[u])&&(m=kv(m),f=kv(f)),f!==m&&(d[a[u]]=c)}let g=l.serializeStyle(d,"span");return g?r+' style="'+g+'"'+o:r+o})}else r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return r=r.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(t,r,n,o)=>r+' style="'+n+'"'+o)},k$=t=>{var r,n,o;let a=aj(!1),l=aj(sO(t)?"text":"html"),i=(t=>{let r=aj(null);return{create:()=>((t,r)=>{let{dom:n,selection:o}=t,a=t.getBody();r.set(o.getRng());let l=n.add(t.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},x2);tT.browser.isFirefox()&&n.setStyle(l,"left","rtl"===n.getStyle(a,"direction",!0)?65535:-65535),n.bind(l,"beforedeactivate focusin focusout",t=>{t.stopPropagation()}),l.focus(),o.select(l,!0)})(t,r),remove:()=>((t,r)=>{let n=t.dom;if(x5(t)){let o,a=r.get();for(;o=x5(t);)n.remove(o),n.unbind(o);a&&t.selection.setRng(a)}r.set(null)})(t,r),getEl:()=>x5(t),getHtml:()=>(t=>{let r=t.dom,n=(t,n)=>{t.appendChild(n),r.remove(n,!0)},[o,...a]=es(t.getBody().childNodes,xV);ea(a,t=>{n(o,t)});let l=r.select("div[id=mcepastebin]",o);for(let i=l.length-1;i>=0;i--){let s=r.create("div");o.insertBefore(s,l[i]),n(s,l[i])}return o?o.innerHTML:""})(t),getLastRng:r.get}})(t);r=t,(tT.browser.isChromium()||tT.browser.isSafari())&&((t,r)=>{t.on("PastePreProcess",n=>{n.content=r(t,n.content,n.internal)})})(r,kb),n=t,o=l,n.addCommand("mceTogglePlainTextPaste",()=>{var t,r;t=n,"text"===(r=o).get()?(r.set("html"),ci(t,!1)):(r.set("text"),ci(t,!0)),t.focus()}),n.addCommand("mceInsertClipboardContent",(t,r)=>{r.html&&kr(n,r.html,r.internal,!1),r.text&&kn(n,r.text,!1)}),(t=>{let r=r=>n=>{r(t,n)},n=sw(t);L(n)&&t.on("PastePreProcess",r(n));let o=s8(t);L(o)&&t.on("PastePostProcess",r(o))})(t),t.on("PreInit",()=>{var r,n,o,s,d;(r=t).on("cut",(n=r,t=>{!t.isDefaultPrevented()&&kf(n)&&ku(t,km(n),kc(n),()=>{if(tT.browser.isChromium()||tT.browser.isFirefox()){let t=n.selection.getRng();md.setEditorTimeout(n,()=>{n.selection.setRng(t),n.execCommand("Delete")},0)}else n.execCommand("Delete")})})),r.on("copy",(o=r,t=>{!t.isDefaultPrevented()&&kf(o)&&ku(t,km(o),kc(o),I)})),s=t,d=a,sx(s)&&s.on("dragend dragover draggesture dragdrop drop drag",t=>{t.preventDefault(),t.stopPropagation()}),sk(s)||s.on("drop",t=>{var r;let n=t.dataTransfer;n&&en(n.files,t=>/^image\//.test(t.type))&&t.preventDefault()}),s.on("drop",t=>{if(t.isDefaultPrevented())return;let r=kg(s,t);if(B(r))return;let n=ko(t.dataTransfer),o=ka(n,xH());if((!kl(n)||(t=>{let r=t["text/plain"];return!!r&&0===r.indexOf("file://")})(n))&&ki(s,t,r))return;let a=n[xH()],l=a||n["text/html"]||n["text/plain"],i=((t,r,n,o)=>{let a=t.getParent(n,t=>o3(r,t));if(a&&eP(o,"text/html")){let l=(new DOMParser).parseFromString(o["text/html"],"text/html").body;return!A(l.querySelector(a.nodeName.toLowerCase()))}return!1})(s.dom,s.schema,r.startContainer,n);d.get()&&!i||l&&(t.preventDefault(),md.setEditorTimeout(s,()=>{s.undoManager.transact(()=>{a&&s.execCommand("Delete"),kp(s,r);let t=xK(l);n["text/html"]?kr(s,t,o,!0):kn(s,t,!0)})}))}),s.on("dragstart",t=>{d.set(!0)}),s.on("dragover dragend",t=>{sk(s)&&!d.get()&&(t.preventDefault(),kp(s,kg(s,t))),"dragend"===t.type&&d.set(!1)}),kd(t,i,l)})},ky=t=>or(rc(t)),kC=(t,r)=>{let n=r.getNode();T(n)||t.selection.setCursorLocation(n,r.offset())},k_=(t,r)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=r.textContent)||void 0===n?void 0:n.length)},kx=t8(),kk=kx.browser,kw=kx.os,k8=kk.isSafari(),kE=kw.isMacOS()||kw.isiOS(),kS=(t,r)=>D(t.getParent(r.container(),"details")),kN=(t,r)=>{let n=t.dom.getParent(r.container(),"details");if(n&&!n.open){let o=t.dom.select("summary",n)[0];o&&d7(o).each(r=>kC(t,r))}else kC(t,r)},kR=(t,r,n)=>{var o,a,l,i,s,d,u,c,m;let f=t.selection,g=f.getNode(),p=f.getRng(),h=n.keyCode===cs.BACKSPACE,v=n.keyCode===cs.DELETE,b=t.selection.isCollapsed(),$=lM.fromRangeStart(p),y=t.getBody();return!((b||!((t,r)=>{let n=r.startSummary.exists(r=>r.contains(t.startContainer)),o=r.startSummary.exists(r=>r.contains(t.endContainer)),a=r.startDetails.forall(t=>r.endDetails.forall(r=>t!==r));return(n||o)&&!(n&&o)||a})(p,r))&&!(b&&h&&(o=$,r.startSummary.exists(t=>{var r,n;return r=o,dH(t).exists(t=>t.isEqual(r))})))&&!(b&&v&&(l=$,r.startSummary.exists(t=>{var r,n;return r=l,d7(n=t).exists(t=>nM(t.getNode())&&d4(n,t).exists(t=>t.isEqual(r))||t.isEqual(r))})))&&!(b&&h&&(s=$,(d=r).startDetails.exists(t=>d4(t,s).forall(t=>d.startSummary.exists(r=>!r.contains(s.container())&&r.contains(t.container()))))))&&!(b&&v&&(u=y,c=$,r.startDetails.exists(t=>dj(u,c).forall(r=>!t.contains(r.container())))))&&(!k8||!n4(g)||(!b&&k_(p,g)||fW(v,$,g)?ky(g):t.undoManager.transact(()=>{let r=f.getSel(),{anchorNode:o,anchorOffset:a,focusNode:l,focusOffset:i}=null!=r?r:{},s=()=>{D(o)&&D(a)&&D(l)&&D(i)&&(null==r||r.setBaseAndExtent(o,a,l,i))},d=(t,r)=>{ea(t.childNodes,t=>{u_(t)&&r.appendChild(t)})},u=t.dom.create("span",{"data-mce-bogus":"all"});d(g,u),g.appendChild(u),s(),b&&(kE&&(n.altKey||h&&n.metaKey)||!kE&&n.ctrlKey)&&(null==r||r.modify("extend",h?"left":"right",n.metaKey?"line":"word")),!f.isCollapsed()&&k_(f.getRng(),u)?ky(g):(t.execCommand(h?"Delete":"ForwardDelete"),o=null==r?void 0:r.anchorNode,a=null==r?void 0:r.anchorOffset,l=null==r?void 0:r.focusNode,i=null==r?void 0:r.focusOffset,d(u,g),s()),t.dom.remove(u)}),0)))},kA=t=>{var r;(t=>{t.on("click",r=>{t.dom.getParent(r.target,"details")&&r.preventDefault()})})(t),(r=t).parser.addNodeFilter("details",t=>{let n=sj(r);ea(t,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),r.serializer.addNodeFilter("details",t=>{let n=s4(r);ea(t,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),(t=>{t.on("keydown",r=>{r.keyCode!==cs.BACKSPACE&&r.keyCode!==cs.DELETE||((t,r)=>{let n=Q.from(t.getParent(r.startContainer,"details")),o=Q.from(t.getParent(r.endContainer,"details"));if(n.isSome()||o.isSome()){let a=n.bind(r=>Q.from(t.select("summary",r)[0]));return Q.some({startSummary:a,startDetails:n,endDetails:o})}return Q.none()})(t.dom,t.selection.getRng()).fold(()=>{((t,r)=>{let{dom:n,selection:o}=t,a=t.getBody();if(t.selection.isCollapsed()){let l=lM.fromRangeStart(o.getRng()),i=n.getParent(l.container(),n.isBlock);if(i&&n.isEmpty(i)){if(A(i.nextSibling)){let s=d4(a,l).filter(t=>kS(n,t));if(s.isSome())return s.each(n=>{r||kN(t,n)}),!0}else if(A(i.previousSibling)&&dj(a,l).filter(t=>kS(n,t)))return!0}return d1(r,a,l).fold(Y,o=>!!kS(n,o)&&(i&&n.isEmpty(i)&&t.dom.remove(i),r||kN(t,o),!0))}return!1})(t,r.keyCode===cs.DELETE)&&r.preventDefault()},n=>{kR(t,n,r)&&r.preventDefault()})})})(t)},kO=nM,kT=nO,kB=t=>n0(t.dom),kD=t=>r=>rh(rc(t),r),kL=(t,r)=>rz(rc(t),kB,kD(r)),kP=(t,r,n)=>{let o=new ny(t,r),a=n?o.next.bind(o):o.prev.bind(o),l=t;for(let i=n?t:a();i&&!kO(i);i=a())o8(i)&&(l=i);return l},kM=t=>{let r=((t,r)=>{var n,o;let a=lM.fromRangeStart(t).getNode(),l=(n=a,o=r,rz(rc(n),t=>{var r;return nF(t.dom)||nV(t)},kD(o)).getOr(rc(o)).dom),i=kP(a,l,!1),s=kP(a,l,!0),d=document.createRange();return kL(i,l).fold(()=>{kT(i)?d.setStart(i,0):d.setStartBefore(i)},t=>d.setStartBefore(t.dom)),kL(s,l).fold(()=>{kT(s)?d.setEnd(s,s.data.length):d.setEndAfter(s)},t=>d.setEndAfter(t.dom)),d})(t.selection.getRng(),t.getBody());t.selection.setRng(gB(r))};(i=f||(f={})).Before="before",i.After="after";let kI=(t,r)=>Math.abs(t.left-r),kF=(t,r)=>Math.abs(t.right-r),k0=(t,r)=>{var n;return(n=es(t,t=>{var n,o;return(n=r)>=(o=t).top&&n<=o.bottom}),eu(n,(t,r)=>t.fold(()=>Q.some(r),t=>{let n=Math.min(r.left,t.left),o=Math.min(r.top,t.top),a=Math.max(r.right,t.right),l=Math.max(r.bottom,t.bottom);return Q.some({top:o,right:a,bottom:l,left:n,width:a-n,height:l-o})}),Q.none())).fold(()=>[[],t],r=>{let{pass:n,fail:o}=ei(t,t=>((t,r)=>{var n,o,a,l;let i=(n=t,o=r,Math.max(0,Math.min(n.bottom,o.bottom)-Math.max(n.top,o.top))/Math.min(t.height,r.height));return a=t,l=r,a.top<l.bottom&&a.bottom>l.top&&i>.5})(t,r));return[n,o]})},kU=(t,r,n)=>r>t.left&&r<t.right?0:Math.min(Math.abs(t.left-r),Math.abs(t.right-r)),k1=(t,r,n)=>{let o=t=>o8(t.node)?Q.some(t):nx(t.node)?k1(ek(t.node.childNodes),r,n):Q.none(),a=(t,a)=>{let l=ey(t,(t,o)=>a(t,r,n)-a(o,r,n));return((t,a)=>{if(t.length>=2){let l=o(t[0]).getOr(t[0]),i=o(t[1]).getOr(t[1]);if(2>Math.abs(a(l,r,n)-a(i,r,n))){if(nO(l.node))return Q.some(l);if(nO(i.node))return Q.some(i)}}return Q.none()})(l,a).orThunk(()=>ew(l,o))},[l,i]=k0($2(t),n),{pass:s,fail:d}=ei(i,t=>t.top<n);return a(l,kU).orThunk(()=>a(d,lv)).orThunk(()=>a(s,lv))},kz=(t,r,n)=>((t,r,n)=>{let o=rc(t),a=r$(o),l=rm(a,r,n).filter(t=>rv(o,t)).getOr(o);return((t,r,n,o)=>{let a=(r,l)=>{let i=es(r.dom.childNodes,q(t=>nx(t)&&t.classList.contains("mce-drag-container")));return l.fold(()=>k1(i,n,o),t=>{let r=es(i,r=>r!==t.dom);return k1(r,n,o)}).orThunk(()=>(rh(r,t)?Q.none():r_(r)).bind(t=>a(t,Q.some(r))))};return a(r,Q.none())})(o,l,r,n)})(t,r,n).filter(t=>sZ(t.node)).map(t=>{var n,o;return n=t,o=r,{node:n.node,position:kI(n,o)<kF(n,o)?f.Before:f.After}}),k6=t=>{var r,n;let o=t.getBoundingClientRect(),a=t.ownerDocument,l=a.documentElement,i=a.defaultView;return{top:o.top+(null!==(r=null==i?void 0:i.scrollY)&&void 0!==r?r:0)-l.clientTop,left:o.left+(null!==(n=null==i?void 0:i.scrollX)&&void 0!==n?n:0)-l.clientLeft}},kj=t=>({target:t,srcElement:t}),k4=(t,r,n,o)=>{var a,l,i,s;let d=((t,r)=>{let n=(t=>{var r,n,o;let a=x6(),l=(r=t,Q.from(r[xB]));return xM(t),xN(a),a.dropEffect=t.dropEffect,a.effectAllowed=t.effectAllowed,(n=t,Q.from(n[x8])).each(t=>a.setDragImage(t.image,t.x,t.y)),ea(t.types,r=>{"Files"!==r&&a.setData(r,t.getData(r))}),ea(t.files,t=>a.items.add(t)),(o=t,Q.from(o[xE])).each(t=>{((t,r)=>{xS(r)(t)})(a,t)}),l.each(r=>{xL(t,r),xL(a,r)}),a})(t);return"dragstart"===r?(xN(n),xP(n)):"drop"===r?(xR(n),xM(n)):(xA(n),xI(n)),n})(n,t);return T(o)?((t,r,n)=>{let o=W("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:t,composedPath:o,initEvent:o,preventDefault:I,stopImmediatePropagation:I,stopPropagation:I,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:n,...kj(r)}})(t,r,d):(a=t,l=o,i=r,s=d,{...l,dataTransfer:s,type:a,...kj(i)})},kH=n0,k7=((...t)=>r=>{for(let n=0;n<t.length;n++)if(t[n](r))return!0;return!1})(kH,nF),k3=(t,r,n,o)=>{let a=t.dom,l=r.cloneNode(!0);a.setStyles(l,{width:n,height:o}),a.setAttrib(l,"data-mce-selected",null);let i=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),a.setStyles(l,{margin:0,boxSizing:"border-box"}),i.appendChild(l),i},k9=(t,r)=>n=>()=>{let o="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:o+r,behavior:"smooth"})},k2=k9("left",-32),k5=k9("left",32),kV=k9("top",-32),kq=k9("top",32),kW=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},kK=(t,r,n,o,a)=>{"dragstart"===r&&xj(o,t.dom.getOuterHTML(n));let l=k4(r,n,o,a);return t.dispatch(r,l)},kG=(t,r)=>{let n=aV((t,n)=>{var o,a,l;return o=r,a=t,l=n,void(o._selectionOverrides.hideFakeCaret(),kz(o.getBody(),a,l).fold(()=>o.selection.placeCaretAt(a,l),t=>{let r=o._selectionOverrides.showCaret(1,t.node,t.position===f.Before,!1);r?o.selection.setRng(r):o.selection.placeCaretAt(a,l)}))},0);r.on("remove",n.cancel);let o=t;return a=>t.on(t=>{var l,i,s,d,u,c,m,f,g,p;let h=Math.max(Math.abs(a.screenX-t.screenX),Math.abs(a.screenY-t.screenY));if(!t.dragging&&h>10){let v=kK(r,"dragstart",t.element,t.dataTransfer,a);if(D(v.dataTransfer)&&(t.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;t.dragging=!0,r.focus()}if(t.dragging){let b=a.currentTarget===r.getDoc().documentElement,$=(g=t,{pageX:(p=(s=r,d=a,u=(f=s).inline?k6(f.getBody()):{left:0,top:0},c=(t=>{let r=t.getBody();return t.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:0,top:0}})(s),{pageX:(m=((t,r)=>{if(r.target.ownerDocument!==t.getDoc()){let n=k6(t.getContentAreaContainer()),o=(t=>{let r=t.getBody(),n=t.getDoc().documentElement,o={left:r.scrollLeft,top:r.scrollTop},a={left:r.scrollLeft||n.scrollLeft,top:r.scrollTop||n.scrollTop};return t.inline?o:a})(t);return{left:r.pageX-n.left+o.left,top:r.pageY-n.top+o.top}}return{left:r.pageX,top:r.pageY}})(s,d)).left-u.left+c.left,pageY:m.top-u.top+c.top})).pageX-g.relX,pageY:p.pageY+5});l=t.ghost,i=r.getBody(),l.parentNode!==i&&i.appendChild(l),((t,r,n,o,a,l,i,s,d,u,c,m)=>{let f=0,g=0;t.style.left=r.pageX+"px",t.style.top=r.pageY+"px",r.pageX+n>a&&(f=r.pageX+n-a),r.pageY+o>l&&(g=r.pageY+o-l),t.style.width=n-f+"px",t.style.height=o-g+"px";let p=d.clientHeight,h=d.clientWidth,v=i+d.getBoundingClientRect().top,b=s+d.getBoundingClientRect().left;c.on(t=>{t.intervalId.clear(),t.dragging&&m&&(i+8>=p?t.intervalId.set(kq(u)):i-8<=0?t.intervalId.set(kV(u)):s+8>=h?t.intervalId.set(k5(u)):s-8<=0?t.intervalId.set(k2(u)):v+16>=window.innerHeight?t.intervalId.set(kq(window)):v-16<=0?t.intervalId.set(kV(window)):b+16>=window.innerWidth?t.intervalId.set(k5(window)):b-16<=0&&t.intervalId.set(k2(window)))})})(t.ghost,$,t.width,t.height,t.maxX,t.maxY,a.clientY,a.clientX,r.getContentAreaContainer(),r.getWin(),o,b),n.throttle(a.clientX,a.clientY)}})},kY=(t,r,n)=>{t.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>kK(r,"dragend",t.element,t.dataTransfer),n=>kK(r,"dragend",t.element,t.dataTransfer,n))}),kX(t)},kX=t=>{t.on(t=>{t.intervalId.clear(),kW(t.ghost)}),t.clear()},kQ=t=>{var r,n,o,a,l,i;let s=a5(),d=a1.DOM,u=document,c=(r=s,n=t,t=>{var o,a,l,i;if(0===t.button){let s=em(n.dom.getParents(t.target),k7).getOr(null);if(D(s)&&(a=n.dom,l=n.getBody(),i=s,kH(i)&&i!==l&&a.isEditable(i.parentElement))){let d=n.dom.getPos(s),u=n.getBody(),c=n.getDoc().documentElement;r.set({element:s,dataTransfer:x6(),dragging:!1,screenX:t.screenX,screenY:t.screenY,maxX:(n.inline?u.scrollWidth:c.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:c.offsetHeight)-2,relX:t.pageX-d.x,relY:t.pageY-d.y,width:s.offsetWidth,height:s.offsetHeight,ghost:k3(n,s,s.offsetWidth,s.offsetHeight),intervalId:a2(100)})}}}),m=kG(s,t),f=(o=s,a=t,t=>{o.on(r=>{var n,o,l,i;if(r.intervalId.clear(),r.dragging){if(o=a,l=(t=>{let r=t.getSel();if(D(r)){let n=r.getRangeAt(0).startContainer;return nO(n)?n.parentNode:n}return null})(a.selection),i=r.element,!B(l)&&l!==i&&!o.dom.isChildOf(l,i)&&o.dom.isEditable(l)){let s=null!==(n=a.getDoc().elementFromPoint(t.clientX,t.clientY))&&void 0!==n?n:a.getBody();kK(a,"drop",s,r.dataTransfer,t).isDefaultPrevented()||a.undoManager.transact(()=>{((t,r)=>{let n=t.getParent(r.parentNode,t.isBlock);kW(r),n&&n!==t.getRoot()&&t.isEmpty(n)&&or(rc(n))})(a.dom,r.element),(t=>{let r=t.getData("text/html");return""===r?Q.none():Q.some(r)})(r.dataTransfer).each(t=>a.insertContent(t)),a._selectionOverrides.hideFakeCaret()})}kK(a,"dragend",a.getBody(),r.dataTransfer,t)}}),kX(o)}),g=(l=s,i=t,t=>kY(l,i,Q.some(t)));t.on("mousedown",c),t.on("mousemove",m),t.on("mouseup",f),d.bind(u,"mousemove",m),d.bind(u,"mouseup",g),t.on("remove",()=>{d.unbind(u,"mousemove",m),d.unbind(u,"mouseup",g)}),t.on("keydown",r=>{r.keyCode===cs.ESC&&kY(s,t,Q.none())})},kJ=n0,kZ=(t,r)=>gy(t.getBody(),r),we=t=>{var r;let n=t.selection,o=t.dom,a=t.getBody(),l=sX(t,a,o.isBlock,()=>m$(t)),i="sel-"+o.uniqueId(),s="data-mce-selected",d,u=t=>t!==a&&(kJ(t)||nz(t))&&o.isChildOf(t,a)&&o.isEditable(t.parentNode),c=(r,o,a,i=!0)=>t.dispatch("ShowCaret",{target:o,direction:r,before:a}).isDefaultPrevented()?null:(i&&n.scrollIntoView(o,-1===r),l.show(a,o)),m=t=>ou(t)||og(t)||op(t),g=t=>m(t.startContainer)||m(t.endContainer),p=r=>{let n=t.schema.getVoidElements(),a=o.createRng(),l=r.startContainer,i=r.startOffset,s=r.endContainer,d=r.endOffset;return eP(n,l.nodeName.toLowerCase())?0===i?a.setStartBefore(l):a.setStartAfter(l):a.setStart(l,i),eP(n,s.nodeName.toLowerCase())?0===d?a.setEndBefore(s):a.setEndAfter(s):a.setEnd(s,d),a},h=(r,l)=>{if(!r)return null;if(r.collapsed){if(!g(r)){let m=l?1:-1,f=dk(m,a,r),p=f.getNode(!l);if(D(p)){if(sZ(p))return c(m,p,!!l&&!f.isAtEnd(),!1);if(od(p)&&n0(p.nextSibling)){let h=o.createRng();return h.setStart(p,0),h.setEnd(p,0),h}}let v=f.getNode(l);if(D(v)){if(sZ(v))return c(m,v,!l&&!f.isAtEnd(),!1);if(od(v)&&n0(v.previousSibling)){let $=o.createRng();return $.setStart(v,1),$.setEnd(v,1),$}}}return null}let y=r.startContainer,C=r.startOffset,_=r.endOffset;if(nO(y)&&0===C&&kJ(y.parentNode)&&(y=y.parentNode,C=o.nodeIndex(y),y=y.parentNode),!nx(y))return null;if(_===C+1&&y===r.endContainer){let x=y.childNodes[C];if(u(x))return(r=>{let a=r.cloneNode(!0),l=t.dispatch("ObjectSelected",{target:r,targetClone:a});if(l.isDefaultPrevented())return null;let u=((r,a)=>{let l=rc(t.getBody()),s=t.getDoc(),d=rj(l,"#"+i).getOrThunk(()=>{let t=rs('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',s);return tq(t,"id",i),rJ(l,t),t}),u=o.createRng();nt(d),ne(d,[ru("\xa0",s),rc(a),ru("\xa0",s)]),u.setStart(d.dom.firstChild,1),u.setEnd(d.dom.lastChild,0),r5(d,{top:o.getPos(r,t.getBody()).y+"px"}),cQ(d);let c=n.getSel();return c&&(c.removeAllRanges(),c.addRange(u)),u})(r,l.targetClone),c=rc(r);return ea(nb(rc(t.getBody()),`*[${s}]`),t=>{rh(c,t)||tX(t,s)}),o.getAttrib(r,s)||r.setAttribute(s,"1"),d=r,b(),u})(x)}return null},v=()=>{d&&d.removeAttribute(s),rj(rc(t.getBody()),"#"+i).each(nr),d=null},b=()=>{l.hide()};return vD(t)||(t.on("click",r=>{o.isEditable(r.target)||(r.preventDefault(),t.focus())}),t.on("blur NewBlock",v),t.on("ResizeWindow FullscreenStateChanged",l.reposition),t.on("tap",r=>{let n=r.target,o=kZ(t,n);kJ(o)?(r.preventDefault(),bV(t,o).each(h)):u(n)&&bV(t,n).each(h)},!0),t.on("mousedown",r=>{let l=r.target;if(l!==a&&"HTML"!==l.nodeName&&!o.isChildOf(l,a)||!((t,r,n)=>{let o=rc(t.getBody()),a=t.inline?o:rc(r$(o).dom.documentElement),l=((t,r,n,o)=>{var a;let l=r.dom.getBoundingClientRect();return{x:n-(t?l.left+r.dom.clientLeft+bo(r):0),y:o-(t?l.top+r.dom.clientTop+bn(r):0)}})(t.inline,a,r,n);return((t,r,n)=>{let o=bt(t),a=br(t);return r>=0&&n>=0&&r<=o&&n<=a})(a,l.x,l.y)})(t,r.clientX,r.clientY))return;v(),b();let i=kZ(t,l);kJ(i)?(r.preventDefault(),bV(t,i).each(h)):kz(a,r.clientX,r.clientY).each(o=>{var a;r.preventDefault(),(a=c(1,o.node,o.position===f.Before,!1))&&n.setRng(a),nx(i)?i.focus():t.getBody().focus()})}),t.on("keypress",t=>{cs.modifierPressed(t)||kJ(n.getNode())&&t.preventDefault()}),t.on("GetSelectionRange",t=>{let r=t.range;if(d){if(!d.parentNode)return void(d=null);(r=r.cloneRange()).selectNode(d),t.range=r}}),t.on("SetSelectionRange",t=>{t.range=p(t.range);let r=h(t.range,t.forward);r&&(t.range=r)}),t.on("AfterSetSelectionRange",t=>{var r,n;let a=t.range,l=a.startContainer.parentElement;g(a)||nx(r=l)&&"mcepastebin"===r.id||b(),D(n=l)&&o.hasClass(n,"mce-offscreen-selection")||v()}),r=t,kQ(r),sm(r)&&(t=>{let r=r=>{if(!r.isDefaultPrevented()){let n=r.dataTransfer;n&&(er(n.types,"Files")||n.files.length>0)&&(r.preventDefault(),"drop"===r.type&&bu(t,"Dropped file type is not supported"))}},n=n=>{mf(t,n.target)&&r(n)},o=()=>{let o=a1.DOM,a=t.dom,l=document,i=t.inline?t.getBody():t.getDoc(),s=["drop","dragover"];ea(s,t=>{o.bind(l,t,n),a.bind(i,t,r)}),t.on("remove",()=>{ea(s,t=>{o.unbind(l,t,n),a.unbind(i,t,r)})})};t.on("init",()=>{md.setEditorTimeout(t,o,0)})})(r),(t=>{let r=aV(()=>{if(!t.removed&&t.getBody().contains(document.activeElement)){let r=t.selection.getRng();if(r.collapsed){let n=bq(t,r,!1);t.selection.setRng(n)}}},0);t.on("focus",()=>{r.throttle()}),t.on("blur",()=>{r.cancel()})})(t),(t=>{t.on("init",()=>{t.on("focusin",r=>{let n=r.target;if(nz(n)){let o=gy(t.getBody(),n),a=n0(o)?o:n;t.selection.getNode()!==a&&bV(t,a).each(r=>t.selection.setRng(r))}})})})(t)),{showCaret:c,showBlockCaretContainer(t){t.hasAttribute("data-mce-caret")&&(oh(t),n.scrollIntoView(t))},hideFakeCaret:b,destroy(){l.destroy(),d=null}}},wt=(t,r)=>{let n=r;for(let o=t.previousSibling;nO(o);o=o.previousSibling)n+=o.data.length;return n},wr=(t,r,n,o,a)=>{if(nO(n)&&(o<0||o>n.data.length))return[];let l=a&&nO(n)?[wt(n,o)]:[o],i=n;for(;i!==r&&i.parentNode;)l.push(t.nodeIndex(i,a)),i=i.parentNode;return i===r?l.reverse():[]},wn=(t,r,n,o,a,l,i=!1)=>({start:wr(t,r,n,o,i),end:wr(t,r,a,l,i)}),wo=(t,r)=>{let n=r.slice(),o=n.pop();return P(o)?eu(n,(t,r)=>t.bind(t=>Q.from(t.childNodes[r])),Q.some(t)).bind(t=>nO(t)&&(o<0||o>t.data.length)?Q.none():Q.some({node:t,offset:o})):Q.none()},wa=(t,r)=>wo(t,r.start).bind(({node:n,offset:o})=>wo(t,r.end).map(({node:t,offset:r})=>{let a=document.createRange();return a.setStart(n,o),a.setEnd(t,r),a})),wl=(t,r,n)=>{if(r&&t.isEmpty(r)&&!n(r)){let o=r.parentNode;t.remove(r),wl(t,o,n)}},wi=(t,r,n,o=!0)=>{let a=r.startContainer.parentNode,l=r.endContainer.parentNode;r.deleteContents(),o&&!n(r.startContainer)&&(nO(r.startContainer)&&0===r.startContainer.data.length&&t.remove(r.startContainer),nO(r.endContainer)&&0===r.endContainer.data.length&&t.remove(r.endContainer),wl(t,a,n),a!==l&&wl(t,l,n))},ws=(t,r)=>Q.from(t.dom.getParent(r.startContainer,t.dom.isBlock)),wd=(t,r,n)=>{let o=t.dynamicPatternsLookup({text:n,block:r});return{...t,blockPatterns:io(o).concat(t.blockPatterns),inlinePatterns:ia(o).concat(t.inlinePatterns)}},wu=(t,r,n,o)=>{let a=t.createRng();return a.setStart(r,0),a.setEnd(n,o),a.toString()},wc=(t,r,n)=>{((t,r,n)=>{if(nO(t)&&0>=t.length)return Q.some(Cx(t,0));{let o=lu(Ck);return Q.from(o.forwards(t,0,Cw(t),n)).map(t=>Cx(t.container,0))}})(r,0,r).each(o=>{var a,l;let i=o.container;CS(i,n.start.length,r).each(n=>{let o=t.createRng();o.setStart(i,0),o.setEnd(n.container,n.offset),wi(t,o,t=>t===r)});let s=rc(i),d=n3(s);/^\s[^\s]/.test(d)&&(a=s,l=d.slice(1),n7.set(a,l))})},wm=(t,r)=>t.create("span",{"data-mce-type":"bookmark",id:r}),wf=(t,r)=>{let n=t.createRng();return n.setStartAfter(r.start),n.setEndBefore(r.end),n},wg=(t,r,n)=>{let o=wa(t.getRoot(),n).getOrDie("Unable to resolve path range"),a=o.startContainer,l=o.endContainer,i=0===o.endOffset?l:l.splitText(o.endOffset),s=0===o.startOffset?a:a.splitText(o.startOffset),d=s.parentNode;return{prefix:r,end:i.parentNode.insertBefore(wm(t,r+"-end"),i),start:d.insertBefore(wm(t,r+"-start"),s)}},wp=(t,r,n)=>{wl(t,t.get(r.prefix+"-end"),n),wl(t,t.get(r.prefix+"-start"),n)},wh=t=>0===t.start.length,wv=(t,r,n,o)=>{var a;let l=r.start;return CN(t,o.container,o.offset,(a=l,(t,r)=>{let n=t.data.substring(0,r),o=n.lastIndexOf(a.charAt(a.length-1)),l=n.lastIndexOf(a);return -1!==l?l+a.length:-1!==o?o+1:-1}),n).bind(o=>{var a,i;let s=null!==(i=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(l))&&void 0!==i?i:-1;if(-1!==s&&o.offset>=s+l.length){let d=t.createRng();return d.setStart(o.container,o.offset-l.length),d.setEnd(o.container,o.offset),Q.some(d)}{let u=o.offset-l.length;return CE(o.container,u,n).map(r=>{let n=t.createRng();return n.setStart(r.container,r.offset),n.setEnd(o.container,o.offset),n}).filter(t=>t.toString()===l).orThunk(()=>wv(t,r,n,Cx(o.container,0)))}})},wb=(t,r,n,o)=>{let a=t.dom,l=a.getRoot(),i=n.pattern,s=n.position.container,d=n.position.offset;return CE(s,d-n.pattern.end.length,r).bind(u=>{let c=wn(a,l,u.container,u.offset,s,d,o);if(wh(i))return Q.some({matches:[{pattern:i,startRng:c,endRng:c}],position:u});{let m=w$(t,n.remainingPatterns,u.container,u.offset,r,o),f=m.getOr({matches:[],position:u}),g=f.position,p=((t,r,n,o,a,l=!1)=>{if(0===r.start.length&&!l){let i=t.createRng();return i.setStart(n,o),i.setEnd(n,o),Q.some(i)}return C8(n,o,a).bind(n=>wv(t,r,a,n).bind(t=>{var r;return l&&(t.endContainer===n.container&&t.endOffset===n.offset||0===n.offset&&(null===(r=t.endContainer.textContent)||void 0===r?void 0:r.length)===t.endOffset)?Q.none():Q.some(t)}))})(a,i,g.container,g.offset,r,m.isNone());return p.map(t=>{let r=((t,r,n,o=!1)=>wn(t,r,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o))(a,l,t,o);return{matches:f.matches.concat([{pattern:i,startRng:r,endRng:c}]),position:Cx(t.startContainer,t.startOffset)}})}})},w$=(t,r,n,o,a,l)=>{let i=t.dom;return C8(n,o,i.getRoot()).bind(s=>{let d=wu(i,a,n,o);for(let u=0;u<r.length;u++){let c=r[u];if(!eK(d,c.end))continue;let m=r.slice();m.splice(u,1);let f=wb(t,a,{pattern:c,remainingPatterns:m,position:s},l);if(f.isNone()&&o>0)return w$(t,r,n,o-1,a,l);if(f.isSome())return f}return Q.none()})},wy=(t,r,n)=>{t.selection.setRng(n),"inline-format"===r.type?ea(r.format,r=>{t.formatter.apply(r)}):t.execCommand(r.cmd,!1,r.value)},wC=(t,r,n,o,a,l)=>{var i;return((t,r)=>{let n=eh(t,t=>en(r,r=>t.pattern.start===r.pattern.start&&t.pattern.end===r.pattern.end));return t.length===r.length?n?t:r:t.length>r.length?t:r})(w$(t,a.inlinePatterns,n,o,r,l).fold(()=>[],t=>t.matches),w$(t,ey(i=a.inlinePatterns,(t,r)=>r.end.length-t.end.length),n,o,r,l).fold(()=>[],t=>t.matches))},w_=(t,r)=>{if(0===r.length)return;let n=t.dom,o=t.selection.getBookmark(),a=((t,r)=>{let n=lo("mce_textpattern"),o=ed(r,(r,o)=>{let a=wg(t,n+`_end${r.length}`,o.endRng);return r.concat([{...o,endMarker:a}])},[]);return ed(o,(r,a)=>{let l=o.length-r.length-1,i=wh(a.pattern)?a.endMarker:wg(t,n+`_start${l}`,a.startRng);return r.concat([{...a,startMarker:i}])},[])})(n,r);ea(a,r=>{let o=n.getParent(r.startMarker.start,n.isBlock),a=t=>t===o;wh(r.pattern)?((t,r,n,o)=>{let a=wf(t.dom,n);wi(t.dom,a,o),wy(t,r,a)})(t,r.pattern,r.endMarker,a):((t,r,n,o,a)=>{let l=t.dom,i=wf(l,o),s=wf(l,n);wi(l,s,a),wi(l,i,a);let d={prefix:n.prefix,start:n.end,end:o.start},u=wf(l,d);wy(t,r,u)})(t,r.pattern,r.startMarker,r.endMarker,a),wp(n,r.endMarker,a),wp(n,r.startMarker,a)}),t.selection.moveToBookmark(o)},wx=(t,r)=>{let n=t.selection.getRng();return ws(t,n).map(o=>{var a;let l=Math.max(0,n.startOffset),i=wd(r,o,null!==(a=o.textContent)&&void 0!==a?a:""),s=wC(t,o,n.startContainer,l,i,!0),d=((t,r,n,o)=>{var a;let l=t.dom,i=i_(t);if(!l.is(r,i))return[];let s=null!==(a=r.textContent)&&void 0!==a?a:"";return((t,r)=>{var n;let o=(n=t,ey(n,(t,r)=>r.start.length-t.start.length)),a=r.replace("\xa0"," ");return em(o,t=>0===r.indexOf(t.start)||0===a.indexOf(t.start))})(n.blockPatterns,s).map(t=>tP.trim(s).length===t.start.length?[]:[{pattern:t,range:wn(l,l.getRoot(),r,0,r,0,!0)}]).getOr([])})(t,o,i);return(d.length>0||s.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\uFEFF"),w_(t,s),((t,r)=>{if(0===r.length)return;let n=t.selection.getBookmark();ea(r,r=>((t,r)=>{let n=t.dom,o=r.pattern,a=wa(n.getRoot(),r.range).getOrDie("Unable to resolve path range");return ws(t,a).each(r=>{"block-format"===o.type?((t,r)=>{let n=r.get(t);return R(n)&&e_(n).exists(t=>eP(t,"block"))})(o.format,t.formatter)&&t.undoManager.transact(()=>{wc(t.dom,r,o),t.formatter.apply(o.format)}):"block-command"===o.type&&t.undoManager.transact(()=>{wc(t.dom,r,o),t.execCommand(o.cmd,!1,o.value)})}),!0})(t,r)),t.selection.moveToBookmark(n)})(t,d);let r=t.selection.getRng(),n=C8(r.startContainer,r.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),n.each(r=>{let n=r.container;"\uFEFF"===n.data.charAt(r.offset-1)&&(n.deleteData(r.offset-1,1),wl(t.dom,n.parentNode,r=>r===t.dom.getRoot()))})}),!0)}).getOr(!1)},wk=(t,r,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],r))return!0;return!1},ww=t=>{let r=tP.each,n=cs.BACKSPACE,o=cs.DELETE,a=t.dom,l=t.selection,i=t.parser,s=tT.browser,d=s.isFirefox(),u=s.isChromium()||s.isSafari(),c=tT.deviceType.isiPhone()||tT.deviceType.isiPad(),m=tT.os.isMacOS()||tT.os.isiOS(),f=(r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(o){}},g=t=>t.isDefaultPrevented(),p=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||a.bind(t.getDoc(),"mousedown mouseup",r=>{let n;if(r.target===t.getDoc().documentElement){if(n=l.getRng(),t.getBody().focus(),"mousedown"===r.type){if(ou(n.startContainer))return;l.placeCaretAt(r.clientX,r.clientY)}else l.setRng(n)}})},v=()=>{Range.prototype.getClientRects||t.on("mousedown",r=>{if(!g(r)&&"HTML"===r.target.nodeName){let n=t.getBody();n.blur(),md.setEditorTimeout(t,()=>{n.focus()})}})},b=()=>{let r=sp(t);t.on("click",n=>{let o=n.target;/^(IMG|HR)$/.test(o.nodeName)&&a.isEditable(o.parentNode)&&(n.preventDefault(),t.selection.select(o),t.nodeChanged()),"A"===o.nodeName&&a.hasClass(o,r)&&0===o.childNodes.length&&a.isEditable(o.parentNode)&&(n.preventDefault(),l.select(o))})},$=()=>{t.on("keydown",t=>{if(!g(t)&&t.keyCode===n&&l.isCollapsed()&&0===l.getRng().startOffset){let r=l.getNode().previousSibling;if(r&&r.nodeName&&"table"===r.nodeName.toLowerCase())return t.preventDefault(),!1}return!0})},y=()=>{si(t)||t.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),i7(t)||f("enableObjectResizing",!1)})},C=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},_=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",r=>{let n;"HTML"===r.target.nodeName&&(n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged())}))},k=()=>{m&&t.on("keydown",r=>{!cs.metaKeyPressed(r)||r.shiftKey||37!==r.keyCode&&39!==r.keyCode||(r.preventDefault(),t.selection.getSel().modify("move",37===r.keyCode?"backward":"forward","lineboundary"))})},w=()=>{t.on("click",t=>{let r=t.target;do if("A"===r.tagName)return void t.preventDefault();while(r=r.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},S=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",t=>{t.preventDefault()})})};return vD(t)?(u&&(h(),b(),S(),p(),c&&(_(),x(),w())),d&&(v(),y(),C(),k())):(t.on("keydown",r=>{if(g(r)||r.keyCode!==cs.BACKSPACE)return;let n=l.getRng(),o=n.startContainer,i=n.startOffset,s=a.getRoot(),d=o;if(n.collapsed&&0===i){for(;d.parentNode&&d.parentNode.firstChild===d&&d.parentNode!==s;)d=d.parentNode;"BLOCKQUOTE"===d.nodeName&&(t.formatter.toggle("blockquote",void 0,d),(n=a.createRng()).setStart(o,0),n.setEnd(o,0),l.setRng(n))}}),(()=>{let r=t=>{let r=a.create("body"),n=t.cloneContents();return r.appendChild(n),l.serializer.serialize(r,{format:"html"})};t.on("keydown",l=>{let i=l.keyCode;if(!g(l)&&(i===o||i===n)&&t.selection.isEditable()){let s=t.selection.isCollapsed(),d=t.getBody();if(s&&!a.isEmpty(d)||!s&&!(n=>{let o=r(n),l=a.createRng();return l.selectNode(t.getBody()),o===r(l)})(t.selection.getRng()))return;l.preventDefault(),t.setContent(""),d.firstChild&&a.isBlock(d.firstChild)?t.selection.setCursorLocation(d.firstChild,0):t.selection.setCursorLocation(d,0),t.nodeChanged()}})})(),tT.windowsPhone||t.on("keyup focusin mouseup",r=>{cs.modifierPressed(r)||(t=>{let r=t.getBody(),n=t.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===r&&0===n.startOffset&&n.endOffset===r.childNodes.length})(t)||l.normalize()},!0),u&&(h(),b(),t.on("init",()=>{f("DefaultParagraphSeparator",i_(t))}),S(),$(),i.addNodeFilter("br",t=>{let r=t.length;for(;r--;)"Apple-interchange-newline"===t[r].attr("class")&&t[r].remove()}),c?(_(),x(),w()):p()),d&&(t.on("keydown",r=>{if(!g(r)&&r.keyCode===n&&t.getBody().getElementsByTagName("hr").length&&l.isCollapsed()&&0===l.getRng().startOffset){let o=l.getNode(),i=o.previousSibling;if("HR"===o.nodeName)return a.remove(o),void r.preventDefault();i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(a.remove(i),r.preventDefault())}}),v(),(()=>{let n=()=>{let n=a.getAttribs(l.getStart().cloneNode(!1));return()=>{let o=l.getStart();o!==t.getBody()&&(a.setAttrib(o,"style",null),r(n,t=>{o.setAttributeNode(t.cloneNode(!0))}))}},o=()=>!l.isCollapsed()&&a.getParent(l.getStart(),a.isBlock)!==a.getParent(l.getEnd(),a.isBlock);t.on("keypress",r=>{let a;return!(!(g(r)||8!==r.keyCode&&46!==r.keyCode)&&o()&&(a=n(),t.getDoc().execCommand("delete",!1),a(),r.preventDefault(),1))}),a.bind(t.getDoc(),"cut",r=>{if(!g(r)&&o()){let a=n();md.setEditorTimeout(t,()=>{a()})}})})(),y(),t.on("SetContent ExecCommand",t=>{"setcontent"!==t.type&&"mceInsertLink"!==t.command||r(a.select("a:not([data-mce-block])"),t=>{var r;let n=t.parentNode,o=a.getRoot();if((null==n?void 0:n.lastChild)===t){for(;n&&!a.isBlock(n);){if((null===(r=n.parentNode)||void 0===r?void 0:r.lastChild)!==n||n===o)return;n=n.parentNode}a.add(n,"br",{"data-mce-bogus":1})}})}),C(),k(),$(),t.on("drop",r=>{var n;let o=null===(n=r.dataTransfer)||void 0===n?void 0:n.getData("text/html");E(o)&&/^<img[^>]*>$/.test(o)&&t.dispatch("dragend",new window.DragEvent("dragend",r))}))),{refreshContentEditable:I,isHidden(){if(!d||t.removed)return!1;let r=t.selection.getSel();return!r||!r.rangeCount||0===r.rangeCount}}},w8=a1.DOM,wE=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,wS=t=>eT(t,t=>!1===T(t)),wN=t=>{let r=t.options.get,n=t.editorUpload.blobCache;return wS({allow_conditional_comments:r("allow_conditional_comments"),allow_html_data_urls:r("allow_html_data_urls"),allow_svg_data_urls:r("allow_svg_data_urls"),allow_html_in_named_anchor:r("allow_html_in_named_anchor"),allow_script_urls:r("allow_script_urls"),allow_unsafe_link_target:r("allow_unsafe_link_target"),convert_fonts_to_spans:r("convert_fonts_to_spans"),fix_list_elements:r("fix_list_elements"),font_size_legacy_values:r("font_size_legacy_values"),forced_root_block:r("forced_root_block"),forced_root_block_attrs:r("forced_root_block_attrs"),preserve_cdata:r("preserve_cdata"),inline_styles:r("inline_styles"),root_name:wE(t),sanitize:r("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},wR=t=>{let r=t.options.get;return wS({custom_elements:r("custom_elements"),extended_valid_elements:r("extended_valid_elements"),invalid_elements:r("invalid_elements"),invalid_styles:r("invalid_styles"),schema:r("schema"),valid_children:r("valid_children"),valid_classes:r("valid_classes"),valid_elements:r("valid_elements"),valid_styles:r("valid_styles"),verify_html:r("verify_html"),padd_empty_block_inline_children:r("format_empty_lines")})},wA=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,wO=t=>{let r=wA(t),n=ij(t),o=t.contentCSS,a=()=>{r.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},l=()=>{t.removed?a():t.on("remove",a)};if(t.contentStyles.length>0){let i="";tP.each(t.contentStyles,t=>{i+=t+"\r\n"}),t.dom.addStyle(i)}let s=Promise.all(((t,r,n)=>{let o=[wA(t).loadAll(r)];return t.inline?o:o.concat([t.ui.styleSheetLoader.loadAll(n)])})(t,o,n)).then(l).catch(l),d=i6(t);return d&&((t,r)=>{let n=rc(t.getBody()),o=rP(rL(n)),a=rd("style");tq(a,"type","text/css"),rJ(a,ru(r)),rJ(o,a),t.on("remove",()=>{nr(a)})})(t,d),s},wT=t=>{var r;!0!==t.removed&&(vD(r=t)||r.load({initial:!0,format:"html"}),r.startContent=r.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(t=>{t.dispatch("Init")})(t),t.focus(!0),(t=>{let r=t.dom.getRoot();t.inline||u$(t)&&t.selection.getStart(!0)!==r||dH(r).each(r=>{let n=r.getNode(),o=nN(n)?dH(n).getOr(r):r;t.selection.setRng(o.toRange())})})(t),t.nodeChanged({initial:!0});let r=sb(t);L(r)&&r.call(t,t),(t=>{let r=sy(t);r&&md.setEditorTimeout(t,()=>{let n;(n=!0===r?t:t.editorManager.get(r))&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(t)})(t))},wB=t=>{var r;let n=t.getElement(),o=t.getDoc();t.inline&&(w8.addClass(n,"mce-content-body"),t.contentDocument=o=document,t.contentWindow=window,t.bodyElement=n,t.contentAreaContainer=n);let a=t.getBody();a.disabled=!0,t.readonly=si(t),t._editableRoot=ss(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===w8.getStyle(a,"position",!0)&&(a.style.position="relative"),a.contentEditable="true"),a.disabled=!1,t.editorUpload=bC(t),t.schema=ax(wR(t)),t.dom=a1(o,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:iM(t),referrerPolicy:iI(t),onSetAttrib(r){t.dispatch("SetAttrib",r)}}),t.parser=(t=>{let r=vr(wN(t),t.schema);return r.addAttributeFilter("src,href,style,tabindex",(r,n)=>{let o=t.dom,a="data-mce-"+n,l=r.length;for(;l--;){let i=r[l],s=i.attr(n);if(s&&!i.attr(a)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===n?((s=o.serializeStyle(o.parseStyle(s),i.name)).length||(s=null),i.attr(a,s),i.attr(n,s)):"tabindex"===n?(i.attr(a,s),i.attr(n,null)):i.attr(a,t.convertURL(s,n,i.name))}}}),r.addNodeFilter("script",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}}),sF(t)&&r.addNodeFilter("#cdata",r=>{var n;let o=r.length;for(;o--;){let a=r[o];a.type=8,a.name="#comment",a.value="[CDATA["+t.dom.encode(null!==(n=a.value)&&void 0!==n?n:"")+"]]"}}),r.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",r=>{let n=r.length,o=t.schema.getNonEmptyElements();for(;n--;){let a=r[n];a.isEmpty(o)&&0===a.getAll("br").length&&a.append(new mD("br",1))}}),r})(t),t.serializer=vj((t=>{let r=t.options.get;return{...wN(t),...wR(t),...wS({remove_trailing_brs:r("remove_trailing_brs"),url_converter:r("url_converter"),url_converter_scope:r("url_converter_scope"),element_format:r("element_format"),entities:r("entities"),entity_encoding:r("entity_encoding"),indent:r("indent"),indent_after:r("indent_after"),indent_before:r("indent_before")})}})(t),t),t.selection=v1(t.dom,t.getWin(),t.serializer,t),t.annotator=uZ(t),t.formatter=bO(t),t.undoManager=bB(t),t._nodeChangeDispatcher=new xw(t),t._selectionOverrides=we(t),(t=>{let r=a5(),n=aj(!1),o=aq(r=>{t.dispatch("longpress",{...r,type:"longpress"}),n.set(!0)},400);t.on("touchstart",t=>{yP(t).each(a=>{o.cancel();let l={x:a.clientX,y:a.clientY,target:t.target};o.throttle(t),n.set(!1),r.set(l)})},!0),t.on("touchmove",a=>{o.cancel(),yP(a).each(o=>{r.on(a=>{((t,r)=>{let n=Math.abs(t.clientX-r.x),o=Math.abs(t.clientY-r.y);return n>5||o>5})(o,a)&&(r.clear(),n.set(!1),t.dispatch("longpresscancel"))})})},!0),t.on("touchend touchcancel",a=>{o.cancel(),"touchcancel"!==a.type&&r.get().filter(t=>t.target.isEqualNode(a.target)).each(()=>{n.get()?a.preventDefault():t.dispatch("tap",{...a,type:"tap"})})},!0)})(t),kA(t),(t=>{let r="contenteditable",n=" "+tP.trim(sM(t))+" ",o=" "+tP.trim(sP(t))+" ",a=yz(n),l=yz(o),i=sI(t);i.length>0&&t.on("BeforeSetContent",r=>{((t,r,n)=>{let o=r.length,a=n.content;if("raw"!==n.format){for(;o--;)a=a.replace(r[o],y6(t,a,sP(t)));n.content=a}})(t,i,r)}),t.parser.addAttributeFilter("class",t=>{let n=t.length;for(;n--;){let o=t[n];a(o)?o.attr(r,"true"):l(o)&&o.attr(r,"false")}}),t.serializer.addAttributeFilter(r,t=>{let n=t.length;for(;n--;){let o=t[n];(a(o)||l(o))&&(i.length>0&&o.attr("data-mce-content")?(o.name="#text",o.type=3,o.raw=!0,o.value=o.attr("data-mce-content")):o.attr(r,null))}})})(t),vD(t)||((t=>{t.on("mousedown",r=>{r.detail>=3&&(r.preventDefault(),kM(t))})})(t),(t=>{let r=[",",".",";",":","!","?"],n=[32],o=()=>{var r,n;return r=sD(t),n=sL(t),{inlinePatterns:ia(r),blockPatterns:io(r),dynamicPatternsLookup:n}},a=()=>{var r;return t.options.isSet("text_patterns_lookup")};t.on("keydown",r=>{if(13===r.keyCode&&!cs.modifierPressed(r)&&t.selection.isCollapsed()){let n=o();(n.inlinePatterns.length>0||n.blockPatterns.length>0||a())&&wx(t,n)&&r.preventDefault()}},!0);let l=()=>{if(t.selection.isCollapsed()){let r=o();(r.inlinePatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();ws(t,n).map(o=>{let a=Math.max(0,n.startOffset-1),l=wu(t.dom,o,n.startContainer,a),i=wd(r,o,l),s=wC(t,o,n.startContainer,a,i,!1);s.length>0&&t.undoManager.transact(()=>{w_(t,s)})})})(t,r)}};t.on("keyup",t=>{wk(n,t,(t,r)=>t===r.keyCode&&!cs.modifierPressed(r))&&l()}),t.on("keypress",n=>{wk(r,n,(t,r)=>t.charCodeAt(0)===r.charCode)&&md.setEditorTimeout(t,l)})})(t));let l=xk(t);yL(t,l),(t=>{t.on("NodeChange",V(yU,t))})(t),(t=>{var r;let n=t.dom,o=i_(t),a=null!==(r=i9(t))&&void 0!==r?r:"",l=(r,i)=>{var s;if((t=>{if(bP(t)){let r=t.keyCode;return!bM(t)&&(cs.metaKeyPressed(t)||t.altKey||r>=112&&r<=123||er(bD,r))}return!1})(r))return;let d=t.getBody(),u=(s=r,(!bP(s)||!!(bM(s)||"keyup"===s.type&&229===s.keyCode))&&((t,r,n)=>{if(oM(rc(r),!1)){let o=r.firstElementChild;return!o||!t.getStyle(r.firstElementChild,"padding-left")&&!t.getStyle(r.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1})(n,d,o));(""!==n.getAttrib(d,bL)!==u||i)&&(n.setAttrib(d,bL,u?a:null),n.setAttrib(d,"aria-placeholder",u?a:null),((t,r)=>{t.dispatch("PlaceholderToggle",{state:r})})(t,u),t.on(u?"keydown":"keyup",l),t.off(u?"keyup":"keydown",l))};eJ(a)&&t.on("init",r=>{l(r,!0),t.on("change SetContent ExecCommand",l),t.on("paste",r=>md.setEditorTimeout(t,()=>l(r)))})})(t),k$(t);let i=(t=>{var r;let n=t;return eL(t.plugins,"rtc").bind(t=>Q.from(t.setup)).fold(()=>(n.rtcInstance=vB(t),Q.none()),t=>(n.rtcInstance=(()=>{let t=z(null),r=z("");return{init:{bindEvents:I},undoManager:{beforeChange:I,add:t,undo:t,redo:t,clear:I,reset:I,hasUndo:Y,hasRedo:Y,transact:t,ignore:I,extra:I},formatter:{match:Y,matchAll:z([]),matchNode:z(void 0),canApply:Y,closest:r,apply:I,remove:I,toggle:I,formatChanged:z({unbind:I})},editor:{getContent:r,setContent:z({content:"",html:""}),insertContent:z(""),addVisual:I},selection:{getContent:r},autocompleter:{addDecoration:I,removeDecoration:I},raw:{getModel:z(Q.none())}}})(),Q.some(()=>t().then(t=>(n.rtcInstance=(t=>{let r=t=>S(t)?t:{},{init:n,undoManager:o,formatter:a,editor:l,selection:i,autocompleter:s,raw:d}=t;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(t,r,n)=>o.transact(n),ignore:(t,r)=>o.ignore(r),extra:(t,r,n,a)=>o.extra(n,a)},formatter:{match:(t,n,o,l)=>a.match(t,r(n),l),matchAll:a.matchAll,matchNode:a.matchNode,canApply:t=>a.canApply(t),closest:t=>a.closest(t),apply:(t,n,o)=>a.apply(t,r(n)),remove:(t,n,o,l)=>a.remove(t,r(n)),toggle:(t,n,o)=>a.toggle(t,r(n)),formatChanged:(t,r,n,o,l)=>a.formatChanged(r,n,o,l)},editor:{getContent:t=>l.getContent(t),setContent:(t,r)=>({content:l.setContent(t,r),html:""}),insertContent:(t,r)=>(l.insertContent(t),""),addVisual:l.addVisual},selection:{getContent:(t,r)=>i.getContent(r)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>Q.some(d.getRawModel())}}})(t),t.rtc.isRemote)))))})(t);(t=>{let r=t.getDoc(),n=t.getBody();(t=>{t.dispatch("PreInit")})(t),sC(t)||(r.body.spellcheck=!1,w8.setAttrib(n,"spellcheck","false")),t.quirks=ww(t),(t=>{t.dispatch("PostRender")})(t);let o=i4(t);void 0!==o&&(n.dir=o);let a=s_(t);a&&t.on("BeforeSetContent",t=>{tP.each(a,r=>{t.content=t.content.replace(r,t=>"<!--mce:protected "+escape(t)+"-->")})}),t.on("SetContent",()=>{t.addVisual(t.getBody())}),t.on("compositionstart compositionend",r=>{t.composing="compositionstart"===r.type})})(t),i.fold(()=>{wO(t).then(()=>wT(t))},r=>{t.setProgressState(!0),wO(t).then(()=>{r().then(r=>{t.setProgressState(!1),wT(t),vM(t)},r=>{t.notificationManager.open({type:"error",text:String(r)}),wT(t),vM(t)})})})},wD=X,wL=a1.DOM,wP=a1.DOM,wM=(t,r)=>({editorContainer:t,iframeContainer:r,api:{}}),wI=t=>{let r=t.getElement();return t.inline?wM(null):(t=>{let r=wP.create("div");return wP.insertAfter(r,t),wM(r,r)})(r)},wF=async t=>{var r,n,o,a,l;t.dispatch("ScriptsLoaded"),(t=>{let r=tP.trim(iO(t)),n=t.ui.registry.getAll().icons,o={...vQ.get("default").icons,...vQ.get(r).icons};eS(o,(r,o)=>{eP(n,o)||t.ui.registry.addIcon(o,r)})})(t),(t=>{let r=iV(t);if(E(r)){let n=bi.get(r);t.theme=n(t,bi.urls[r])||{},L(t.theme.init)&&t.theme.init(t,bi.urls[r]||t.documentBaseUrl.replace(/\/$/,""))}else t.theme={}})(t),(t=>{let r=iW(t),n=vJ.get(r);t.model=n(t,vJ.urls[r])})(t),(t=>{let r=[];ea(su(t),n=>{var o;((t,r,n)=>{let o=bl.get(n),a=bl.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=tP.trim(n),o&&-1===tP.inArray(r,n)){if(t.plugins[n])return;try{let l=o(t,a)||{};t.plugins[n]=l,L(l.init)&&(l.init(t,a),r.push(n))}catch(i){((t,r,n)=>{let o=a3.translate(["Failed to initialize plugin: {0}",r]);cr(t,"PluginLoadError",{message:o}),bf(o,n),bu(t,o)})(t,n,i)}}})(t,r,n.replace(/^\-/,""))})})(t);let i=await (t=>{let r=t.getElement();return t.orgDisplay=r.style.display,E(iV(t))?(t=>{let r=t.theme.renderUI;return r?r():wI(t)})(t):L(iV(t))?(t=>{let r=t.getElement(),n=iV(t)(t,r);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:r.offsetHeight,n})(t):wI(t)})(t);((t,r)=>{let n={show:Q.from(r.show).getOr(I),hide:Q.from(r.hide).getOr(I),isEnabled:Q.from(r.isEnabled).getOr(X),setEnabled(n){t.mode.isReadOnly()||Q.from(r.setEnabled).each(t=>t(n))}};t.ui={...t.ui,...n}})(t,Q.from(i.api).getOr({})),t.editorContainer=i.editorContainer,(r=t).contentCSS=r.contentCSS.concat(bg(n=r,iz(n)),bg(o=r,ij(o))),t.inline?wB(t):(a=t,((t,r)=>{let n=t.translate("Rich Text Area"),o=tG(rc(t.getElement()),"tabindex").bind(te),a=((t,r,n,o)=>{let a=rd("iframe");return o.each(t=>tq(a,"tabindex",t)),tW(a,n),tW(a,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),rn(a,"tox-edit-area__iframe"),a})(t.id,n,ip(t),o).dom;a.onload=()=>{a.onload=null,t.dispatch("load")},t.contentAreaContainer=r.iframeContainer,t.iframeElement=a,t.iframeHTML=(t=>{let r=ih(t)+"<html><head>";iv(t)!==t.documentBaseUrl&&(r+='<base href="'+t.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let n=ib(t),o=i$(t),a=t.translate(sh(t));return iy(t)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+iy(t)+'" />'),r+=`</head><body id="${n}" class="mce-content-body ${o}" data-id="${t.id}" aria-label="${a}"><br></body></html>`})(t),wL.add(r.iframeContainer,a)})(a,l={editorContainer:i.editorContainer,iframeContainer:i.iframeContainer}),l.editorContainer&&(l.editorContainer.style.display=a.orgDisplay,a.hidden=wL.isHidden(l.editorContainer)),a.getElement().style.display="none",wL.setAttrib(a.id,"aria-hidden","true"),a.getElement().style.visibility=a.orgVisibility,(t=>{var r;let n=t.iframeElement,o=()=>{t.contentDocument=n.contentDocument,wB(t)};if(s1(t)||tT.browser.isFirefox()){let a=t.getDoc();a.open(),a.write(t.iframeHTML),a.close(),o()}else{let l=(r=rc(n),ni(r,"load",wD,()=>{l.unbind(),o()}));n.srcdoc=t.iframeHTML}})(a))},w0=a1.DOM,wU=t=>"-"===t.charAt(0),w1=(t,r,n)=>Q.from(r).filter(t=>eJ(t)&&!vQ.has(t)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:Q.some(r)})),wz=(t,r)=>{let n=a6.ScriptLoader,o=()=>{!t.removed&&(t=>{let r=iV(t);return!E(r)||D(bi.get(r))})(t)&&(t=>{let r=iW(t);return D(vJ.get(r))})(t)&&wF(t)};((t,r)=>{let n=iV(t);if(E(n)&&!wU(n)&&!eP(bi.urls,n)){let o=iq(t),a=o?t.documentBaseURI.toAbsolute(o):`themes/${n}/theme${r}.js`;bi.load(n,a).catch(()=>{var r,o,l;r=t,o=a,l=n,bc(r,"ThemeLoadError",bm("theme",o,l))})}})(t,r),((t,r)=>{let n=iW(t);if("plugin"!==n&&!eP(vJ.urls,n)){let o=iK(t),a=E(o)?t.documentBaseURI.toAbsolute(o):`models/${n}/model${r}.js`;vJ.load(n,a).catch(()=>{var r,o,l;r=t,o=a,l=n,bc(r,"ModelLoadError",bm("model",o,l))})}})(t,r),((t,r)=>{let n=iF(r),o=i0(r);if(!a3.hasCode(n)&&"en"!==n){let a=eJ(o)?o:`${r.editorManager.baseURL}/langs/${n}.js`;t.add(a).catch(()=>{var t,o,l;t=r,o=a,l=n,bc(t,"LanguageLoadError",bm("language",o,l))})}})(n,t),((t,r,n)=>{var o;let a=w1(r,"default",n),l=(o=r,Q.from(iT(o)).filter(eJ).map(t=>({url:t,name:Q.none()}))).orThunk(()=>w1(r,iO(r),""));ea((t=>{let r=[],n=t=>{r.push(t)};for(let o=0;o<t.length;o++)t[o].each(n);return r})([a,l]),n=>{t.add(n.url).catch(()=>{var t,o,a;t=r,o=n.url,bc(t,"IconsLoadError",bm("icons",o,a=n.name.getOrUndefined()))})})})(n,t,r),((t,r)=>{let n=(r,n)=>{bl.load(r,n).catch(()=>{var o,a,l;o=t,a=n,bc(o,"PluginLoadError",bm("plugin",a,l=r))})};eS(sc(t),(r,o)=>{n(o,r),t.options.set("plugins",su(t).concat(o))}),ea(su(t),t=>{!(t=tP.trim(t))||bl.urls[t]||wU(t)||n(t,`plugins/${t}/plugin${r}.js`)})})(t,r),n.loadQueue().then(o,o)},w6=t8().deviceType,wj=w6.isPhone(),w4=w6.isTablet(),wH=t=>{if(B(t))return[];{let r=R(t)?t:t.split(/[ ,]/),n=eo(r,eY);return es(n,eJ)}},w7=(t,r)=>{var n,o;let a=((r,n)=>{let o={},a={};return eO(r,(r,n)=>er(t,n),eA(o),eA(a)),{t:o,f:a}})(r);return n=a.t,o=a.f,{sections:z(n),options:z(o)}},w3=(t,r)=>eP(t.sections(),r),w9=(t,r)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:eL(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...r?{menubar:!1}:{}}),w2=(t,r)=>{var n;let o=null!==(n=r.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?tP.extend({},t.external_plugins,o):o},w5=(t,r)=>{let n=t.selection,o=t.dom;return/^ | $/.test(r)?((t,r,n)=>{let o=rc(t.getRoot());return n=fk(o,lM.fromRangeStart(r))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),fw(o,lM.fromRangeEnd(r))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),r):r},wV=(t,r)=>{if(t.selection.isEditable()){let{content:n,details:o}=(t=>{if("string"!=typeof t){let r=tP.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:r}}return{content:t,details:{}}})(r);vl(t,{...o,content:w5(t,n),format:"html",set:!1,selection:!0}).each(r=>{var n,a,l;let i=(n=t,a=r.content,l=o,vL(n).editor.insertContent(a,l));vi(t,i,r),t.addVisual()})}},wq={"font-size":"size","font-family":"face"},wW=t5("font"),wK=t=>(r,n)=>Q.from(n).map(rc).filter(t7).bind(n=>{var o,a,l,i,s;return(o=t,a=r,g4(rc(n.dom),t=>{var r;return rW(r=t,o).orThunk(()=>wW(r)?eL(wq,o).bind(t=>tG(r,t)):Q.none())},t=>rh(rc(a),t))).or((i=t,s=n.dom,Q.from(a1.DOM.getStyle(s,i,!0))))}).getOr(""),wG=wK("font-size"),wY=F(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),wK("font-family")),wX=t=>dH(t.getBody()).bind(t=>{let r=t.container();return Q.from(nO(r)?r.parentNode:r)}),wQ=(t,r)=>{var n,o,a;return n=t,o=U(Q.some,r),(a=n,Q.from(a.selection.getRng()).bind(t=>{let r=a.getBody();return t.startContainer===r&&0===t.startOffset?Q.none():Q.from(a.selection.getStart(!0))})).orThunk(V(wX,n)).map(rc).filter(t7).bind(o)},wJ=(t,r)=>{if(/^[0-9.]+$/.test(r)){let n=parseInt(r,10);if(n>=1&&n<=7){var o,a;let l=(o=t,tP.explode(o.options.get("font_size_style_values"))),i=(a=t,tP.explode(a.options.get("font_size_classes")));return i.length>0?i[n-1]||r:l[n-1]||r}}return r},wZ=t=>{let r=t.split(/\s*,\s*/);return eo(r,t=>-1===t.indexOf(" ")||eW(t,'"')||eW(t,"'")?t:`'${t}'`).join(",")},Ee=["toggleview"],Et=t=>er(Ee,t.toLowerCase());class Er{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,r=!1,n,o){let a=this.editor,l=t.toLowerCase(),i=null==o?void 0:o.skip_focus;if(a.removed||("mcefocus"!==l&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(l)||i?(t=>{mi(t).each(r=>t.selection.setRng(r))})(a):a.focus()),a.dispatch("BeforeExecCommand",{command:t,ui:r,value:n}).isDefaultPrevented()))return!1;let s=this.commands.exec[l];return!!L(s)&&(s(l,r,n),a.dispatch("ExecCommand",{command:t,ui:r,value:n}),!0)}queryCommandState(t){if(!Et(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let r=t.toLowerCase(),n=this.commands.state[r];return!!L(n)&&n(r)}queryCommandValue(t){if(!Et(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let r=t.toLowerCase(),n=this.commands.value[r];return L(n)?n(r):""}addCommands(t,r="exec"){let n=this.commands;eS(t,(t,o)=>{ea(o.toLowerCase().split(","),o=>{n[r][o]=t})})}addCommand(t,r,n){let o=t.toLowerCase();this.commands.exec[o]=(t,o,a)=>r.call(null!=n?n:this.editor,o,a)}queryCommandSupported(t){let r=t.toLowerCase();return!!this.commands.exec[r]}addQueryStateHandler(t,r,n){this.commands.state[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}addQueryValueHandler(t,r,n){this.commands.value[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}}let En="data-mce-contenteditable",Eo=(t,r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(o){}},Ea=(t,r)=>{t.dom.contentEditable=r?"true":"false"},El=(t,r)=>{let n=rc(t.getBody());var o,a,l,i="mce-content-readonly";o=n,a=r,rl(o,i)&&!a?ra(o,i):a&&rn(o,i),r?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(t=>{Q.from(t.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Ea(n,!1),ea(nb(n,'*[contenteditable="true"]'),t=>{tq(t,En,"true"),Ea(t,!1)})):(t.readonly=!1,t.hasEditableRoot()&&Ea(n,!0),ea(nb(n,`*[${En}="true"]`),t=>{tX(t,En),Ea(t,!0)}),Eo(t,"StyleWithCSS",!1),Eo(t,"enableInlineTableEditing",!1),Eo(t,"enableObjectResizing",!1),(m$(l=t)||(t=>{let r=rL(rc(t.getElement()));return cZ(r).filter(r=>!mm(r.dom)&&mf(t,r.dom)).isSome()})(l))&&t.focus(),(t=>{t.selection.setRng(t.selection.getRng())})(t),t.nodeChanged())},Ei=t=>t.readonly,Es=t=>{t.parser.addAttributeFilter("contenteditable",r=>{Ei(t)&&ea(r,t=>{t.attr(En,t.attr("contenteditable")),t.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(En,r=>{Ei(t)&&ea(r,t=>{t.attr("contenteditable",t.attr(En))})}),t.serializer.addTempAttr(En)},Ed=["copy"],Eu=tP.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ec{static isNative(t){return!!Eu[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Y}fire(t,r){return this.dispatch(t,r)}dispatch(t,r){let n=t.toLowerCase(),o=aE(n,null!=r?r:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);let a=this.bindings[n];if(a)for(let l=0,i=a.length;l<i;l++){let s=a[l];if(!s.removed){if(s.once&&this.off(n,s.func),o.isImmediatePropagationStopped())return o;if(!1===s.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,r,n,o){if(!1===r&&(r=Y),r){let a={func:r,removed:!1};o&&tP.extend(a,o);let l=t.toLowerCase().split(" "),i=l.length;for(;i--;){let s=l[i],d=this.bindings[s];d||(d=[],this.toggleEvent(s,!0)),d=n?[a,...d]:[...d,a],this.bindings[s]=d}}return this}off(t,r){if(t){let n=t.toLowerCase().split(" "),o=n.length;for(;o--;){let a=n[o],l=this.bindings[a];if(!a)return eS(this.bindings,(t,r)=>{this.toggleEvent(r,!1),delete this.bindings[r]}),this;if(l){if(r){let i=ei(l,t=>t.func===r);l=i.fail,this.bindings[a]=l,ea(i.pass,t=>{t.removed=!0})}else l.length=0;l.length||(this.toggleEvent(t,!1),delete this.bindings[a])}}}else eS(this.bindings,(t,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,r,n){return this.on(t,r,n,{once:!0})}has(t){t=t.toLowerCase();let r=this.bindings[t];return!(!r||0===r.length)}}let Em=t=>(t._eventDispatcher||(t._eventDispatcher=new Ec({scope:t,toggleEvent(r,n){Ec.isNative(r)&&t.toggleNativeEvent&&t.toggleNativeEvent(r,n)}})),t._eventDispatcher),Ef={fire(t,r,n){return this.dispatch(t,r,n)},dispatch(t,r,n){if(this.removed&&"remove"!==t&&"detach"!==t)return aE(t.toLowerCase(),null!=r?r:{},this);let o=Em(this).dispatch(t,r);if(!1!==n&&this.parent){let a=this.parent();for(;a&&!o.isPropagationStopped();)a.dispatch(t,o,!1),a=a.parent?a.parent():void 0}return o},on(t,r,n){return Em(this).on(t,r,n)},off(t,r){return Em(this).off(t,r)},once(t,r){return Em(this).once(t,r)},hasEventListeners(t){return Em(this).has(t)}},Eg=a1.DOM,Ep,Eh=(t,r)=>{if("selectionchange"===r)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(r))return t.getDoc().documentElement;let n=i2(t);return n?(t.eventRoot||(t.eventRoot=Eg.select(n)[0]),t.eventRoot):t.getBody()},Ev=(t,r,n)=>{var o;(o=t).hidden||Ei(o)?Ei(t)&&((t,r)=>{var n,o,a,l;if("click"!==r.type||cs.metaKeyPressed(r))er(Ed,r.type)&&t.dispatch(r.type,r);else{let i=rc(r.target);(a=t,l=i,r4(l,"a",t=>rh(t,rc(a.getBody()))).bind(t=>tG(t,"href"))).each(n=>{if(r.preventDefault(),/^#/.test(n)){let o=t.dom.select(`${n},[name="${eV(n,"#")}"]`);o.length&&t.selection.scrollIntoView(o[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}})(t,n):t.dispatch(r,n)},Eb=(t,r)=>{if(t.delegates||(t.delegates={}),t.delegates[r]||t.removed)return;let n=Eh(t,r);if(i2(t)){if(Ep||(Ep={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Ep&&(eS(Ep,(r,n)=>{t.dom.unbind(Eh(t,n))}),Ep=null)})),Ep[r])return;let o=n=>{let o=n.target,a=t.editorManager.get(),l=a.length;for(;l--;){let i=a[l].getBody();(i===o||Eg.isChildOf(o,i))&&Ev(a[l],r,n)}};Ep[r]=o,Eg.bind(n,r,o)}else{let a=n=>{Ev(t,r,n)};Eg.bind(n,r,a),t.delegates[r]=a}},E$={...Ef,bindPendingEventDelegates(){let t=this;tP.each(t._pendingNativeEvents,r=>{Eb(t,r)})},toggleNativeEvent(t,r){let n=this;"focus"!==t&&"blur"!==t&&(n.removed||(r?n.initialized?Eb(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Eh(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){let t=this,r=t.getBody(),n=t.dom;t.delegates&&(eS(t.delegates,(r,n)=>{t.dom.unbind(Eh(t,n),n,r)}),delete t.delegates),!t.inline&&r&&n&&(r.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(r),n.unbind(t.getContainer()))}},Ey=t=>E(t)?{value:t.split(/[ ,]/),valid:!0}:M(t,E)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},EC=(t,r)=>t+(eZ(r.message)?"":`. ${r.message}`),E_=t=>t.valid,Ex=(t,r,n="")=>{let o=r(t);return O(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},Ek=["design","readonly"],Ew=(t,r,n,o)=>{let a=n[r.get()],l=n[o];try{l.activate()}catch(i){return void console.error(`problem while activating editor mode ${o}:`,i)}a.deactivate(),a.editorReadOnly!==l.editorReadOnly&&El(t,l.editorReadOnly),r.set(o),((t,r)=>{t.dispatch("SwitchMode",{mode:r})})(t,o)},E8=tP.each,EE=tP.explode,ES={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},EN=tP.makeMap("alt,ctrl,shift,meta,access"),ER=t=>{let r={},n=tT.os.isMacOS()||tT.os.isiOS();E8(EE(t.toLowerCase(),"+"),t=>{var n;t in EN?r[t]=!0:/^[0-9]{2,}$/.test(t)?r.keyCode=parseInt(t,10):(r.charCode=t.charCodeAt(0),r.keyCode=ES[t]||t.toUpperCase().charCodeAt(0))});let o=[r.keyCode],a;for(a in EN)r[a]?o.push(a):r[a]=!1;return r.id=o.join(","),r.access&&(r.alt=!0,n?r.ctrl=!0:r.shift=!0),r.meta&&(n?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r};class EA{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;let r=this;t.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(E8(r.shortcuts,n=>{r.matchShortcut(t,n)&&(r.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&r.executeShortcutAction(n))}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(t,r,n,o){let a=this,l=a.normalizeCommandFunc(n);return E8(EE(tP.trim(t)),t=>{let n=a.createShortcut(t,r,l,o);a.shortcuts[n.id]=n}),!0}remove(t){let r=this.createShortcut(t);return!!this.shortcuts[r.id]&&(delete this.shortcuts[r.id],!0)}normalizeCommandFunc(t){let r=this,n=t;return"string"==typeof n?()=>{r.editor.execCommand(n,!1,null)}:tP.isArray(n)?()=>{r.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(t,r,n,o){let a=tP.map(EE(t,">"),ER);return a[a.length-1]=tP.extend(a[a.length-1],{func:n,scope:o||this.editor}),tP.extend(a[0],{desc:this.editor.translate(r),subpatterns:a.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,r){return!!r&&r.ctrl===t.ctrlKey&&r.meta===t.metaKey&&r.alt===t.altKey&&r.shift===t.shiftKey&&!!(t.keyCode===r.keyCode||t.charCode&&t.charCode===r.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}let EO=a1.DOM,ET=tP.extend,EB=tP.each;class ED{constructor(t,r,n){var o,a,l,i,s,d,u,c,m;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,ET(this,E$),this.id=t,this.hidden=!1;let f=(o=n.defaultOptions,a=r,((t,r,n,o,a)=>{var l,i,s;let d=t?{mobile:w9(null!==(l=a.mobile)&&void 0!==l?l:{},r)}:{},u=w7(["mobile"],C6(d,a)),c=tP.extend(n,o,u.options(),(i=t,s=u,i&&w3(s,"mobile"))?((t,r,n={})=>{let o=t.sections(),a=eL(o,r).getOr({});return tP.extend({},n,a)})(u,"mobile"):{},{external_plugins:w2(o,u.options())});return((t,r,n,o)=>{var a,l,i,s,d,u,c,m;let f=wH(n.forced_plugins),g=wH(o.plugins),p=(a=r,w3(a,l="mobile")?a.sections()[l]:{}),h=(i=t,s=r,d=g,u=p.plugins?wH(p.plugins):g,i&&w3(s,"mobile")?u:d),v=(c=f,m=h,[...wH(c),...wH(m)]);return tP.extend(o,{forced_plugins:f,plugins:v})})(t,u,o,c)})(wj||w4,wj,a,o,a));this.options=((t,r)=>{let n={},o={},a=(t,r,n)=>{let a=Ex(r,n);return E_(a)?(o[t]=a.value,!0):(console.warn(EC(`Invalid value passed for the ${t} option`,a)),!1)},l=t=>eP(n,t);return{register(t,l){var i;let s=(i=l,E(i.processor))?(t=>{let r=(()=>{switch(t){case"array":return R;case"boolean":return O;case"function":return L;case"number":return P;case"object":return S;case"string":return E;case"string[]":return Ey;case"object[]":return t=>M(t,S);case"regexp":return t=>w(t,RegExp);default:return X}})();return n=>Ex(n,r,`The value must be a ${t}.`)})(l.processor):l.processor,d=((t,r,n)=>{if(!T(r)){let o=Ex(r,n);if(E_(o))return o.value;console.error(EC(`Invalid default value passed for the "${t}" option`,o))}})(t,l.default,s);n[t]={...l,default:d,processor:s},eL(o,t).orThunk(()=>eL(r,t)).each(r=>a(t,r,s))},isRegistered:l,get:t=>eL(o,t).orThunk(()=>eL(n,t).map(t=>t.default)).getOrUndefined(),set(t,r){if(l(t)){let o=n[t];return o.immutable?(console.error(`"${t}" is an immutable option and cannot be updated`),!1):a(t,r,o.processor)}return console.warn(`"${t}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset(t){let r=l(t);return r&&delete o[t],r},isSet:t=>eP(o,t)}})(0,f),(t=>{let r=t.options.register;r("id",{processor:"string",default:t.id}),r("selector",{processor:"string"}),r("target",{processor:"object"}),r("suffix",{processor:"string"}),r("cache_suffix",{processor:"string"}),r("base_url",{processor:"string"}),r("referrer_policy",{processor:"string",default:""}),r("language_load",{processor:"boolean",default:!0}),r("inline",{processor:"boolean",default:!1}),r("iframe_attrs",{processor:"object",default:{}}),r("doctype",{processor:"string",default:"<!DOCTYPE html>"}),r("document_base_url",{processor:"string",default:t.documentBaseUrl}),r("body_id",{processor:ig(t,"tinymce"),default:"tinymce"}),r("body_class",{processor:ig(t),default:""}),r("content_security_policy",{processor:"string",default:""}),r("br_in_pre",{processor:"boolean",default:!0}),r("forced_root_block",{processor(t){let r=E(t)&&eJ(t);return r?{value:t,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),r("forced_root_block_attrs",{processor:"object",default:{}}),r("newline_behavior",{processor(t){let r=er(["block","linebreak","invert","default"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),r("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),r("no_newline_selector",{processor:"string",default:""}),r("keep_styles",{processor:"boolean",default:!0}),r("end_container_on_empty_block",{processor:t=>O(t)||E(t)?{valid:!0,value:t}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),r("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),r("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),r("font_size_classes",{processor:"string",default:""}),r("automatic_uploads",{processor:"boolean",default:!0}),r("images_reuse_filename",{processor:"boolean",default:!1}),r("images_replace_blob_uris",{processor:"boolean",default:!0}),r("icons",{processor:"string",default:""}),r("icons_url",{processor:"string",default:""}),r("images_upload_url",{processor:"string",default:""}),r("images_upload_base_path",{processor:"string",default:""}),r("images_upload_credentials",{processor:"boolean",default:!1}),r("images_upload_handler",{processor:"function"}),r("language",{processor:"string",default:"en"}),r("language_url",{processor:"string",default:""}),r("entity_encoding",{processor:"string",default:"named"}),r("indent",{processor:"boolean",default:!0}),r("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_use_margin",{processor:"boolean",default:!1}),r("indentation",{processor:"string",default:"40px"}),r("content_css",{processor(t){let r=!1===t||E(t)||M(t,E);return r?E(t)?{value:eo(t.split(","),eY),valid:r}:R(t)?{value:t,valid:r}:!1===t?{value:[],valid:r}:{value:t,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:se(t)?[]:["default"]}),r("content_style",{processor:"string"}),r("content_css_cors",{processor:"boolean",default:!1}),r("font_css",{processor(t){let r=E(t)||M(t,E);return r?{value:R(t)?t:eo(t.split(","),eY),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),r("inline_boundaries",{processor:"boolean",default:!0}),r("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),r("object_resizing",{processor(t){let r=O(t)||E(t);return r?!1===t||ii.isiPhone()||ii.isiPad()?{value:"",valid:r}:{value:!0===t?"table,img,figure.image,div,video,iframe":t,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!is}),r("resize_img_proportional",{processor:"boolean",default:!0}),r("event_root",{processor:"object"}),r("service_message",{processor:"string"}),r("theme",{processor:t=>!1===t||E(t)||L(t),default:"silver"}),r("theme_url",{processor:"string"}),r("formats",{processor:"object"}),r("format_empty_lines",{processor:"boolean",default:!1}),r("format_noneditable_selector",{processor:"string",default:""}),r("preview_styles",{processor(t){let r=!1===t||E(t);return r?{value:!1===t?"":t,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),r("custom_ui_selector",{processor:"string",default:""}),r("hidden_input",{processor:"boolean",default:!0}),r("submit_patch",{processor:"boolean",default:!0}),r("encoding",{processor:"string"}),r("add_form_submit_trigger",{processor:"boolean",default:!0}),r("add_unload_trigger",{processor:"boolean",default:!0}),r("custom_undo_redo_levels",{processor:"number",default:0}),r("disable_nodechange",{processor:"boolean",default:!1}),r("readonly",{processor:"boolean",default:!1}),r("editable_root",{processor:"boolean",default:!0}),r("plugins",{processor:"string[]",default:[]}),r("external_plugins",{processor:"object"}),r("forced_plugins",{processor:"string[]"}),r("model",{processor:"string",default:t.hasPlugin("rtc")?"plugin":"dom"}),r("model_url",{processor:"string"}),r("block_unsupported_drop",{processor:"boolean",default:!0}),r("visual",{processor:"boolean",default:!0}),r("visual_table_class",{processor:"string",default:"mce-item-table"}),r("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),r("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),r("setup",{processor:"function"}),r("init_instance_callback",{processor:"function"}),r("url_converter",{processor:"function",default:t.convertURL}),r("url_converter_scope",{processor:"object",default:t}),r("urlconverter_callback",{processor:"function"}),r("allow_conditional_comments",{processor:"boolean",default:!1}),r("allow_html_data_urls",{processor:"boolean",default:!1}),r("allow_svg_data_urls",{processor:"boolean"}),r("allow_html_in_named_anchor",{processor:"boolean",default:!1}),r("allow_script_urls",{processor:"boolean",default:!1}),r("allow_unsafe_link_target",{processor:"boolean",default:!1}),r("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),r("fix_list_elements",{processor:"boolean",default:!1}),r("preserve_cdata",{processor:"boolean",default:!1}),r("remove_trailing_brs",{processor:"boolean",default:!0}),r("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),r("element_format",{processor:"string",default:"html"}),r("entities",{processor:"string"}),r("schema",{processor:"string",default:"html5"}),r("convert_urls",{processor:"boolean",default:!0}),r("relative_urls",{processor:"boolean",default:!0}),r("remove_script_host",{processor:"boolean",default:!0}),r("custom_elements",{processor:"string"}),r("extended_valid_elements",{processor:"string"}),r("invalid_elements",{processor:"string"}),r("invalid_styles",{processor:im}),r("valid_children",{processor:"string"}),r("valid_classes",{processor:im}),r("valid_elements",{processor:"string"}),r("valid_styles",{processor:im}),r("verify_html",{processor:"boolean",default:!0}),r("auto_focus",{processor:t=>E(t)||!0===t}),r("browser_spellcheck",{processor:"boolean",default:!1}),r("protect",{processor:"array"}),r("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),r("deprecation_warnings",{processor:"boolean",default:!0}),r("a11y_advanced_options",{processor:"boolean",default:!1}),r("api_key",{processor:"string"}),r("paste_block_drop",{processor:"boolean",default:!1}),r("paste_data_images",{processor:"boolean",default:!0}),r("paste_preprocess",{processor:"function"}),r("paste_postprocess",{processor:"function"}),r("paste_webkit_styles",{processor:"string",default:"none"}),r("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),r("paste_merge_formats",{processor:"boolean",default:!0}),r("smart_paste",{processor:"boolean",default:!0}),r("paste_as_text",{processor:"boolean",default:!1}),r("paste_tab_spaces",{processor:"number",default:4}),r("text_patterns",{processor:t=>M(t,S)||!1===t?{value:il(!1===t?[]:t),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),r("text_patterns_lookup",{processor(t){var r;return L(t)?{value:(r=t,t=>{let n=r(t);return il(n)}),valid:!0}:{valid:!1,message:"Must be a single function"}},default:t=>[]}),r("noneditable_class",{processor:"string",default:"mceNonEditable"}),r("editable_class",{processor:"string",default:"mceEditable"}),r("noneditable_regexp",{processor:t=>M(t,iu)?{value:t,valid:!0}:iu(t)?{value:[t],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),r("table_tab_navigation",{processor:"boolean",default:!0}),r("highlight_on_focus",{processor:"boolean",default:!1}),r("xss_sanitization",{processor:"boolean",default:!0}),r("details_initial_state",{processor(t){let r=er(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("details_serialized_state",{processor(t){let r=er(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("init_content_sync",{processor:"boolean",default:!1}),r("newdocument_content",{processor:"string",default:""}),t.on("ScriptsLoaded",()=>{r("directionality",{processor:"string",default:a3.isRtl()?"rtl":void 0}),r("placeholder",{processor:"string",default:id.getAttrib(t.getElement(),"placeholder")})})})(this);let g=this.options.get;g("deprecation_warnings")&&(l=r,i=f,((t,r)=>{let n=v5(t),o=vW(r),a=o.length>0,l=n.length>0,i="mobile"===r.theme;if(a||l||i){let s=i?`

Themes:
- mobile`:"",d=a?`

Plugins:
- ${o.join("\n- ")}`:"",u=l?`

Options:
- ${n.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+s+d+u)}})(l,i),((t,r)=>{let n=vV(t),o=vK(r),a=o.length>0,l=n.length>0;if(a||l){let i=a?`

Plugins:
- ${o.map(vG).join("\n- ")}`:"",s=l?`

Options:
- ${n.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+i+s)}})(l,i));let p=g("suffix");p&&(n.suffix=p),this.suffix=n.suffix;let h=g("base_url");h&&n._setBaseUrl(h),this.baseUri=n.baseURI;let v=iI(this);v&&(a6.ScriptLoader._setReferrerPolicy(v),a1.DOM.styleSheetLoader._setReferrerPolicy(v));let b=sd(this);D(b)&&a1.DOM.styleSheetLoader._setContentCssCors(b),a9.languageLoad=g("language_load"),a9.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new h5(iv(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=se(this),this.hasVisual=sf(this),this.shortcuts=new EA(this),this.editorCommands=new Er(this),s=this,(t=>{let r=r=>()=>{var n;ea("left,center,right,justify".split(","),n=>{r!==n&&t.formatter.remove("align"+n)}),"none"!==r&&(n="align"+r,t.formatter.toggle(n,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:r("left"),JustifyCenter:r("center"),JustifyRight:r("right"),JustifyFull:r("justify"),JustifyNone:r("none")})})(m=s),(t=>{let r=r=>()=>{let n=t.selection,o=n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks();return en(o,n=>D(t.formatter.matchNode(n,r)))};t.editorCommands.addCommands({JustifyLeft:r("alignleft"),JustifyCenter:r("aligncenter"),JustifyRight:r("alignright"),JustifyFull:r("alignjustify")},"state")})(m),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste"(r){let n=t.getDoc(),o;try{n.execCommand(r)}catch(a){o=!0}if("paste"!==r||n.queryCommandEnabled(r)||(o=!0),o||!n.queryCommandSupported(r)){let l=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tT.os.isMacOS()||tT.os.isiOS())&&(l=l.replace(/Ctrl\+/g,"⌘+")),t.notificationManager.open({text:l,type:"error"})}}})})(s),(t=>{t.editorCommands.addCommands({mceAddUndoLevel(){t.undoManager.add()},mceEndUndoLevel(){t.undoManager.add()},Undo(){t.undoManager.undo()},Redo(){t.undoManager.redo()}})})(s),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth(r,n,o){let a=0;t.dom.getParent(t.selection.getNode(),r=>!nx(r)||a++!==o||(t.selection.select(r),!1),t.getBody())},mceSelectNode(r,n,o){t.selection.select(o)},selectAll(){let r=t.dom.getParent(t.selection.getStart(),nF);if(r){let n=t.dom.createRng();n.selectNodeContents(r),t.selection.setRng(n)}}})})(s),(t=>{t.editorCommands.addCommands({mceCleanup(){let r=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(r)},insertImage(r,n,o){wV(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule(){t.execCommand("mceInsertContent",!1,"<hr>")},insertText(r,n,o){wV(t,t.dom.encode(o))},insertHTML(r,n,o){wV(t,o)},mceInsertContent(r,n,o){wV(t,o)},mceSetContent(r,n,o){t.setContent(o)},mceReplaceContent(r,n,o){t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument(){t.setContent(sE(t))}})})(s),(t=>{let r=(r,n,o)=>{let a=E(o)?{href:o}:o,l=t.dom.getParent(t.selection.getNode(),"a");S(a)&&E(a.href)&&(a.href=a.href.replace(/ /g,"%20"),l&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,l))};t.editorCommands.addCommands({unlink(){if(t.selection.isEditable()){if(t.selection.isCollapsed()){let r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:r,createLink:r})})(s),(d=s).editorCommands.addCommands({Indent(){var t;yO(t=d,"indent")},Outdent(){yT(d)}}),d.editorCommands.addCommands({Outdent:()=>yN(d)},"state"),(t=>{t.editorCommands.addCommands({insertParagraph(){xs(_3,t)},mceInsertNewLine(r,n,o){xd(t,o)},InsertLineBreak(r,n,o){xs(_G,t)}})})(s),(t=>{t.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList"(r){t.getDoc().execCommand(r);let n=t.dom.getParent(t.selection.getNode(),"ol,ul");if(n){let o=n.parentNode;if(o&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)){let a=t.selection.getBookmark();t.dom.split(o,n),t.selection.moveToBookmark(a)}}}})})(u=s),(t=>{t.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList"(r){let n=t.dom.getParent(t.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===r&&"UL"===n.tagName||"insertorderedlist"===r&&"OL"===n.tagName)}},"state")})(u),(t=>{let r=(r,n)=>{t.formatter.toggle(r,n),t.nodeChanged()};t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript"(t){r(t)},"ForeColor,HiliteColor"(t,n,o){r(t,{value:o})},BackColor(t,n,o){r("hilitecolor",{value:o})},FontName(r,n,o){((t,r)=>{let n=wJ(t,r);t.formatter.toggle("fontname",{value:wZ(n)}),t.nodeChanged()})(t,o)},FontSize(r,n,o){var a,l;a=t,l=o,a.formatter.toggle("fontsize",{value:wJ(a,l)}),a.nodeChanged()},LineHeight(r,n,o){var a,l;a=t,l=o,a.formatter.toggle("lineheight",{value:String(l)}),a.nodeChanged()},Lang(t,n,o){var a;r(t,{value:o.code,customValue:null!==(a=o.customCode)&&void 0!==a?a:null})},RemoveFormat(r){t.formatter.remove(r)},mceBlockQuote(){r("blockquote")},FormatBlock(t,n,o){r(E(o)?o:"p")},mceToggleFormat(t,n,o){r(o)}})})(c=s),(t=>{let r=r=>t.formatter.match(r);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>r(t),mceBlockQuote:()=>r("blockquote")},"state"),t.editorCommands.addQueryValueHandler("FontName",()=>{var r;return wQ(r=t,t=>wY(r.getBody(),t.dom)).getOr("")}),t.editorCommands.addQueryValueHandler("FontSize",()=>{var r;return wQ(r=t,t=>wG(r.getBody(),t.dom)).getOr("")}),t.editorCommands.addQueryValueHandler("LineHeight",()=>{var r;return wQ(r=t,t=>{let n=rc(r.getBody()),o=g4(t,t=>rW(t,"line-height"),V(rh,n));return o.getOrThunk(()=>{let r=parseFloat(rV(t,"line-height")),n=parseFloat(rV(t,"font-size"));return String(r/n)})}).getOr("")})})(c),(t=>{t.editorCommands.addCommands({mceRemoveNode(r,n,o){let a=null!=o?o:t.selection.getNode();if(a!==t.getBody()){let l=t.selection.getBookmark();t.dom.remove(a,!0),t.selection.moveToBookmark(l)}},mcePrint(){t.getWin().print()},mceFocus(r,n,o){var a,l;a=t,l=!0===o,a.removed||(l?my(a):(t=>{var r,n;let o=t.selection,a=t.getBody(),l=o.getRng();t.quirks.refreshContentEditable(),D(t.bookmark)&&!m$(t)&&mi(t).each(r=>{t.selection.setRng(r),l=r});let i=(r=t,n=o.getNode(),r.dom.getParent(n,t=>"true"===r.dom.getContentEditable(t)));if(i&&t.dom.isChildOf(i,a))return mb(i),mv(t,l),void my(t);t.inline||(tT.browser.isOpera()||mb(a),t.getWin().focus()),(tT.browser.isFirefox()||t.inline)&&(mb(a),mv(t,l)),my(t)})(a))},mceToggleVisualAid(){t.hasVisual=!t.hasVisual,t.addVisual()}})})(s);let $=g("cache_suffix");$&&(tT.cacheSuffix=$.replace(/^[\?\&]+/,"")),this.ui={registry:(()=>{let t=(()=>{let t={},r={},n={},o={},a={},l={},i={},s={},d=(t,r)=>(n,o)=>{t[n.toLowerCase()]={...o,type:r}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(r,"menuitem"),addNestedMenuItem:d(r,"nestedmenuitem"),addToggleMenuItem:d(r,"togglemenuitem"),addAutocompleter:d(n,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(l,"contexttoolbar"),addContextForm:d(l,"contextform"),addSidebar:d(i,"sidebar"),addView:d(s,"views"),addIcon:(t,r)=>o[t.toLowerCase()]=r,getAll:()=>({buttons:t,menuItems:r,icons:o,popups:n,contextMenus:a,contextToolbars:l,sidebars:i,views:s})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}})(),styleSheetLoader:void 0,show:I,hide:I,setEnabled:I,isEnabled:X},this.mode=(t=>{var r,n;let o=aj("design"),a=aj({design:{activate:I,deactivate:I,editorReadOnly:!1},readonly:{activate:I,deactivate:I,editorReadOnly:!0}});return(r=t).serializer?Es(r):r.on("PreInit",()=>{Es(r)}),(n=t).on("ShowCaret",t=>{Ei(n)&&t.preventDefault()}),n.on("ObjectSelected",t=>{Ei(n)&&t.preventDefault()}),{isReadOnly:()=>Ei(t),set:r=>((t,r,n,o)=>{if(o!==n.get()){if(!eP(r,o))throw Error(`Editor mode '${o}' is invalid`);t.initialized?Ew(t,n,r,o):t.on("init",()=>Ew(t,n,r,o))}})(t,a.get(),o,r),get:()=>o.get(),register(t,r){a.set(((t,r,n)=>{if(er(Ek,r))throw Error(`Cannot override default mode ${r}`);return{...t,[r]:{...n,deactivate(){try{n.deactivate()}catch(t){console.error(`problem while deactivating editor mode ${r}:`,t)}}}}})(a.get(),t,r))}}})(this),n.dispatch("SetupEditor",{editor:this});let y=sv(this);L(y)&&y.call(this,this)}render(){(t=>{var r,n,o;let a=t.id;a3.setCode(iF(t));let l=()=>{w0.unbind(window,"ready",l),t.render()};if(!aT.Event.domLoaded)return void w0.bind(window,"ready",l);if(!t.getElement())return;let i=rc(t.getElement()),s=tQ(i);t.on("remove",()=>{el(i.dom.attributes,t=>tX(i,t.name)),tW(i,s)}),t.ui.styleSheetLoader=(r=i,n=t,oK.forElement(r,{contentCssCors:sd(n),referrerPolicy:iI(n)})),se(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");let d=t.getElement().form||w0.getParent(a,"form");d&&(t.formElement=d,st(t)&&!nA(t.getElement())&&(w0.insertAfter(w0.create("input",{type:"hidden",name:a}),a),t.hasHiddenInput=!0),t.formEventDelegate=r=>{t.dispatch(r.type,r)},w0.bind(d,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!sr(t)||d.submit.nodeType||d.submit.length||d._mceOldSubmit||(d._mceOldSubmit=d.submit,d.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),d._mceOldSubmit(d)))),t.windowManager=bs(t),t.notificationManager=ba(t),"xml"===t.options.get("encoding")&&t.on("GetContent",t=>{t.save&&(t.content=w0.encode(t.content))}),sn(t)&&t.on("submit",()=>{t.initialized&&t.save()}),so(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),wz(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return m$(this)}translate(t){return a3.translate(t)}getParam(t,r,n){let o=this.options;return o.isRegistered(t)||(D(n)?o.register(t,{processor:n,default:r}):o.register(t,{processor:X,default:r})),o.isSet(t)||T(r)?o.get(t):r}hasPlugin(t,r){return!(!er(su(this),t)||r&&void 0===bl.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,r,n){this.editorCommands.addCommand(t,r,n)}addQueryStateHandler(t,r,n){this.editorCommands.addQueryStateHandler(t,r,n)}addQueryValueHandler(t,r,n){this.editorCommands.addQueryValueHandler(t,r,n)}addShortcut(t,r,n,o){this.shortcuts.add(t,r,n,o)}execCommand(t,r,n,o){return this.editorCommands.execCommand(t,r,n,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){let t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(EO.show(t.getContainer()),EO.hide(t.id)),t.load(),t.dispatch("show"))}hide(){let t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(EO.hide(t.getContainer()),EO.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,r){this.dispatch("ProgressState",{state:t,time:r})}load(t={}){let r=this.getElement();if(this.removed)return"";if(r){let n={...t,load:!0},o=nA(r)?r.value:r.innerHTML,a=this.setContent(o,n);return n.no_events||this.dispatch("LoadContent",{...n,element:r}),a}return""}save(t={}){let r=this,n=r.getElement();if(!n||!r.initialized||r.removed)return"";let o={...t,save:!0,element:n},a=r.getContent(o),l={...o,content:a};if(l.no_events||r.dispatch("SaveContent",l),"raw"===l.format&&r.dispatch("RawSaveContent",l),a=l.content,nA(n))n.value=a;else{!t.is_removing&&r.inline||(n.innerHTML=a);let i=EO.getParent(r.id,"form");i&&EB(i.elements,t=>t.name!==r.id||(t.value=a,!1))}return l.element=o.element=n=null,!1!==l.set_dirty&&r.setDirty(!1),a}setContent(t,r){return v4(this,t,r)}getContent(t){return((t,r={})=>{var n,o;let a=(n=r,o=r.format?r.format:"html",{...n,format:o,get:!0,getInner:!0});return vo(t,a).fold(j,r=>{var n,o;let a=(n=t,o=r,vL(n).editor.getContent(o));return va(t,a,r)})})(this,t)}insertContent(t,r){r&&(t=ET({content:t},r)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?v4(this,this.startContent,{format:"raw"}):v4(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){let r=!this.isNotDirty;this.isNotDirty=!t,t&&t!==r&&this.dispatch("dirty")}getContainer(){let t=this;return t.container||(t.container=t.editorContainer||EO.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=EO.get(this.id)),this.targetElm}getWin(){let t=this;if(!t.contentWindow){let r=t.iframeElement;r&&(t.contentWindow=r.contentWindow)}return t.contentWindow}getDoc(){let t=this;if(!t.contentDocument){let r=t.getWin();r&&(t.contentDocument=r.document)}return t.contentDocument}getBody(){var t,r;let n=this.getDoc();return null!==(r=null!==(t=this.bodyElement)&&void 0!==t?t:null==n?void 0:n.body)&&void 0!==r?r:null}convertURL(t,r,n){let o=this.options.get,a=s$(this);return L(a)?a.call(this,t,n,!0,r):!o("convert_urls")||"link"===n||S(n)&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length?t:o("relative_urls")?this.documentBaseURI.toRelative(t):t=this.documentBaseURI.toAbsolute(t,o("remove_script_host"))}addVisual(t){var r,n;r=this,((t,r)=>{vP(t).editor.addVisual(r)})(r,n=t)}setEditableRoot(t){var r,n;r=this,n=t,r._editableRoot!==n&&(r._editableRoot=n,r.readonly||(r.getBody().contentEditable=String(r.hasEditableRoot()),r.nodeChanged()),((t,r)=>{t.dispatch("EditableRootStateChange",{state:r})})(r,n))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){var r;let{_selectionOverrides:n,editorUpload:o}=t,a=t.getBody(),l=t.getElement();a&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&D(null==l?void 0:l.nextSibling)&&vY.remove(l.nextSibling),(t=>{t.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&a&&(r=t,vY.setStyle(r.id,"display",r.orgDisplay)),(t=>{t.dispatch("detach")})(t),vY.remove(t.getContainer()),vX(n),vX(o),t.destroy()}})(this)}destroy(t){((t,r)=>{let{selection:n,dom:o}=t;t.destroyed||(r||t.removed?(r||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),vX(n),vX(o)),(t=>{let r=t.formElement;r&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),vY.unbind(r,"submit reset",t.formEventDelegate))})(t),(t=>{let r=t;r.contentAreaContainer=r.formElement=r.container=r.editorContainer=null,r.bodyElement=r.contentDocument=r.contentWindow=null,r.iframeElement=r.targetElm=null;let n=t.selection;if(n){let o=n.dom;r.selection=n.win=n.dom=o.doc=null}})(t),t.destroyed=!0):t.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let EL=a1.DOM,EP=tP.each,EM,EI=!1,EF=[],E0=t=>{let r=t.type;EP(E6.get(),n=>{switch(r){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},EU=t=>{if(t!==EI){let r=a1.DOM;t?(r.bind(window,"resize",E0),r.bind(window,"scroll",E0)):(r.unbind(window,"resize",E0),r.unbind(window,"scroll",E0)),EI=t}},E1=t=>{let r=EF;return EF=es(EF,r=>t!==r),E6.activeEditor===t&&(E6.activeEditor=EF.length>0?EF[0]:null),E6.focusedEditor===t&&(E6.focusedEditor=null),r.length!==EF.length},Ez="CSS1Compat"!==document.compatMode,E6={...Ef,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.0",releaseDate:"2023-07-12",i18n:a3,activeEditor:null,focusedEditor:null,setup(){var t;let r=this,n="",o="",a=h5.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));let l=window.tinymce||window.tinyMCEPreInit;if(l)n=l.base||l.baseURL,o=l.suffix;else{let i=document.getElementsByTagName("script");for(let s=0;s<i.length;s++){let d=i[s].src||"";if(""===d)continue;let u=d.substring(d.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(d)){-1!==u.indexOf(".min")&&(o=".min"),n=d.substring(0,d.lastIndexOf("/"));break}}if(!n&&document.currentScript){let c=document.currentScript.src;-1!==c.indexOf(".min")&&(o=".min"),n=c.substring(0,c.lastIndexOf("/"))}}r.baseURL=new h5(a).toAbsolute(n),r.documentBaseURL=a,r.baseURI=new h5(r.baseURL),r.suffix=o,(t=r).on("AddEditor",V(mp,t)),t.on("RemoveEditor",V(mh,t))},overrideDefaults(t){let r=t.base_url;r&&this._setBaseUrl(r);let n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;let o=t.plugin_base_urls;void 0!==o&&eS(o,(t,r)=>{a9.PluginManager.urls[r]=t})},init(t){let r=this,n,o=tP.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=t=>{n=t},l=()=>{var n;let i=0,s=[],d;EL.unbind(window,"ready",l),(n=>{let o=t.onpageload;o&&o.apply(r,[])})(),d=((t,r)=>{let n=[],o=L(r)?t=>en(n,n=>r(n,t)):t=>er(n,t);for(let a=0,l=t.length;a<l;a++){let i=t[a];o(i)||n.push(i)}return n})((n=t,tT.browser.isIE()||tT.browser.isEdge()?(bf("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Ez?(bf("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):E(n.selector)?EL.select(n.selector):D(n.target)?[n.target]:[])),tP.each(d,t=>{var n;(n=r.get(t.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(E1(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0)}),0===(d=tP.grep(d,t=>!r.get(t.id))).length?a([]):EP(d,n=>{var l,u,c;let m;(l=t,u=n,l.inline&&u.tagName.toLowerCase() in o)?bf("Could not initialize inline editor on invalid inline target element",n):((t,n,o)=>{let l=new ED(t,n,r);s.push(l),l.on("init",()=>{++i===d.length&&a(s)}),l.targetElm=l.targetElm||o,l.render()})(((m=(c=n).id)||(m=eL(c,"name").filter(t=>!EL.get(t)).getOrThunk(EL.uniqueId),c.setAttribute("id",m)),m),t,n)})};return EL.bind(window,"ready",l),new Promise(t=>{n?t(n):a=r=>{t(r)}})},get(t){return 0===arguments.length?EF.slice(0):E(t)?em(EF,r=>r.id===t).getOr(null):P(t)&&EF[t]?EF[t]:null},add(t){let r=this,n=r.get(t.id);return n===t||(null===n&&EF.push(t),EU(!0),r.activeEditor=t,r.dispatch("AddEditor",{editor:t}),EM||(EM=t=>{let n=r.dispatch("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",EM))),t},createEditor(t,r){return this.add(new ED(t,r,this))},remove(t){let r=this,n;if(t){if(!E(t))return n=t,A(r.get(n.id))?null:(E1(n)&&r.dispatch("RemoveEditor",{editor:n}),0===EF.length&&window.removeEventListener("beforeunload",EM),n.remove(),EU(EF.length>0),n);EP(EL.select(t),t=>{(n=r.get(t.id))&&r.remove(n)})}else for(let o=EF.length-1;o>=0;o--)r.remove(EF[o])},execCommand(t,r,n){var o;let a=S(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":if(!this.get(a)){let l=n.options;new ED(a,l,this).render()}return!0;case"mceRemoveEditor":{let i=this.get(a);return i&&i.remove(),!0}case"mceToggleEditor":{let s=this.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(this.execCommand("mceAddEditor",!1,n),!0)}}return!!this.activeEditor&&this.activeEditor.execCommand(t,r,n)},triggerSave(){EP(EF,t=>{t.save()})},addI18n(t,r){a3.add(t,r)},translate:t=>a3.translate(t),setActive(t){let r=this.activeEditor;this.activeEditor!==t&&(r&&r.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:r})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new h5(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new h5(this.baseURL)}};E6.setup();let Ej=(()=>{let t=a5();return{FakeClipboardItem:t=>({items:t,types:e8(t),getType:r=>eL(t,r).getOrUndefined()}),write(r){t.set(r)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),E4=Math.min,EH=Math.max,E7=Math.round,E3=(t,r,n)=>{let o=r.x,a=r.y,l=t.w,i=t.h,s=r.w,d=r.h,u=(n||"").split("");return"b"===u[0]&&(a+=d),"r"===u[1]&&(o+=s),"c"===u[0]&&(a+=E7(d/2)),"c"===u[1]&&(o+=E7(s/2)),"b"===u[3]&&(a-=i),"r"===u[4]&&(o-=l),"c"===u[3]&&(a-=E7(i/2)),"c"===u[4]&&(o-=E7(l/2)),E9(o,a,l,i)},E9=(t,r,n,o)=>({x:t,y:r,w:n,h:o}),E2=(()=>{let t={},r={};return{load(n,o){let a=`Script at URL "${o}" failed to load`,l=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{let i=new Promise((t,i)=>{let s=((t,r,n=1e3)=>{let o=!1,a=null,l=t=>(...r)=>{o||(o=!0,null!==a&&(clearTimeout(a),a=null),t.apply(null,r))},i=l(t),s=l(r);return{start(...t){o||null!==a||(a=setTimeout(()=>s.apply(null,t),n))},resolve:i,reject:s}})(t,i);r[n]=s.resolve,a6.ScriptLoader.loadScript(o).then(()=>s.start(l),()=>s.reject(a))});return t[n]=i,i}},add(n,o){void 0!==r[n]&&(r[n](o),delete r[n]),t[n]=Promise.resolve(o)},unload(r){delete t[r]}}})(),E5;try{let EV="__storage_test__";(E5=window.localStorage).setItem(EV,EV),E5.removeItem(EV)}catch(Eq){E5=(()=>{let t={},r=[],n={getItem:r=>t[r]||null,setItem(n,o){r.push(n),t[n]=String(o)},key:t=>r[t],removeItem(n){r=r.filter(t=>t===n),delete t[n]},clear(){r=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>r.length,configurable:!1,enumerable:!1}),n})()}let EW={geom:{Rect:{inflate:(t,r,n)=>E9(t.x-r,t.y-n,t.w+2*r,t.h+2*n),relativePosition:E3,findBestRelativePosition(t,r,n,o){for(let a=0;a<o.length;a++){let l=E3(t,r,o[a]);if(l.x>=n.x&&l.x+l.w<=n.w+n.x&&l.y>=n.y&&l.y+l.h<=n.h+n.y)return o[a]}return null},intersect(t,r){let n=EH(t.x,r.x),o=EH(t.y,r.y),a=E4(t.x+t.w,r.x+r.w),l=E4(t.y+t.h,r.y+r.h);return a-n<0||l-o<0?null:E9(n,o,a-n,l-o)},clamp(t,r,n){let o=t.x,a=t.y,l=t.x+t.w,i=t.y+t.h,s=r.x+r.w,d=r.y+r.h,u=EH(0,r.x-o),c=EH(0,r.y-a),m=EH(0,l-s),f=EH(0,i-d);return o+=u,a+=c,n&&(l+=u,i+=c,o-=m,a-=f),E9(o,a,(l-=m)-o,(i-=f)-a)},create:E9,fromClientRect:t=>E9(t.left,t.top,t.width,t.height)}},util:{Delay:md,Tools:tP,VK:cs,URI:h5,EventDispatcher:Ec,Observable:Ef,I18n:a3,LocalStorage:E5,ImageUploader(t){let r=bh(),n=by(t,r);return{upload:(r,o=!0)=>n.upload(r,o?b$(t):void 0)}}},dom:{EventUtils:aT,TreeWalker:ny,TextSeeker:lu,DOMUtils:a1,ScriptLoader:a6,RangeUtils:cF,Serializer:vj,StyleSheetLoader:oW,ControlSelection:cf,BookmarkManager:ce,Selection:v1,Event:aT.Event},html:{Styles:ak,Entities:au,Node:mD,Schema:ax,DomParser:vr,Writer:mz,Serializer:m6},Env:tT,AddOnManager:a9,Annotator:uZ,Formatter:bO,UndoManager:bB,EditorCommands:Er,WindowManager:bs,NotificationManager:ba,EditorObservable:E$,Shortcuts:EA,Editor:ED,FocusManager:ms,EditorManager:E6,DOM:a1.DOM,ScriptLoader:a6.ScriptLoader,PluginManager:bl,ThemeManager:bi,ModelManager:vJ,IconManager:vQ,Resource:E2,FakeClipboard:Ej,trim:tP.trim,isArray:tP.isArray,is:tP.is,toArray:tP.toArray,makeMap:tP.makeMap,each:tP.each,map:tP.map,grep:tP.grep,inArray:tP.inArray,extend:tP.extend,walk:tP.walk,resolve:tP.resolve,explode:tP.explode,_addCacheSuffix:tP._addCacheSuffix},EK=tP.extend(E6,EW);s=EK,window.tinymce=s,window.tinyMCE=s,(t=>{if("object"==typeof module)try{module.exports=t}catch(r){}})(EK)}();